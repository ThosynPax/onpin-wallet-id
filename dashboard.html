  <!-- Mic Icon for Accessibility -->
  <button id="accessMicBtn" aria-label="Activate screen reader" class="fixed top-4 right-4 bg-green-600 text-white rounded-full p-3 shadow-lg focus:outline-none" tabindex="0">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18v2m0-2a6 6 0 006-6V9a6 6 0 10-12 0v3a6 6 0 006 6zm0 0v2m-6-6h12" />
    </svg>
  </button>
  <script>
    // Accessibility: Screen Reader Functionality
    const speak = (text) => {
      if ('speechSynthesis' in window) {
        window.speechSynthesis.cancel();
        const utter = new SpeechSynthesisUtterance(text);
        utter.lang = 'en-US';
        window.speechSynthesis.speak(utter);
      }
    };

    // Make mic icon functional for reading out screen content
    document.addEventListener('DOMContentLoaded', function() {
      var micBtn = document.getElementById('accessMicBtn');
      if (micBtn) {
        micBtn.addEventListener('click', function() {
          let content = '';
          const title = document.querySelector('h1, h2, h3');
          if (title) content += title.textContent + '. ';
          const labels = document.querySelectorAll('label, h3, p');
          labels.forEach(label => {
            if (label.offsetParent !== null) content += label.textContent + '. ';
          });
          const errors = document.querySelectorAll('.error-message');
          errors.forEach(err => {
            if (err.textContent) content += 'Error: ' + err.textContent + '. ';
          });
          speak(content);
        });
      }
      if (micBtn) {
        micBtn.addEventListener('keydown', function(e) {
          if (e.key === 'Enter' || e.key === ' ') {
            micBtn.click();
          }
        });
      }
    });

    // Voice Biometrics Proof of Concept
    let voiceChunks = [];
    let mediaRecorder = null;
    let voiceBlob = null;
    document.addEventListener('DOMContentLoaded', function() {
      const voiceSection = document.getElementById('voiceBiometricsSection');
      const startBtn = document.getElementById('startVoiceRecordBtn');
      const stopBtn = document.getElementById('stopVoiceRecordBtn');
      const playBtn = document.getElementById('playVoiceSampleBtn');
      const statusDiv = document.getElementById('voiceStatus');

      if (voiceSection) {
        voiceSection.classList.remove('hidden');
      }

      if (startBtn && stopBtn && playBtn) {
        startBtn.addEventListener('click', async () => {
          voiceChunks = [];
          statusDiv.textContent = 'Recording...';
          startBtn.disabled = true;
          stopBtn.disabled = false;
          playBtn.disabled = true;
          if (mediaRecorder) mediaRecorder.stop();
          try {
            const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
            mediaRecorder = new MediaRecorder(stream);
            mediaRecorder.ondataavailable = (e) => {
              if (e.data.size > 0) voiceChunks.push(e.data);
            };
            mediaRecorder.onstop = () => {
              voiceBlob = new Blob(voiceChunks, { type: 'audio/webm' });
              statusDiv.textContent = 'Recording complete.';
              playBtn.disabled = false;
            };
            mediaRecorder.start();
          } catch (err) {
            statusDiv.textContent = 'Microphone access denied.';
            startBtn.disabled = false;
            stopBtn.disabled = true;
          }
        });
        stopBtn.addEventListener('click', () => {
          if (mediaRecorder && mediaRecorder.state === 'recording') {
            mediaRecorder.stop();
            startBtn.disabled = false;
            stopBtn.disabled = true;
          }
        });
        playBtn.addEventListener('click', () => {
          if (voiceBlob) {
            const audio = new Audio(URL.createObjectURL(voiceBlob));
            audio.play();
            statusDiv.textContent = 'Playing voice sample...';
            audio.onended = () => {
              statusDiv.textContent = 'Playback finished.';
            };
          }
        });
      }
    });

    // Accessibility: Add ARIA labels and keyboard navigation to main form elements
    document.addEventListener('DOMContentLoaded', function() {
      const inputs = document.querySelectorAll('input, select, textarea, button');
      inputs.forEach(input => {
        if (!input.hasAttribute('aria-label') && input.id) {
          const label = document.querySelector(`label[for='${input.id}']`);
          if (label) input.setAttribute('aria-label', label.textContent);
        }
      });
      const mainForm = document.querySelector('form');
      if (mainForm) mainForm.setAttribute('role', 'form');
    });
    </script>
  <!DOCTYPE html>
  <html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ONPIN Identity Wallet - Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      .biometric-icon {
        transition: all 0.3s ease;
      }
      .biometric-icon:hover {
        transform: scale(1.1);
      }
      .progress-bar {
        transition: width 0.5s ease;
      }
      .voice-command-active {
        animation: pulse 1.5s infinite;
      }
      @keyframes pulse {
        0% { box-shadow: 0 0 0 0 rgba(74, 222, 128, 0.7); }
        70% { box-shadow: 0 0 0 10px rgba(74, 222, 128, 0); }
        100% { box-shadow: 0 0 0 0 rgba(74, 222, 128, 0); }
      }
      .language-selector {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23334d5c'%3E%3Cpath d='M12 2a10 10 0 100 20 10 10 0 000-20zm0 18a8 8 0 110-16 8 8 0 010 16z'/%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 0.5rem center;
        background-size: 1.5em;
      }
      .biometric-scan {
        animation: scan 2s infinite;
      }
      @keyframes scan {
        0% { transform: translateY(0); opacity: 0; }
        50% { opacity: 1; }
        100% { transform: translateY(100%); opacity: 0; }
      }
      /* Credit Score Gauge */
      .credit-gauge {
        position: relative;
        width: 200px;
        height: 100px;
        margin: 0 auto;
      }
      .credit-gauge svg {
        width: 100%;
        height: 100%;
      }
      .credit-score-text {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
      }
      /* Responsive styles */
      .container {
        width: 100%;
        padding-left: 1rem;
        padding-right: 1rem;
      }
      @media (min-width: 640px) {
        .container {
          max-width: 640px;
        }
      }
      @media (min-width: 768px) {
        .container {
          max-width: 768px;
        }
      }
      @media (min-width: 1024px) {
        .container {
          max-width: 1024px;
        }
      }
      header {
        padding: 1rem;
      }
      @media (min-width: 768px) {
        header {
          padding: 1.5rem;
        }
      }
      .profile-container {
        flex-direction: column;
      }
      @media (min-width: 768px) {
        .profile-container {
          flex-direction: row;
        }
      }
      .quick-actions {
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 0.5rem;
      }
      @media (min-width: 640px) {
        .quick-actions {
          grid-template-columns: repeat(3, minmax(0, 1fr));
          gap: 1rem;
        }
      }
      .tab-container {
        overflow-x: auto;
        white-space: nowrap;
        -webkit-overflow-scrolling: touch;
      }
      .tab-item {
        display: inline-block;
        padding: 0.75rem 1rem;
      }
      @media (min-width: 768px) {
        .tab-container {
          overflow-x: visible;
          white-space: normal;
        }
        .tab-item {
          display: block;
        }
      }
      .transaction-item {
        flex-direction: column;
        padding: 0.75rem;
      }
      @media (min-width: 640px) {
        .transaction-item {
          flex-direction: row;
          padding: 1rem;
        }
      }
      .modal-container {
        width: 95%;
        margin: 1rem auto;
        padding: 1rem;
      }
      @media (min-width: 640px) {
        .modal-container {
          width: 100%;
          max-width: 28rem;
          padding: 1.5rem;
        }
      }
      input, select {
        width: 100%;
        padding: 0.5rem;
        font-size: 1rem;
      }
      @media (min-width: 640px) {
        input, select {
          padding: 0.75rem;
          font-size: 1.125rem;
        }
      }
      .btn {
        padding: 0.5rem 1rem;
        font-size: 0.875rem;
      }
      @media (min-width: 640px) {
        .btn {
          padding: 0.75rem 1.5rem;
          font-size: 1rem;
        }
      }
      .text-xs { font-size: 0.75rem; }
      .text-sm { font-size: 0.875rem; }
      .text-base { font-size: 1rem; }
      .text-lg { font-size: 1.125rem; }
      .text-xl { font-size: 1.25rem; }
      .text-2xl { font-size: 1.5rem; }
      @media (min-width: 768px) {
        .text-xl { font-size: 1.5rem; }
        .text-2xl { font-size: 1.75rem; }
      }
      .biometric-scan-container {
        width: 100%;
        max-width: 18rem;
        margin: 0 auto;
      }
      .emotional-meter {
        background: linear-gradient(90deg, #ef4444 0%, #f59e0b 25%, #10b981 50%, #3b82f6 75%, #8b5cf6 100%);
        height: 8px;
        border-radius: 4px;
        position: relative;
      }
      .emotional-indicator {
        position: absolute;
        top: -2px;
        width: 12px;
        height: 12px;
        background: white;
        border: 2px solid #374151;
        border-radius: 50%;
        transform: translateX(-50%);
      }
      /* Add these to your existing styles */
      @keyframes alarm-pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.05); }
        100% { transform: scale(1); }
      }

      .alarm-active {
        animation: alarm-pulse 0.5s infinite;
        box-shadow: 0 0 0 2px rgba(220, 38, 38, 0.5);
      }
    </style>
  </head>
  <body class="bg-gray-100">
    <div id="root"></div>

    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
      // Translations
      const translations = {
        en: {
          login_title: "Login to ONPIN Wallet",
          signup_title: "Create ONPIN Wallet",
          receive_money: "Receive",
          email_label: "Email",
          password_label: "Password",
          confirm_password_label: "Confirm Password",
          login_button: "Login",
          signup_button: "Sign Up",
          or_login_with: "Or login with",
          no_account: "Don't have an account?",
          have_account: "Already have an account?",
          signup_link: "Sign up now",
          login_link: "Login now",
          verifying_biometrics: "Verifying biometrics...",
          welcome_message: "Welcome back {{name}}",
          logout_button: "Logout",
          wallet_balance: "Wallet Balance",
          overview_tab: "Overview",
          payments_tab: "Payments",
          consent_tab: "Consent",
          settings_tab: "Settings",
          quick_actions: "Quick Actions",
          transfer: "Transfer",
          payments: "Payments",
          consent: "Consent",
          disaster_relief: "Disaster Relief",
          recent_activity: "Recent Activity",
          account_verified: "Account Verified",
          biometric_enrollment: "Biometric Enrollment",
          consent_granted_to: "Consent granted to",
          payment_services: "Payment Services",
          send_money: "Send Money",
          request_money: "Request Money",
          pay_bills: "Pay Bills",
          airtime_data: "Airtime/Data",
          recent_transactions: "Recent Transactions",
          credit: "Credit",
          debit: "Debit",
          disaster_relief_payment: "Disaster Relief Payment",
          consent_management: "Consent Management",
          pending_requests: "Pending Requests",
          active_consents: "Active Consents",
          no_pending_requests: "No pending requests",
          no_active_consents: "No active consents",
          grant: "Grant",
          deny: "Deny",
          revoke: "Revoke",
          government_services: "Government Services",
          emergency_payments: "Emergency Payments",
          biometric_settings: "Biometric Settings",
          face_id: "Face ID",
          fingerprint: "Fingerprint",
          voice_recognition: "Voice Recognition",
          security: "Security",
          change_password: "Change Password",
          privacy: "Privacy",
          data_sharing_preferences: "Data Sharing Preferences",
          help: "Help",
          contact_support: "Contact Support",
          voice_command_received: "Voice command received: {{command}}",
          voice_command_unknown: "Sorry, I didn't understand that command",
          disaster_payment_triggered: "Disaster relief payments triggered for your location",
          disaster_payment_confirmation: "Disaster relief payments have been processed for citizens in your area",
          consent_granted: "Consent granted to {{requester}}",
          consent_revoked: "Consent revoked from {{requester}}",
          name_label: "Full Name",
          nin_label: "National Identification Number (NIN)",
          bvn_label: "Bank Verification Number (BVN)",
          phone_label: "Phone Number",
          step_1: "NIN/BVN",
          step_2: "Details",
          step_3: "Password",
          step_4: "Biometrics",
          biometric_title: "Biometric Enrollment",
          biometric_description: "Secure your wallet with multi-factor biometric authentication",
          complete_registration: "Complete Registration",
          back_button: "Back",
          next_button: "Next",
          nin_required: "NIN is required",
          bvn_required: "BVN is required",
          name_required: "Name is required",
          email_required: "Email is required",
          phone_required: "Phone is required",
          password_required: "Password is required",
          password_mismatch: "Passwords do not match",
          registration_complete: "Registration complete! Your ONPIN wallet is ready",
          kyc_verification: "KYC Verification",
          identity_verification: "Identity Verification",
          view_biometrics: "View Biometrics",
          biometric_data: "Biometric Data",
          bank_connections: "Bank Connections",
          connect_bank: "Connect Bank",
          connected_banks: "Connected Banks",
          no_connected_banks: "No banks connected",
          verify_identity: "Verify Identity",
          identity_status: "Identity Status",
          verified: "Verified",
          unverified: "Unverified",
          verify_now: "Verify Now",
          verification_success: "Identity verification successful",
          bank_verification: "Bank Verification",
          recent_transfers: "Recent Transfers",
          no_recent_transfers: "No recent transfers",
          recipient: "Recipient",
          amount: "Amount",
          date: "Date",
          status: "Status",
          pending: "Pending",
          completed: "Completed",
          failed: "Failed",
          make_transfer: "Make Transfer",
          to: "To",
          stop_alarm: "Stop Alarm",
          enter_amount: "Enter Amount",
          send: "Send",
          cancel: "Cancel",
          transfer_success: "Transfer successful",
          transfer_failed: "Transfer failed",
          insufficient_funds: "Insufficient funds",
          enter_recipient: "Enter recipient wallet ID",
          enter_valid_amount: "Please enter a valid amount",
          transaction_details: "Transaction Details",
          transaction_id: "Transaction ID",
          reference: "Reference",
          purpose: "Purpose",
          view_details: "View Details",
          close: "Close",
          language: "Language",
          english: "English",
          yoruba: "Yoruba",
          hausa: "Hausa",
          igbo: "Igbo",
          french: "French",
          arabic: "Arabic",
          did_label: "Decentralized ID (DID)",
          pin_label: "PIN",
          login_with_pin: "Login with PIN",
          generate_did: "Generate DID",
          did_generated: "Your DID has been generated: {{did}}",
          pin_required: "PIN is required",
          pin_must_be_4_digits: "PIN must be 4 digits",
          invalid_pin: "Invalid PIN",
          invalid_did: "Invalid DID",
          fund_wallet: "Fund Wallet",
          select_bank: "Select Bank",
          fund_amount: "Amount to Fund",
          fund_now: "Fund Now",
          funding_success: "Wallet funded successfully",
          scan_face: "Scan your face",
          scan_fingerprint: "Scan your fingerprint",
          speak_now: "Speak now for voice recognition",
          biometric_success: "Biometric verification successful",
          biometric_failed: "Biometric verification failed",
          not_enrolled: "Not enrolled",
          enroll_now: "Enroll Now",
          optional: "Optional",
          add_bank: "Add Bank Account",
          bank_name: "Bank Name",
          account_number: "Account Number",
          account_name: "Account Name",
          add_now: "Add Now",
          bank_added: "Bank account added successfully",
          verify_bank: "Verify Bank",
          verifying: "Verifying...",
          bank_verified: "Bank account verified",
          consent_tab: "Consent",
          lifecycle_tab: "Lifecycle",
          grant_consent: "Grant Consent",
          revoke_consent: "Revoke Consent",
          active_consents: "Active Consents",
          no_active_consents: "No active consents",
          identity_status: "Identity Status",
          issue_at_birth: "Issue at Birth",
          revoke_at_death: "Revoke at Death",
          linked_services: "Linked Services",
          ussd_access: "USSD Access",
          sms_access: "SMS Access",
          dial_code: "Dial code",
          send_to: "Send to",
          view_commands: "View Commands",
          simulate_ussd: "Simulate USSD",
          simulate_sms: "Simulate SMS",
          identity_status_active: "Active",
          identity_status_suspended: "Suspended",
          identity_status_revoked: "Revoked",
          next_verification: "Next Verification",
          credit_score: "Credit Score",
          credit_rating: "Credit Rating",
          excellent: "Excellent",
          good: "Good",
          fair: "Fair",
          poor: "Poor",
          credit_history: "Credit History",
          loan_eligibility: "Loan Eligibility",
          eligible: "Eligible",
          not_eligible: "Not Eligible",
          credit_factors: "Credit Factors",
          payment_history: "Payment History",
          credit_utilization: "Credit Utilization",
          credit_length: "Credit Length",
          credit_mix: "Credit Mix",
          new_credit: "New Credit",
          improve_score: "Improve Score",
          credit_report: "Credit Report",
          download_report: "Download Report",
          share_with_lender: "Share with Lender",
          api_access: "API Access",
          generate_api_key: "Generate API Key",
          api_documentation: "API Documentation",
          // Additional translations for new features
          bill_payment: "Bill Payment",
          electricity: "Electricity",
          water: "Water",
          internet: "Internet",
          cable_tv: "Cable TV",
          phone_bill: "Phone Bill",
          select_biller: "Select Biller",
          customer_id: "Customer ID",
          pay_now: "Pay Now",
          payment_successful: "Payment successful",
          airtime_topup: "Airtime Top-up",
          data_bundle: "Data Bundle",
          select_network: "Select Network",
          phone_number: "Phone Number",
          select_amount: "Select Amount",
          buy_now: "Buy Now",
          topup_successful: "Top-up successful",
          loan_application: "Loan Application",
          personal_loan: "Personal Loan",
          business_loan: "Business Loan",
          emergency_loan: "Emergency Loan",
          loan_amount: "Loan Amount",
          loan_purpose: "Loan Purpose",
          monthly_income: "Monthly Income",
          apply_loan: "Apply for Loan",
          loan_applied: "Loan application submitted",
          repay_loan: "Repay Loan",
          loan_balance: "Loan Balance",
          next_payment: "Next Payment",
          make_payment: "Make Payment",
          payment_made: "Payment made successfully",
          investment_options: "Investment Options",
          treasury_bills: "Treasury Bills",
          mutual_funds: "Mutual Funds",
          fixed_deposit: "Fixed Deposit",
          stocks: "Stocks",
          invest_amount: "Investment Amount",
          expected_return: "Expected Return",
          maturity_date: "Maturity Date",
          invest_now: "Invest Now",
          investment_successful: "Investment successful",
          withdraw_investment: "Withdraw Investment",
          current_value: "Current Value",
          withdraw_amount: "Withdraw Amount",
          withdraw_now: "Withdraw Now",
          withdrawal_successful: "Withdrawal successful",
          emotional_wellbeing: "Emotional Wellbeing",
          mood_tracker: "Mood Tracker",
          stress_level: "Stress Level",
          happiness_index: "Happiness Index",
          anxiety_level: "Anxiety Level",
          record_mood: "Record Mood",
          mood_recorded: "Mood recorded successfully",
          insurance_policies: "Insurance Policies",
          health_insurance: "Health Insurance",
          life_insurance: "Life Insurance",
          auto_insurance: "Auto Insurance",
          property_insurance: "Property Insurance",
          policy_details: "Policy Details",
          premium_amount: "Premium Amount",
          coverage_amount: "Coverage Amount",
          pay_premium: "Pay Premium",
          premium_paid: "Premium paid successfully",
          file_claim: "File Claim",
          claim_amount: "Claim Amount",
          claim_reason: "Claim Reason",
          submit_claim: "Submit Claim",
          claim_submitted: "Claim submitted successfully",
          remittance_services: "Remittance Services",
          send_money_abroad: "Send",
          receive_money: "Receive",
          exchange_rate: "Exchange Rate",
          recipient_country: "Recipient Country",
          recipient_details: "Recipient Details",
          transfer_fee: "Transfer Fee",
          send_remittance: "Send Remittance",
          remittance_sent: "Remittance sent successfully",
          birth_certificate: "Birth Certificate",
          death_certificate: "Death Certificate",
          marriage_certificate: "Marriage Certificate",
          divorce_certificate: "Divorce Certificate",
          request_certificate: "Request Certificate",
          certificate_requested: "Certificate requested successfully",
          biometric_scan_face: "Scanning face...",
          biometric_scan_finger: "Scanning fingerprint...",
          biometric_scan_voice: "Recording voice...",
          scan_complete: "Scan complete",
          enrollment_successful: "Enrollment successful",
          disaster_alerts: "Disaster Alerts",
          emergency_contacts: "Emergency Contacts",
          nearest_hospitals: "Nearest Hospitals",
          shelter_locations: "Shelter Locations",
          disaster_preparedness: "Disaster Preparedness",
          flood_warning: "Flood Warning",
          earthquake_alert: "Earthquake Alert",
          extreme_weather: "Extreme Weather",
          high_priority: "High Priority",
          medium_priority: "Medium Priority",
          low_priority: "Low Priority",
          active_alerts: "Active",
          all_clear: "All Clear",
          test_alert: "Test",
          mark_resolved: "Mark as Resolved",
          share_alert: "Share Alert",
          alert_preferences: "Alert Preferences",
          receive_alerts: "Receive Alerts",
          alert_types: "Alert Types",
          notification_methods: "Notification Methods",
          push_notification: "Push Notification",
          voice_call: "Voice Call",
        },
        ig: {
    login_title: "Banye na ONPIN Wallet",
    signup_title: "Mepụta ONPIN Wallet",
    email_label: "Email",
    password_label: "Paswọọdụ",
    confirm_password_label: "Kwenye paswọọdụ",
    login_button: "Banye",
    signup_button: "Debanye aha",
    or_login_with: "Ma ọ bụ banye site na",
    no_account: "Enweghị akaụntụ?",
    have_account: "Enweelarị akaụntụ?",
    signup_link: "Debanye aha ugbu a",
    login_link: "Banye ugbu a",
    verifying_biometrics: "Na-enyocha biometrics...",
    welcome_message: "Nnọọ {{name}}",
    logout_button: "Wepụ",
    wallet_balance: "Balance Wallet",
    overview_tab: "Nchịkọta",
    payments_tab: "Ịkwụ ụgwọ",
    consent_tab: "Nkwenye",
    settings_tab: "Ntọala",
    quick_actions: "Ọrụ ngwa ngwa",
    transfer: "Nyefee",
    payments: "Ịkwụ ụgwọ",
    consent: "Nkwenye",
    disaster_relief: "Enyemaka Ọdachi",
    recent_activity: "Ọrụ na nso nso a",
    account_verified: "Akaụntụ enyochala",
    biometric_enrollment: "Ndebanye aha biometric",
    stop_alarm: "Kwụsị mkpu",
    consent_granted_to: "Enyere nkwenye nye",
    payment_services: "Ọrụ ịkwụ ụgwọ",
    send_money: "Zipu ego",
    request_money: "Rịọ ego",
    pay_bills: "Kwụọ ụgwọ",
    airtime_data: "Oge ikuku/Data",
    recent_transactions: "Azụmahịa ndị na-adịbeghị anya",
    credit: "Kredit",
    debit: "Debit",
    disaster_relief_payment: "Ịkwụ ụgwọ enyemaka ọdachi",
    consent_management: "Njikwa nkwenye",
    pending_requests: "Arịrịọ na-echere",
    active_consents: "Nkwenye na-arụ ọrụ",
    no_pending_requests: "Enweghị arịrịọ na-echere",
    no_active_consents: "Enweghị nkwenye na-arụ ọrụ",
    grant: "Nye",
    deny: "Jụ",
    revoke: "Kagbuo",
    government_services: "Ọrụ gọọmentị",
    emergency_payments: "Ịkwụ ụgwọ mberede",
    biometric_settings: "Ntọala biometric",
    face_id: "Face ID",
    fingerprint: "Akara mkpịsị aka",
    voice_recognition: "Nnabata olu",
    security: "Nchekwa",
    change_password: "Gbanwee paswọọdụ",
    privacy: "Nzuzo",
    data_sharing_preferences: "Mmasị ịkekọrịta data",
    help: "Enyemaka",
    contact_support: "Kpọtụrụ nkwado",
    voice_command_received: "Natara iwu olu: {{command}}",
    voice_command_unknown: "Ndo, aghọtaghị m iwu ahụ",
    disaster_payment_triggered: "Akpalitela ịkwụ ụgwọ enyemaka ọdachi maka ọnọdụ gị",
    disaster_payment_confirmation: "Emeela ịkwụ ụgwọ enyemaka ọdachi maka ụmụ amaala nọ na mpaghara gị",
    consent_granted: "Enyere nkwenye nye {{requester}}",
    consent_revoked: "Ewepụla nkwenye n'aka {{requester}}",
    name_label: "Aha zuru ezu",
    nin_label: "Nọmba NJirimara Mba (NIN)",
    bvn_label: "Nọmba Nkwenye Bank (BVN)",
    phone_label: "Nọmba ekwentị",
    step_1: "NIN/BVN",
    step_2: "Nkọwa",
    step_3: "Paswọọdụ",
    step_4: "Biometrics",
    biometric_title: "Ndebanye aha biometric",
    biometric_description: "Chekwaa obere akpa gị site na njirimara biometric ọtụtụ ihe",
    complete_registration: "Mechie ndebanye aha",
    back_button: "Azụ",
    next_button: "Ọzọ",
    nin_required: "Achọrọ NIN",
    bvn_required: "Achọrọ BVN",
    name_required: "Achọrọ aha",
    email_required: "Achọrọ email",
    phone_required: "Achọrọ nọmba ekwentị",
    password_required: "Achọrọ paswọọdụ",
    password_mismatch: "Okwuntughe adabaghị",
    registration_complete: "Emechara ndebanye aha! ONPIN obere akpa gị dị njikere",
    kyc_verification: "Nyocha KYC",
    identity_verification: "Nyocha njirimara",
    view_biometrics: "Lelee biometrics",
    biometric_data: "Data biometric",
    bank_connections: "Njikọ ụlọ akụ",
    connect_bank: "Jikọọ ụlọ akụ",
    connected_banks: "Ụlọ akụ ejikọrọ",
    no_connected_banks: "Enweghị ụlọ akụ ejikọrọ",
    verify_identity: "Nyochaa njirimara",
    identity_status: "Ọkwa njirimara",
    verified: "Enyochala",
    unverified: "Achọpụtabeghị",
    verify_now: "Nyochaa ugbu a",
    verification_success: "Nyocha njirimara gara nke ọma",
    bank_verification: "Nyocha ụlọ akụ",
    recent_transfers: "Nyefe na nso nso a",
    no_recent_transfers: "Enweghị mbufe na nso nso a",
    recipient: "Onye nnata",
    amount: "Ọnụ ego",
    date: "Ụbọchị",
    status: "Ọnọdụ",
    pending: "Na-echere",
    completed: "Emechara",
    failed: "Dara",
    make_transfer: "Mee mbufe",
    to: "Gaa na",
    enter_amount: "Tinye ego",
    send: "Ziga",
    cancel: "Kagbuo",
    transfer_success: "Mbufe gara nke ọma",
    transfer_failed: "Mbufe dara",
    insufficient_funds: "Ego ezughị oke",
    enter_recipient: "Tinye ID obere akpa onye nnata",
    enter_valid_amount: "Biko tinye ego ziri ezi",
    transaction_details: "Nkọwa azụmahịa",
    transaction_id: "ID azụmahịa",
    reference: "Ntụaka",
    purpose: "Ebumnuche",
    view_details: "Lelee nkọwa",
    close: "Mechie",
    language: "Asụsụ",
    english: "Bekee",
    yoruba: "Yoruba",
    hausa: "Hausa",
    igbo: "Igbo",
    french: "French",
    arabic: "Arabic",
    did_label: "NJirimara Decentralized (DID)",
    pin_label: "PIN",
    login_with_pin: "Banye na PIN",
    generate_did: "Mepụta DID",
    did_generated: "Emepụtara DID gị: {{did}}",
    pin_required: "Achọrọ PIN",
    pin_must_be_4_digits: "PIN ga-abụrịrị nọmba 4",
    invalid_pin: "PIN na-ezighi ezi",
    invalid_did: "DID na-ezighi ezi",
    // Add to Igbo translations (around line 400)
  disaster_alerts: "Ịdọ aka ná ntị Ọdachi",
  emergency_contacts: "Kọntaktị Mberede",
  nearest_hospitals: "Ụlọ Ọgwụ Kacha nso",
  shelter_locations: "Ebe Nchekwa",
  disaster_preparedness: "Nkwadebe Ọdachi",
  flood_warning: "Ịdọ aka ná ntị Iju Mmiri",
  earthquake_alert: "Ịdọ aka ná ntị Ala Ọma Jijiji",
  extreme_weather: "Ọnọdụ Ihu Igwe siri ike",
  high_priority: "Ihe dị elu",
  medium_priority: "Ọkara dị elu",
  low_priority: "Ihe dị ala",
  active_alerts: "Amụma Na-arụ Ọrụ",
  all_clear: "Ihe niile dị ọcha",
  test_alert: "Nnwale Ịdọ aka ná ntị",
  mark_resolved: "Kaa akara dị ka edozi",
  share_alert: "Kekọrịta ịdọ aka ná ntị",
  alert_preferences: "Mmasị ịdọ aka ná ntị",
  receive_alerts: "Nata amụma",
  alert_types: "Ụdị ịdọ aka ná ntị",
  notification_methods: "Ụzọ ngosi",
  push_notification: "Nkwupụta Push",
  voice_call: "Oku olu",
  },
        yo: {
          login_title: "Wo ile ONPIN Wallet",
          login_with_pin: "Wo ile pẹlu PIN",
          signup_title: "Ṣẹda ONPIN Wallet",
          email_label: "Imeeli",
          password_label: "Ọrọ igbaniwọle",
          confirm_password_label: "Jẹrisi ọrọ igbaniwọle",
          login_button: "Wo ile",
          signup_button: "Forukọsilẹ",
          or_login_with: "Tabi wo ile pẹlu",
          no_account: "Ko ni akọọlẹ?",
          have_account: "Ni akọọlẹ tẹlẹ?",
          signup_link: "Forukọsilẹ bayi",
          login_link: "Wo ile bayi",
          verifying_biometrics: "Ṣiṣayẹwo awọn biometrics...",
          welcome_message: "Kaabọ {{name}}",
          logout_button: "Jaade",
          wallet_balance: "Iwọn iṣura",
          overview_tab: "Akopọ",
          payments_tab: "Isanwo",
          consent_tab: "Igbasilẹ",
          settings_tab: "Etọ",
          quick_actions: "Awọn iṣẹ lẹsẹkẹsẹ",
          transfer: "Gbe lọ",
          payments: "Isanwo",
          consent: "Igbasilẹ",
          disaster_relief: "Iranlowo Ijamba",
          recent_activity: "Awọn iṣẹlẹ tuntun",
          account_verified: "Akọọlẹ ti jẹrisi",
          biometric_enrollment: "Iforukọsilẹ biometric",
          consent_granted_to: "Ti fun ni igbasilẹ si",
          payment_services: "Awọn iṣẹ isanwo",
          send_money: "Ranṣẹ owo",
          request_money: "Beere owo",
          pay_bills: "San awọn bilẹ",
          airtime_data: "Airtime/Data",
          recent_transactions: "Awọn iṣowo tuntun",
          credit: "Kirediti",
          debit: "Debiti",
          disaster_relief_payment: "Isanwo Iranlowo Ijamba",
          consent_management: "Iṣakoso Igbasilẹ",
          pending_requests: "Awọn ibeere ti nṣura",
          active_consents: "Awọn igbasilẹ ti nṣiṣẹ",
          no_pending_requests: "Ko si awọn ibeere ti nṣura",
          no_active_consents: "Ko si awọn igbasilẹ ti nṣiṣẹ",
          grant: "Fun ni",
          deny: "Kọ",
          revoke: "Yọ kuro",
          government_services: "Awọn iṣẹ ijọba",
          emergency_payments: "Awọn isanwo iyara",
          biometric_settings: "Awọn etọ biometric",
          face_id: "Face ID",
          fingerprint: "Ika ọwọ",
          voice_recognition: "Ifọrọwanilẹnu ohun",
          security: "Aabo",
          change_password: "Yi ọrọ igbaniwọle pada",
          privacy: "Ikọkọ",
          data_sharing_preferences: "Awọn yiyan pinpin data",
          help: "Iranlọwọ",
          contact_support: "Kan si atilẹyin",
          voice_command_received: "Aṣẹ ohun ti gba: {{command}}",
          voice_command_unknown: "Ma binu, Emi ko gbọ aṣẹ naa",
          disaster_payment_triggered: "Awọn isanwo iranlowo ijamba ti ṣe fun ipo rẹ",
          disaster_payment_confirmation: "Awọn isanwo iranlowo ijamba ti ṣe fun awọn ara ilu ni agbegbe rẹ",
          consent_granted: "Ti fun ni igbasilẹ si {{requester}}",
          consent_revoked: "Ti yọ igbasilẹ kuro ni {{requester}}",
          name_label: "Orukọ kikun",
          nin_label: "Nọmba Idanimọ Orilẹ-ede (NIN)",
          bvn_label: "Nọmba Idanimọ Banki (BVN)",
          phone_label: "Nọmba foonu",
          step_1: "NIN/BVN",
          step_2: "Awọn alaye",
          step_3: "Ọrọ igbaniwọle",
          step_4: "Awọn biometric",
          biometric_title: "Iforukọsilẹ Biometric",
          biometric_description: "Dani ẹru rẹ pẹlu ifọrọwanilẹnu biometric oriṣiriṣi",
          complete_registration: "Parẹ iforukọsilẹ",
          back_button: "Pada",
          next_button: "Iwọle",
          nin_required: "NIN nilo",
          bvn_required: "BVN nilo",
          name_required: "Orukọ nilo",
          email_required: "Imeeli nilo",
          phone_required: "Nọmba foonu nilo",
          password_required: "Ọrọ igbaniwọle nilo",
          password_mismatch: "Awọn ọrọ igbaniwọle ko baamu",
          registration_complete: "Iforukọsilẹ pari! ONPIN ẹru rẹ ti ṣetan",
          kyc_verification: "Iṣẹlẹ KYC",
          identity_verification: "Iṣẹlẹ Idanimọ",
          view_biometrics: "Wo Awọn Biometrics",
          biometric_data: "Data Biometric",
          bank_connections: "Awọn asopọ Banki",
          connect_bank: "So banki pọ",
          connected_banks: "Awọn banki ti a sopọ",
          no_connected_banks: "Ko si awọn banki ti a sopọ",
          verify_identity: "Ṣe ayẹwo idanimọ",
          identity_status: "Ipo Idanimọ",
          verified: "Ti jẹrisi",
          unverified: "Ko jẹrisi",
          verify_now: "Ṣe ayẹwo bayi",
          verification_success: "Iṣẹlẹ idanimọ ti ṣe aṣeyọri",
          bank_verification: "Iṣẹlẹ Banki",
          recent_transfers: "Awọn gbigbe tuntun",
          no_recent_transfers: "Ko si awọn gbigbe tuntun",
          recipient: "Olugba",
          amount: "Iye",
          date: "Ọjọ",
          status: "Ipo",
          pending: "Nṣura",
          completed: "Ti pari",
          failed: "Ti ṣẹgun",
          make_transfer: "Ṣe gbigbe",
          to: "Si",
          enter_amount: "Tẹ iye",
          send: "Ranṣẹ",
          cancel: "Fagilee",
          transfer_success: "Gbigbe ti ṣe aṣeyọri",
          transfer_failed: "Gbigbe ti ṣẹgun",
          insufficient_funds: "Ko si owo to",
          enter_recipient: "Tẹ idẹ ẹru olugba",
          enter_valid_amount: "Jọwọ tẹ iye ti o wulo",
          transaction_details: "Awọn alaye iṣowo",
          transaction_id: "ID Iṣowo",
          reference: "Itọkasi",
          purpose: "Idi",
          view_details: "Wo awọn alaye",
          close: "Pa",
          language: "Ede",
          english: "Gẹẹsi",
          yoruba: "Yoruba",
          hausa: "Hausa",
          igbo: "Igbo",
          french: "Faranse",
          arabic: "Arabiki",
          did_label: "Idanimọ Aisakoso (DID)",
          pin_label: "PIN",
          generate_did: "Ṣẹda DID",
          did_generated: "DID rẹ ti ṣẹda: {{did}}",
          pin_required: "PIN nilo",
          pin_must_be_4_digits: "PIN gbọdọ jẹ nọmba 4",
          invalid_pin: "PIN ti ko tọ",
          invalid_did: "DID ti ko tọ"
        },

  fr: {
    login_title: "Connectez-vous à ONPIN Wallet",
    signup_title: "Créer un portefeuille ONPIN",
    email_label: "Email",
    password_label: "Mot de passe",
    confirm_password_label: "Confirmer le mot de passe",
    login_button: "Connexion",
    signup_button: "S'inscrire",
    or_login_with: "Ou connectez-vous avec",
    no_account: "Vous n'avez pas de compte?",
    have_account: "Vous avez déjà un compte?",
    signup_link: "Inscrivez-vous maintenant",
    login_link: "Connectez-vous maintenant",
    verifying_biometrics: "Vérification des données biométriques...",
    welcome_message: "Bienvenue {{name}}",
    logout_button: "Déconnexion",
    wallet_balance: "Solde du portefeuille",
    overview_tab: "Aperçu",
    payments_tab: "Paiements",
    consent_tab: "Consentement",
    settings_tab: "Paramètres",
    quick_actions: "Actions rapides",
    transfer: "Transfert",
    payments: "Paiements",
    consent: "Consentement",
    disaster_relief: "Secours en cas de catastrophe",
    recent_activity: "Activité récente",
    account_verified: "Compte vérifié",
    biometric_enrollment: "Enregistrement biométrique",
    consent_granted_to: "Consentement accordé à",
    payment_services: "Services de paiement",
    send_money: "Envoyer de l'argent",
    request_money: "Demander de l'argent",
    pay_bills: "Payer les factures",
    airtime_data: "Crédit/Données",
    recent_transactions: "Transactions récentes",
    credit: "Crédit",
    debit: "Débit",
    disaster_relief_payment: "Paiement de secours en cas de catastrophe",
    consent_management: "Gestion du consentement",
    pending_requests: "Demandes en attente",
    active_consents: "Consentements actifs",
    no_pending_requests: "Aucune demande en attente",
    no_active_consents: "Aucun consentement actif",
    grant: "Accorder",
    deny: "Refuser",
    revoke: "Révoquer",
    government_services: "Services gouvernementaux",
    emergency_payments: "Paiements d'urgence",
    biometric_settings: "Paramètres biométriques",
    face_id: "Face ID",
    fingerprint: "Empreinte digitale",
    voice_recognition: "Reconnaissance vocale",
    security: "Sécurité",
    change_password: "Changer le mot de passe",
    privacy: "Confidentialité",
    data_sharing_preferences: "Préférences de partage de données",
    help: "Aide",
    contact_support: "Contacter le support",
    voice_command_received: "Commande vocale reçue: {{command}}",
    voice_command_unknown: "Désolé, je n'ai pas compris cette commande",
    disaster_payment_triggered: "Paiements de secours en cas de catastrophe déclenchés pour votre localisation",
    disaster_payment_confirmation: "Les paiements de secours en cas de catastrophe ont été traités pour les citoyens de votre région",
    consent_granted: "Consentement accordé à {{requester}}",
    consent_revoked: "Consentement révoqué de {{requester}}",
    name_label: "Nom complet",
    nin_label: "Numéro d'identification nationale (NIN)",
    bvn_label: "Numéro de vérification bancaire (BVN)",
    phone_label: "Numéro de téléphone",
    step_1: "NIN/BVN",
    step_2: "Détails",
    step_3: "Mot de passe",
    step_4: "Biométrie",
    biometric_title: "Enregistrement biométrique",
    biometric_description: "Sécurisez votre portefeuille avec une authentification biométrique multifactorielle",
    complete_registration: "Terminer l'inscription",
    back_button: "Retour",
    next_button: "Suivant",
    nin_required: "NIN requis",
    bvn_required: "BVN requis",
    name_required: "Nom requis",
    email_required: "Email requis",
    phone_required: "Téléphone requis",
    password_required: "Mot de passe requis",
    password_mismatch: "Les mots de passe ne correspondent pas",
    registration_complete: "Inscription terminée! Votre portefeuille ONPIN est prêt",
    kyc_verification: "Vérification KYC",
    identity_verification: "Vérification d'identité",
    view_biometrics: "Voir les données biométriques",
    biometric_data: "Données biométriques",
    bank_connections: "Connexions bancaires",
    connect_bank: "Connecter une banque",
    connected_banks: "Banques connectées",
    no_connected_banks: "Aucune banque connectée",
    verify_identity: "Vérifier l'identité",
    identity_status: "Statut d'identité",
    verified: "Vérifié",
    unverified: "Non vérifié",
    verify_now: "Vérifier maintenant",
    verification_success: "Vérification d'identité réussie",
    bank_verification: "Vérification bancaire",
    recent_transfers: "Transferts récents",
    no_recent_transfers: "Aucun transfert récent",
    recipient: "Bénéficiaire",
    amount: "Montant",
    date: "Date",
    status: "Statut",
    pending: "En attente",
    completed: "Terminé",
    failed: "Échoué",
    make_transfer: "Effectuer un transfert",
    to: "À",
    enter_amount: "Entrez le montant",
    send: "Envoyer",
    cancel: "Annuler",
    transfer_success: "Transfert réussi",
    transfer_failed: "Échec du transfert",
    insufficient_funds: "Fonds insuffisants",
    enter_recipient: "Entrez l'ID du portefeuille du bénéficiaire",
    enter_valid_amount: "Veuillez entrer un montant valide",
    transaction_details: "Détails de la transaction",
    transaction_id: "ID de transaction",
    reference: "Référence",
    purpose: "Objet",
    view_details: "Voir les détails",
    close: "Fermer",
    language: "Langue",
    english: "Anglais",
    yoruba: "Yoruba",
    hausa: "Hausa",
    igbo: "Igbo",
    french: "Français",
    arabic: "Arabe",
    did_label: "ID décentralisé (DID)",
    pin_label: "PIN",
    login_with_pin: "Connexion avec PIN",
    generate_did: "Générer DID",
    did_generated: "Votre DID a été généré: {{did}}",
    pin_required: "PIN requis",
    pin_must_be_4_digits: "Le PIN doit être à 4 chiffres",
    invalid_pin: "PIN invalide",
    invalid_did: "DID invalide"
  },

  ar: {
    login_title: "تسجيل الدخول إلى محفظة ONPIN",
    signup_title: "إنشاء محفظة ONPIN",
    email_label: "البريد الإلكتروني",
    password_label: "كلمة المرور",
    confirm_password_label: "تأكيد كلمة المرور",
    login_button: "تسجيل الدخول",
    signup_button: "التسجيل",
    or_login_with: "أو تسجيل الدخول باستخدام",
    no_account: "ليس لديك حساب؟",
    have_account: "لديك حساب بالفعل؟",
    signup_link: "سجل الآن",
    login_link: "تسجيل الدخول الآن",
    verifying_biometrics: "التحقق من البصمات الحيوية...",
    welcome_message: "مرحبًا بعودتك {{name}}",
    logout_button: "تسجيل الخروج",
    wallet_balance: "رصيد المحفظة",
    overview_tab: "نظرة عامة",
    payments_tab: "المدفوعات",
    consent_tab: "الموافقة",
    settings_tab: "الإعدادات",
    quick_actions: "إجراءات سريعة",
    transfer: "تحويل",
    payments: "المدفوعات",
    consent: "الموافقة",
    disaster_relief: "الإغاثة في حالات الكوارث",
    recent_activity: "النشاط الأخير",
    account_verified: "تم التحقق من الحساب",
    biometric_enrollment: "تسجيل البصمات الحيوية",
    consent_granted_to: "تم منح الموافقة لـ",
    payment_services: "خدمات الدفع",
    send_money: "إرسال الأموال",
    request_money: "طلب الأموال",
    pay_bills: "دفع الفواتير",
    airtime_data: "رصيد/بيانات",
    recent_transactions: "المعاملات الأخيرة",
    credit: "ائتمان",
    debit: "مدين",
    disaster_relief_payment: "دفع الإغاثة في حالات الكوارث",
    consent_management: "إدارة الموافقة",
    pending_requests: "الطلبات المعلقة",
    active_consents: "الموافقات النشطة",
    no_pending_requests: "لا توجد طلبات معلقة",
    no_active_consents: "لا توجد موافقات نشطة",
    grant: "منح",
    deny: "رفض",
    revoke: "إلغاء",
    government_services: "الخدمات الحكومية",
    emergency_payments: "المدفوعات الطارئة",
    biometric_settings: "إعدادات البصمات الحيوية",
    face_id: "Face ID",
    fingerprint: "بصمة الإصبع",
    voice_recognition: "التعرف الصوتي",
    security: "الأمان",
    change_password: "تغيير كلمة المرور",
    privacy: "الخصوصية",
    data_sharing_preferences: "تفضيلات مشاركة البيانات",
    help: "مساعدة",
    contact_support: "اتصل بالدعم",
    voice_command_received: "تم استلام الأمر الصوتي: {{command}}",
    voice_command_unknown: "عذرًا، لم أفهم هذا الأمر",
    disaster_payment_triggered: "تم تشغيل مدفوعات الإغاثة في حالات الكوارث لموقعك",
    disaster_payment_confirmation: "تمت معالجة مدفوعات الإغاثة في حالات الكوارث للمواطنين في منطقتك",
    consent_granted: "تم منح الموافقة لـ {{requester}}",
    consent_revoked: "تم سحب الموافقة من {{requester}}",
    name_label: "الاسم الكامل",
    nin_label: "رقم التعريف الوطني (NIN)",
    bvn_label: "رقم التحقق المصرفي (BVN)",
    phone_label: "رقم الهاتف",
    step_1: "NIN/BVN",
    step_2: "التفاصيل",
    step_3: "كلمة المرور",
    step_4: "البصمات الحيوية",
    biometric_title: "تسجيل البصمات الحيوية",
    biometric_description: "أمّن محفظتك باستخدام المصادقة متعددة العوامل البيومترية",
    complete_registration: "إكمال التسجيل",
    back_button: "رجوع",
    next_button: "التالي",
    nin_required: "مطلوب NIN",
    bvn_required: "مطلوب BVN",
    name_required: "مطلوب الاسم",
    email_required: "البريد الإلكتروني مطلوب",
    phone_required: "رقم الهاتف مطلوب",
    password_required: "كلمة المرور مطلوبة",
    password_mismatch: "كلمات المرور غير متطابقة",
    registration_complete: "اكتمل التسجيل! محفظة ONPIN الخاصة بك جاهزة",
    kyc_verification: "التحقق من الهوية KYC",
    identity_verification: "التحقق من الهوية",
    view_biometrics: "عرض البصمات الحيوية",
    biometric_data: "بيانات البصمات الحيوية",
    bank_connections: "اتصالات البنك",
    connect_bank: "ربط البنك",
    connected_banks: "البنوك المتصلة",
    no_connected_banks: "لا توجد بنوك متصلة",
    verify_identity: "التحقق من الهوية",
    identity_status: "حالة الهوية",
    verified: "تم التحقق",
    unverified: "غير محقق",
    verify_now: "تحقق الآن",
    verification_success: "نجاح التحقق من الهوية",
    bank_verification: "التحقق من البنك",
    recent_transfers: "التحويلات الأخيرة",
    no_recent_transfers: "لا توجد تحويلات حديثة",
    recipient: "المستلم",
    amount: "المبلغ",
    date: "التاريخ",
    status: "الحالة",
    pending: "قيد الانتظار",
    completed: "مكتمل",
    failed: "فشل",
    make_transfer: "إجراء تحويل",
    to: "إلى",
    enter_amount: "أدخل المبلغ",
    send: "إرسال",
    cancel: "إلغاء",
    transfer_success: "نجاح التحويل",
    transfer_failed: "فشل التحويل",
    insufficient_funds: "أموال غير كافية",
    enter_recipient: "أدخل معرف محفظة المستلم",
    enter_valid_amount: "الرجاء إدخال مبلغ صالح",
    transaction_details: "تفاصيل المعاملة",
    transaction_id: "معرف المعاملة",
    reference: "المرجع",
    purpose: "الغرض",
    view_details: "عرض التفاصيل",
    close: "إغلاق",
    language: "اللغة",
    english: "الإنجليزية",
    yoruba: "اليوربا",
    hausa: "الهوسا",
    igbo: "الإيجبو",
    french: "الفرنسية",
    arabic: "العربية",
    did_label: "معرف اللامركزي (DID)",
    pin_label: "PIN",
    login_with_pin: "تسجيل الدخول باستخدام PIN",
    generate_did: "إنشاء DID",
    did_generated: "تم إنشاء DID الخاص بك: {{did}}",
    pin_required: "مطلوب PIN",
    pin_must_be_4_digits: "يجب أن يتكون PIN من 4 أرقام",
    invalid_pin: "PIN غير صالح",
    invalid_did: "DID غير صالح"
  },
  ha: {
      login_title: "Shiga cikin Wallet ONPIN",
      signup_title: "Ƙirƙiri Wallet ONPIN",
      receive_money: "Karɓa",
      email_label: "Imel",
      password_label: "Kalmar wucewa",
      confirm_password_label: "Tabbatar da Kalmar Wucewa",
      login_button: "Shiga",
      signup_button: "Yi Rajista",
      or_login_with: "Ko kuma shiga ta",
      no_account: "Baka da asusu?",
      have_account: "Kuna da asusu?",
      signup_link: "Yi rijista yanzu",
      login_link: "Shiga yanzu",
      verifying_biometrics: "Ana tabbatar da bayanan biometric...",
      welcome_message: "Barka da dawowa {{name}}",
      logout_button: "Fita",
      wallet_balance: "Ma'aunin Wallet",
      overview_tab: "Bayanin gaba ɗaya",
      payments_tab: "Biyan kuɗi",
      consent_tab: "Izini",
      settings_tab: "Saituna",
      quick_actions: "Ayyuka masu sauri",
      transfer: "Canja wuri",
      payments: "Biyan kuɗi",
      consent: "Izini",
      disaster_relief: "Taimakon bala'i",
      recent_activity: "Ayyukan kwanan nan",
      account_verified: "An tabbatar da asusu",
      biometric_enrollment: "Rajista na biometric",
      consent_granted_to: "An ba da izini ga",
      payment_services: "Ayyukan biyan kuɗi",
      send_money: "Aika kuɗi",
      request_money: "Nemi kuɗi",
      pay_bills: "Biya kuɗaɗen aiki",
      airtime_data: "Waya/Data",
      recent_transactions: "Ma'amaloli na kwanan nan",
      credit: "Bashi",
      debit: "Cire kuɗi",
      disaster_relief_payment: "Biyan taimakon bala'i",
      consent_management: "Gudanar da izini",
      pending_requests: "Buƙatun da ke jiran aiki",
      active_consents: "Izini masu aiki",
      no_pending_requests: "Babu buƙatun da ke jiran aiki",
      no_active_consents: "Babu izini masu aiki",
      grant: "Ba da izini",
      deny: "ƙi",
      revoke: "Soke",
      government_services: "Ayyukan gwamnati",
      emergency_payments: "Biyan gaggawa",
      biometric_settings: "Saitunan biometric",
      face_id: "ID na fuska",
      fingerprint: "Sawun yatsa",
      voice_recognition: "Gane murya",
      security: "Tsaro",
      change_password: "Canja kalmar wucewa",
      privacy: "Keɓantawa",
      data_sharing_preferences: "Zaɓin raba bayanai",
      help: "Taimako",
      contact_support: "Tuntuɓi tallafi",
      voice_command_received: "An karɓi umarnin murya: {{command}}",
      voice_command_unknown: "Yi hakuri, ban fahimci wannan umarni ba",
      disaster_payment_triggered: "An kunna biyan taimakon bala'i don wurin ku",
      disaster_payment_confirmation: "An aiwatar da biyan taimakon bala'i ga 'yan ƙasa a yankin ku",
      consent_granted: "An ba da izini ga {{requester}}",
      consent_revoked: "An soke izini daga {{requester}}",
      name_label: "Cikakken suna",
      nin_label: "Lambar shaidar ƙasa (NIN)",
      bvn_label: "Lambar tantance banki (BVN)",
      phone_label: "Lambar waya",
      step_1: "NIN/BVN",
      step_2: "Bayanai",
      step_3: "Kalmar wucewa",
      step_4: "Bayanan biometric",
      biometric_title: "Rajista na biometric",
      biometric_description: "Kiyaye walat ɗinku tare da tabbatar da ainihi ta hanyoyi da yawa",
      complete_registration: "Kammala rijista",
      back_button: "Baya",
      next_button: "Gaba",
      nin_required: "Ana buƙatar NIN",
      bvn_required: "Ana buƙatar BVN",
      name_required: "Ana buƙatar suna",
      email_required: "Ana buƙatar imel",
      phone_required: "Ana buƙatar lambar waya",
      password_required: "Ana buƙatar kalmar wucewa",
      password_mismatch: "Kalmomin wucewa ba su daidaita ba",
      registration_complete: "An kammala rijista! Wallet ɗin ku na ONPIN yana shirye",
      kyc_verification: "Tabbatar da KYC",
      identity_verification: "Tabbatar da ainihi",
      view_biometrics: "Dubi bayanan biometric",
      biometric_data: "Bayanan biometric",
      bank_connections: "Haɗin banki",
      connect_bank: "Haɗa banki",
      connected_banks: "Bankunan da aka haɗa",
      no_connected_banks: "Babu bankunan da aka haɗa",
      verify_identity: "Tabbatar da ainihi",
      identity_status: "Matsayin ainihi",
      verified: "An tabbatar",
      unverified: "Ba a tabbatar ba",
      verify_now: "Tabbatar yanzu",
      verification_success: "An tabbatar da ainihin ku cikin nasara",
      bank_verification: "Tabbatar da banki",
      recent_transfers: "Canje-canjen kwanan nan",
      no_recent_transfers: "Babu canje-canje na kwanan nan",
      recipient: "Mai karɓa",
      amount: "Adadin",
      date: "Kwanan wata",
      status: "Matsayi",
      pending: "Ana jiran aiki",
      completed: "An kammala",
      failed: "Ya gaza",
      make_transfer: "Yi canja wuri",
      to: "Zuwa",
      stop_alarm: "Daina ƙararrawa",
      enter_amount: "Shigar da adadin",
      send: "Aika",
      cancel: "Soke",
      transfer_success: "Canjin ya yi nasara",
      transfer_failed: "Canjin ya gaza",
      insufficient_funds: "ƙarancin kuɗi",
      enter_recipient: "Shigar da ID ɗin walat mai karɓa",
      enter_valid_amount: "Da fatan za a shigar da adadi mai inganci",
      transaction_details: "Cikakkun bayanan ma'amala",
      transaction_id: "ID ɗin ma'amala",
      reference: "Tunani",
      purpose: "Manufa",
      view_details: "Duba cikakkun bayanai",
      close: "Rufe",
      language: "Harshe",
      english: "Turanci",
      yoruba: "Yarbanci",
      hausa: "Hausa",
      igbo: "Igbo",
      french: "Faransanci",
      arabic: "Larabci",
      did_label: "ID na Decentralized (DID)",
      pin_label: "PIN",
      login_with_pin: "Shiga tare da PIN",
      generate_did: "Ƙirƙiri DID",
      did_generated: "An ƙirƙiri DID ɗin ku: {{did}}",
      pin_required: "Ana buƙatar PIN",
      pin_must_be_4_digits: "PIN dole ne ya zama lambobi 4",
      invalid_pin: "PIN mara inganci",
      invalid_did: "DID mara inganci",
      fund_wallet: "Kuɗaɗe Wallet",
      select_bank: "Zaɓi banki",
      fund_amount: "Adadin kuɗin da za a ba da kuɗi",
      fund_now: "Kuɗaɗe yanzu",
      funding_success: "An cika walat cikin nasara",
      scan_face: "Duba fuskar ku",
      scan_fingerprint: "Duba sawun yatsa",
      speak_now: "Yi magana yanzu don ganin murya",
      biometric_success: "An tabbatar da bayanan biometric cikin nasara",
      biometric_failed: "Tabbatar da bayanan biometric ya gaza",
      not_enrolled: "Ba a yi rajista ba",
      enroll_now: "Yi rijista yanzu",
      optional: "Na zaɓi",
      add_bank: "Ƙara Asusun Banki",
      bank_name: "Sunan banki",
      account_number: "Lambar asusu",
      account_name: "Sunan asusu",
      add_now: "Ƙara yanzu",
      bank_added: "An ƙara asusun banki cikin nasara",
      verify_bank: "Tabbatar da banki",
      verifying: "Ana tabbatarwa...",
      bank_verified: "An tabbatar da asusun banki",
      consent_tab: "Izini",
      lifecycle_tab: "Zaman rayuwa",
      grant_consent: "Ba da izini",
      revoke_consent: "Soke izini",
      active_consents: "Izini masu aiki",
      no_active_consents: "Babu izini masu aiki",
      identity_status: "Matsayin ainihi",
      issue_at_birth: "Bayarwa a lokacin haihuwa",
      revoke_at_death: "Soke a mutuwa",
      linked_services: "Ayyukan da aka haɗa",
      ussd_access: "Samun damar USSD",
      sms_access: "Samun damar SMS",
      dial_code: "Lambar buga",
      send_to: "Aika zuwa",
      view_commands: "Duba umarni",
      simulate_ussd: "Kwaikwayi USSD",
      simulate_sms: "Kwaikwayi SMS",
      identity_status_active: "Mai aiki",
      identity_status_suspended: "An dakatar",
      identity_status_revoked: "An soke",
      next_verification: "Tabbatarwa na gaba",
      credit_score: "Makin bashi",
      credit_rating: "Kimar bashi",
      excellent: "Mai kyau sosai",
      good: "Mai kyau",
      fair: "Matsakaici",
      poor: "Mara kyau",
      credit_history: "Tarihin bashi",
      loan_eligibility: "Cancantar rance",
      eligible: "Canjawa",
      not_eligible: "Ba cancanta ba",
      credit_factors: "Abubuwan bashi",
      payment_history: "Tarihin biyan kuɗi",
      credit_utilization: "Amfani da bashi",
      credit_length: "Tsawon lokacin bashi",
      credit_mix: "Gaurayawan bashi",
      new_credit: "Sabon bashi",
      improve_score: "Inganta maki",
      credit_report: "Rahoton bashi",
      download_report: "Zazzage rahoto",
      share_with_lender: "Raba tare mai ba da rance",
      api_access: "Samun damar API",
      generate_api_key: "Ƙirƙiri maɓallin API",
      api_documentation: "Takaddun API",
      bill_payment: "Biyan kuɗaɗen aiki",
      electricity: "Wutar lantarki",
      water: "Ruwa",
      internet: "Intanet",
      cable_tv: "Talabijin na kebul",
      phone_bill: "Kuɗin waya",
      select_biller: "Zaɓi mai biyan kuɗi",
      customer_id: "ID ɗin abokin ciniki",
      pay_now: "Biya yanzu",
      payment_successful: "Biyan ya yi nasara",
      airtime_topup: "Ƙara waya",
      data_bundle: "Kunshin data",
      select_network: "Zaɓi hanyar sadarwa",
      phone_number: "Lambar waya",
      select_amount: "Zaɓi adadin",
      buy_now: "Saya yanzu",
      topup_successful: "Ƙarar ta yi nasara",
      loan_application: "Neman rance",
      personal_loan: "Rancen sirri",
      business_loan: "Rancen kasuwanci",
      emergency_loan: "Rancen gaggawa",
      loan_amount: "Adadin rance",
      loan_purpose: "Manufar rance",
      monthly_income: "Kuɗin shiga na wata-wata",
      apply_loan: "Nemi rance",
      loan_applied: "An gabatar da neman rance",
      repay_loan: "Biya rance",
      loan_balance: "Ma'aunin rance",
      next_payment: "Biya na gaba",
      make_payment: "Yi biya",
      payment_made: "An yi biya cikin nasara",
      investment_options: "Zaɓuɓɓukan saka hannun jari",
      treasury_bills: "Kudaden baitulmali",
      mutual_funds: "Kudaden haɗin gwiwa",
      fixed_deposit: "Ajiyar kuɗi mai ƙayyadaddun lokaci",
      stocks: "Hannun jari",
      invest_amount: "Adadin saka hannun jari",
      expected_return: "Da'awar dawowa",
      maturity_date: "Ranar cikewa",
      invest_now: "Saka hannun jari yanzu",
      investment_successful: "Saka hannun jari ya yi nasara",
      withdraw_investment: "Janye saka hannun jari",
      current_value: "Ƙimar yanzu",
      withdraw_amount: "Adadin janyewa",
      withdraw_now: "Janye yanzu",
      withdrawal_successful: "Janyewar ta yi nasara",
      emotional_wellbeing: "Jin daɗin tunani",
      mood_tracker: "Mai bin yanayin tunani",
      stress_level: "Matsanin damuwa",
      happiness_index: "Ma'aunin farin ciki",
      anxiety_level: "Matsanin damuwa",
      record_mood: "Rubuta yanayin tunani",
      mood_recorded: "An rubuta yanayin tunani cikin nasara",
      insurance_policies: "Manufofin inshora",
      health_insurance: "Inshorar lafiya",
      life_insurance: "Inshorar rayuwa",
      auto_insurance: "Inshorar mota",
      property_insurance: "Inshorar dukiya",
      policy_details: "Cikakkun bayanan manufa",
      premium_amount: "Adadin premium",
      coverage_amount: "Adadin ɗaukar nauyi",
      pay_premium: "Biya premium",
      premium_paid: "An biya premium cikin nasara",
      file_claim: "Shigar da da'awar",
      claim_amount: "Adadin da'awar",
      claim_reason: "Dalilin da'awar",
      submit_claim: "Gabatar da da'awar",
      claim_submitted: "An gabatar da da'awar cikin nasara",
      remittance_services: "Ayyukan aika kuɗi",
      send_money_abroad: "Aika",
      receive_money: "Karɓa",
      exchange_rate: "Farashin musaya",
      recipient_country: "Ƙasar mai karɓa",
      recipient_details: "Cikakkun bayanan mai karɓa",
      transfer_fee: "Kuɗin canja wuri",
      send_remittance: "Aika kuɗi",
      remittance_sent: "An aika kuɗin cikin nasara",
      birth_certificate: "Takardar shaidar haihuwa",
      death_certificate: "Takardar shaidar mutuwa",
      marriage_certificate: "Takardar shaidar aure",
      divorce_certificate: "Takardar shaidar saki",
      request_certificate: "Nemi takardar shaida",
      certificate_requested: "An nemi takardar shaida cikin nasara",
      biometric_scan_face: "Ana duba fuska...",
      biometric_scan_finger: "Ana duba sawun yatsa...",
      biometric_scan_voice: "Ana rikodin murya...",
      scan_complete: "An kammala duba",
      enrollment_successful: "An yi rajista cikin nasara",
      disaster_alerts: "Faɗakarwar bala'i",
      emergency_contacts: "Lambobin gaggawa",
      nearest_hospitals: "Asibitoci mafi kusa",
      shelter_locations: "Wuraren matsuguni",
      disaster_preparedness: "Shirye-shiryen bala'i",
      flood_warning: "Faɗakarwar ambaliya",
      earthquake_alert: "Faɗakarwar girgizar ƙasa",
      extreme_weather: "Yanayi mai tsanani",
      high_priority: "Babban fifiko",
      medium_priority: "Matsakaicin fifiko",
      low_priority: "Ƙaramin fifiko",
      active_alerts: "Mai aiki",
      all_clear: "Duk a sarari",
      test_alert: "Gwajin faɗakarwa",
      mark_resolved: "Yiwa alama an warware",
      share_alert: "Raba faɗakarwa",
      alert_preferences: "Zaɓin faɗakarwa",
      receive_alerts: "Karɓi faɗakarwa",
      alert_types: "Nau'ikan faɗakarwa",
      notification_methods: "Hanyoyin sanarwa",
      push_notification: "Sanarwar turawa",
      voice_call: "Kiran murya",
  },
      };

      // Function to get URL parameter
      const getUrlParameter = (name) => {
        name = name.replace(/[[]/, '\\[').replace(/[\]]/, '\\]');
        const regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
        const results = regex.exec(window.location.search);
        return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
      };

      // AI Credit Scoring System
      const CreditScoringSystem = {
        calculateCreditScore: (user) => {
          let score = 300;
          const paymentHistory = user.transactions.filter(t => t.type === 'debit').length;
          const onTimePayments = user.transactions.filter(t => t.status === 'completed').length;
          const paymentScore = paymentHistory > 0 ? (onTimePayments / paymentHistory) * 350 : 0;
          score += paymentScore;
          
          const utilizationRatio = user.balance > 0 ? Math.min(user.balance / 100000, 1) : 0;
          score += utilizationRatio * 300;
          
          const accountAge = user.createdAt ? 
            (Date.now() - new Date(user.createdAt).getTime()) / (1000 * 60 * 60 * 24 * 365) : 0;
          score += Math.min(accountAge * 50, 150);
          
          const hasLoans = user.loans && user.loans.length > 0;
          const hasInvestments = user.investments && user.investments.length > 0;
          const hasBnpl = user.bnplPlans && user.bnplPlans.length > 0;
          const creditMixScore = (hasLoans ? 33 : 0) + (hasInvestments ? 33 : 0) + (hasBnpl ? 34 : 0);
          score += creditMixScore;
          
          const recentCredit = user.loans ? 
            user.loans.filter(l => new Date(l.dueDate) > Date.now()).length : 0;
          score += Math.max(100 - (recentCredit * 20), 0);
          
          return Math.min(Math.max(Math.round(score), 300), 850);
        },
        
        getCreditRating: (score) => {
          if (score >= 800) return 'excellent';
          if (score >= 740) return 'good';
          if (score >= 670) return 'fair';
          return 'poor';
        },
        
        getLoanEligibility: (score, user) => {
          const minScore = 600;
          const hasStableIncome = user.transactions.filter(t => 
            t.type === 'credit' && t.amount > 10000
          ).length >= 3;
          
          return {
            eligible: score >= minScore && hasStableIncome,
            maxAmount: score >= 750 ? 5000000 : score >= 650 ? 2000000 : 500000,
            interestRate: score >= 750 ? 12 : score >= 650 ? 15 : 18
          };
        },
        
        getCreditFactors: (user) => {
          const transactions = user.transactions || [];
          const completedPayments = transactions.filter(t => t.status === 'completed').length;
          const totalTransactions = transactions.length;
          
          return {
            paymentHistory: totalTransactions > 0 ? (completedPayments / totalTransactions) * 100 : 0,
            creditUtilization: user.balance > 0 ? Math.min((user.balance / 100000) * 100, 100) : 0,
            creditLength: user.createdAt ? 
              Math.min((Date.now() - new Date(user.createdAt).getTime()) / (1000 * 60 * 60 * 24 * 30), 60) : 0,
            creditMix: ((user.loans?.length > 0 ? 1 : 0) + 
                      (user.investments?.length > 0 ? 1 : 0) + 
                      (user.bnplPlans?.length > 0 ? 1 : 0)) * 33.33,
            newCredit: user.loans ? Math.max(100 - (user.loans.length * 10), 0) : 100
          };
        },
        
        generateAPIKey: (userId) => {
          return `onpin_${userId}_${Math.random().toString(36).substr(2, 16)}`;
        },
        
        generateCreditReport: (user) => {
          const score = CreditScoringSystem.calculateCreditScore(user);
          const rating = CreditScoringSystem.getCreditRating(score);
          const eligibility = CreditScoringSystem.getLoanEligibility(score, user);
          const factors = CreditScoringSystem.getCreditFactors(user);
          
          return {
            userId: user.did,
            score: score,
            rating: rating,
            eligibility: eligibility,
            factors: factors,
            reportDate: new Date().toISOString(),
            transactions: user.transactions || [],
            loans: user.loans || [],
            investments: user.investments || []
          };
        }
      };

      // Main App Component for Dashboard
      function DashboardApp() {
        const [user, setUser] = React.useState(null);
        const [voiceCommandActive, setVoiceCommandActive] = React.useState(false);
        const [language, setLanguage] = React.useState('en');
        const [activeTab, setActiveTab] = React.useState('overview');
        const [creditScore, setCreditScore] = React.useState(null);
        const [creditReport, setCreditReport] = React.useState(null);
        const [apiKey, setApiKey] = React.useState(null);

        const [insuranceView, setInsuranceView] = React.useState('products');
        const [productCategory, setProductCategory] = React.useState('health');
        const [microCategory, setMicroCategory] = React.useState('insurance');
        const [currentClaimPolicy, setCurrentClaimPolicy] = React.useState(null);
        const [claimAmount, setClaimAmount] = React.useState('');
        const [claimDescription, setClaimDescription] = React.useState('');


        
        // Modal states
        const [transferModalOpen, setTransferModalOpen] = React.useState(false);
        const [fundWalletModal, setFundWalletModal] = React.useState(false);
        const [addBankModal, setAddBankModal] = React.useState(false);
        const [billPaymentModal, setBillPaymentModal] = React.useState(false);
        const [airtimeModal, setAirtimeModal] = React.useState(false);
        const [loanModal, setLoanModal] = React.useState(false);
        const [investmentModal, setInvestmentModal] = React.useState(false);
        const [insuranceModal, setInsuranceModal] = React.useState(false);
        const [remittanceModal, setRemittanceModal] = React.useState(false);
        const [biometricModal, setBiometricModal] = React.useState(false);
        const [consentModal, setConsentModal] = React.useState(false);
        const [certificateModal, setCertificateModal] = React.useState(false);
        const [ussdModalOpen, setUssdModalOpen] = React.useState(false);
        const [smsModalOpen, setSmsModalOpen] = React.useState(false);
        const [transactionDetail, setTransactionDetail] = React.useState(null);

        const [welfareModal, setWelfareModal] = React.useState(false);
        const [welfareDetails, setWelfareDetails] = React.useState({
          program: '',
          amount: ''
        });

        const welfarePrograms = [
          { id: 'poverty_alleviation', name: 'Poverty Alleviation Fund', amount: 50000 },
          { id: 'education_grant', name: 'Education Support Grant', amount: 75000 },
          { id: 'healthcare_support', name: 'Healthcare Support', amount: 30000 },
          { id: 'agricultural_subsidy', name: 'Agricultural Subsidy', amount: 100000 },
          { id: 'disaster_relief', name: 'Disaster Relief Fund', amount: 50000 }
        ];
        
        // Add these two lines for receive remittance functionality
        const [receiveRemittanceModal, setReceiveRemittanceModal] = React.useState(false);
        const [receiveRemittanceDetails, setReceiveRemittanceDetails] = React.useState({
          country: '',
          sender: '',
          amount: '',
          currency: 'USD',
          purpose: ''
        });

        // Form states
        const [transferDetails, setTransferDetails] = React.useState({
          recipient: '', amount: '', purpose: ''
        });
        const [billPayment, setBillPayment] = React.useState({
          biller: '', customerId: '', amount: ''
        });
        const [airtimeDetails, setAirtimeDetails] = React.useState({
          network: '', phone: '', amount: ''
        });
        const [loanApplication, setLoanApplication] = React.useState({
          type: '', amount: '', purpose: '', income: ''
        });
        const [investmentDetails, setInvestmentDetails] = React.useState({
          type: '', amount: '', duration: ''
        });
        const [insuranceDetails, setInsuranceDetails] = React.useState({
          type: '', coverage: '', premium: ''
        });
        const [remittanceDetails, setRemittanceDetails] = React.useState({
          country: '', recipient: '', amount: '', purpose: ''
        });
        const [emotionalData, setEmotionalData] = React.useState({
          mood: 50, stress: 30, happiness: 70, anxiety: 20
        });
        
        // Biometric states
        const [biometricScanning, setBiometricScanning] = React.useState(null);
        const [biometricEnrolled, setBiometricEnrolled] = React.useState({
          face: false, fingerprint: false, voice: false
        });

        // In your React state initialization (inside the DashboardApp component), add these:
        
        // Get insurance products by category
        const getProductsByCategory = () => {
          if (productCategory === 'health') return [
            { id: 'health-1', name: 'Basic Health Plan', description: 'Essential coverage', premium: '₦1,500/month', coverage: '₦500,000', term: '1 year' },
            { id: 'health-2', name: 'Family Health Plan', description: 'For your whole family', premium: '₦4,500/month', coverage: '₦1,500,000', term: '1 year' }
          ];
          if (productCategory === 'life') return [
            { id: 'life-1', name: 'Term Life Insurance', description: 'Financial protection', premium: '₦2,000/month', coverage: '₦5,000,000', term: '10 years' }
          ];
          if (productCategory === 'property') return [
            { id: 'property-1', name: 'Home Insurance', description: 'Protect your home', premium: '₦3,500/month', coverage: '₦10,000,000', term: '1 year' }
          ];
          return [];
        };

        // Get micro products by category
        const getMicroProductsByCategory = () => {
          if (microCategory === 'insurance') return [
            { id: 'micro-ins-1', name: 'Daily Health', description: 'Pay-per-day coverage', payment: '₦50/day', coverage: '₦10,000 per incident', flexibility: 'Cancel anytime' }
          ];
          if (microCategory === 'pensions') return [
            { id: 'micro-pen-1', name: 'Daily Pension', description: 'Save for retirement', payment: '₦200/day', coverage: 'Flexible withdrawals', flexibility: 'Adjust anytime' }
          ];
          if (microCategory === 'investment') return [
            { id: 'micro-inv-1', name: 'Micro-Investment', description: 'Grow your money', payment: '₦500/week', coverage: 'Market returns', flexibility: 'Redeem anytime' }
          ];
          return [];
        };

        // Handle product purchase
        const handlePurchase = (product) => {
          const newPolicy = {
            id: `pol-${Date.now()}`,
            type: productCategory,
            provider: 'InsureNG',
            status: 'active',
            premium: parseInt(product.premium.replace(/[^0-9]/g, '')),
            coverage: parseInt(product.coverage.replace(/[^0-9]/g, '')),
            nextPayment: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toLocaleDateString()
          };
          setUser(prev => ({
            ...prev,
            insurancePolicies: [...prev.insurancePolicies, newPolicy],
            walletBalance: prev.walletBalance - newPolicy.premium
          }));
        };

        // Handle micro product purchase
        const handleMicroPurchase = (product) => {
          const newProduct = {
            id: `micro-${Date.now()}`,
            type: `micro-${microCategory}`,
            provider: 'MicroInsureNG',
            status: 'active',
            paymentAmount: parseInt(product.payment.replace(/[^0-9]/g, '')),
            paymentFrequency: product.payment.includes('/day') ? 'day' : 'month',
            currentValue: 0,
            nextPayment: 'Flexible'
          };
          setUser(prev => ({
            ...prev,
            microProducts: [...prev.microProducts, newProduct],
            walletBalance: prev.walletBalance - newProduct.paymentAmount
          }));
        };

        // Handle premium payment
        const handlePremiumPayment = (policy) => {
          setUser(prev => ({
            ...prev,
            walletBalance: prev.walletBalance - policy.premium,
            insurancePolicies: prev.insurancePolicies.map(p => 
              p.id === policy.id ? {
                ...p,
                nextPayment: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toLocaleDateString()
              } : p
            )
          }));
        };

        // Handle file upload for claims
        const handleFileUpload = (e) => {
          console.log('Files selected:', e.target.files);
        };

        // Submit a claim
        const submitClaim = () => {
          if (!currentClaimPolicy || !claimAmount || !claimDescription) return;
          
          const newClaim = {
            id: `clm-${Date.now()}`,
            policyId: currentClaimPolicy.id,
            policyType: currentClaimPolicy.type,
            amount: parseInt(claimAmount),
            date: new Date().toLocaleDateString(),
            description: claimDescription,
            status: 'pending'
          };
          
          setUser(prev => ({
            ...prev,
            insuranceClaims: [...prev.insuranceClaims, newClaim]
          }));
          
          setCurrentClaimPolicy(null);
          setClaimAmount('');
          setClaimDescription('');
        };

        

        // Add to your existing state variables
        const [disasterAlerts, setDisasterAlerts] = React.useState([
          {
            id: 'alert-1',
            type: 'flood',
            title: 'Flood Warning',
            severity: 'high',
            issued: new Date().toISOString(),
            areas: ['Lagos Island', 'Victoria Island', 'Lekki'],
            description: 'Heavy rainfall expected to cause flooding in low-lying areas',
            instructions: 'Evacuate to higher ground if in flood-prone areas. Avoid walking or driving through flood waters.',
            active: true
          },
          {
            id: 'alert-2',
            type: 'earthquake',
            title: 'Earthquake Alert',
            severity: 'medium',
            issued: new Date(Date.now() - 3600000).toISOString(), // 1 hour ago
            areas: ['Central Lagos', 'Mainland'],
            description: 'Minor earthquake detected in your region',
            instructions: 'Stay indoors. Take cover under sturdy furniture. Stay away from windows.',
            active: true
          }
        ]);

        const [alertPreferences, setAlertPreferences] = React.useState({
          receiveAlerts: true,
          alertTypes: {
            flood: true,
            earthquake: true,
            extremeWeather: true,
            fire: true
          },
          notificationMethods: {
            push: true,
            sms: true,
            email: false,
            voice: true
          }
        });

        const [audio] = React.useState(() => {
          // Create audio element programmatically
          const audio = new Audio();
          audio.src = "https://assets.mixkit.co/active_storage/sfx/905/905-preview.mp3";
          audio.preload = "auto";
          return audio;
        });
            
        // USSD/SMS states
        const [ussdCode, setUssdCode] = React.useState('');
        const [ussdResponse, setUssdResponse] = React.useState('');
        
        // Sample data
        const banks = [
          { name: "Access Bank", code: "044" },
          { name: "Zenith Bank", code: "057" },
          { name: "GTBank", code: "058" },
          { name: "First Bank", code: "011" },
          { name: "UBA", code: "033" }
        ];
        
        const billers = [
          { name: "AEDC (Electricity)", type: "electricity" },
          { name: "Lagos Water Corporation", type: "water" },
          { name: "DSTV", type: "cable_tv" },
          { name: "MTN", type: "phone_bill" },
          { name: "Airtel", type: "phone_bill" }
        ];
        
        const networks = ["MTN", "Airtel", "Glo", "9mobile"];
        
        const countries = [
          { name: "United States", code: "USD", rate: 1650 },
          { name: "United Kingdom", code: "GBP", rate: 2100 },
          { name: "Canada", code: "CAD", rate: 1200 },
          { name: "Ghana", code: "GHS", rate: 140 },
          { name: "South Africa", code: "ZAR", rate: 85 }
        ];

        React.useEffect(() => {
          const did = getUrlParameter('did');
          if (!did) {
            window.location.href = 'index.html';
            return;
          }

          const userDatabase = JSON.parse(localStorage.getItem('onpinUsers')) || {};
          let user = userDatabase[did];

          if (!user) {
            window.location.href = 'index.html';
            return;
          }

  // Initialize user with default data if missing
  user = {
    ...user, // Spread existing user data first
    // Then set defaults only for missing properties
    identityStatus: user.identityStatus || 'active',
    identityIssueDate: user.identityIssueDate || "2023-01-15",
    lastVerified: user.lastVerified || "2023-06-20",
    nextVerification: user.nextVerification || "2024-01-15",
    activeConsents: user.activeConsents || [
      {
        id: 'consent-1',
        organization: 'NIMC',
        date: '2023-05-10',
        expiry: '2024-05-10',
        scope: 'Basic identity verification'
      }
    ],
    loans: user.loans || [
      {
        id: 'loan_1',
        type: 'personal',
        amount: 500000,
        interestRate: 15,
        dueDate: '2023-12-31',
        status: 'active',
        balance: 450000,
        paidAmount: 50000,
        totalAmount: 575000
      }
    ],
    investments: user.investments || [
      {
        id: 'inv_1',
        type: 'treasury',
        amount: 200000,
        returnRate: 13.5,
        maturityDate: '2024-01-15',
        status: 'active',
        currentValue: 227000
      }
    ],
    insurancePolicies: user.insurancePolicies || [
      {
        id: 'ins_1',
        type: 'health',
        provider: 'AIICO Insurance',
        premium: 50000,
        coverage: 2000000,
        status: 'active',
        nextPayment: '2024-02-15'
      }
    ],
    insuranceClaims: user.insuranceClaims || [],
    microProducts: user.microProducts || [],
    emotionalHistory: user.emotionalHistory || [
      { date: '2023-07-01', mood: 75, stress: 25, happiness: 80, anxiety: 15 },
      { date: '2023-07-02', mood: 60, stress: 40, happiness: 65, anxiety: 30 }
    ],
    connectedBanks: user.connectedBanks || [
      {
        id: 'bank_1',
        name: 'Access Bank',
        accountNumber: '0123456789',
        accountName: user.name || 'User Name',
        verified: true
      }
    ],
    biometricData: user.biometricData || {
      face: { enrolled: false },
      fingerprint: { enrolled: false },
      voice: { enrolled: false }
    },
    createdAt: user.createdAt || new Date().toISOString()
  };

  const score = CreditScoringSystem.calculateCreditScore(user);
  setCreditScore(score);
  setUser(user);
}, []);

        const t = (key, params) => {
          let text = translations[language][key] || translations.en[key] || key;
          if (params) {
            Object.keys(params).forEach(param => {
              text = text.replace(`{{${param}}}`, params[param]);
            });
          }
          return text;
        };

        const updateUser = (updates) => {
          setUser(prev => {
            const updatedUser = { ...prev, ...updates };
            const userDatabase = JSON.parse(localStorage.getItem('onpinUsers')) || {};
            userDatabase[prev.did] = updatedUser;
            localStorage.setItem('onpinUsers', JSON.stringify(userDatabase));
            return updatedUser;
          });
        };

        const addTransaction = (transaction) => {
          const newTransaction = {
            id: `txn_${Date.now()}`,
            date: new Date().toISOString().split('T')[0],
            status: "completed",
            ...transaction
          };
          
          updateUser({
            transactions: [newTransaction, ...user.transactions],
            balance: user.balance + (transaction.type === 'credit' ? transaction.amount : -transaction.amount)
          });
        };

        // Handler functions
        const handleTransfer = () => {
          if (!transferDetails.recipient || !transferDetails.amount) {
            alert(t('enter_recipient'));
            return;
          }
          
          const amount = parseFloat(transferDetails.amount);
          if (isNaN(amount) || amount <= 0) {
            alert(t('enter_valid_amount'));
            return;
          }
          
          if (amount > user.balance) {
            alert(t('insufficient_funds'));
            return;
          }
          
          addTransaction({
            type: "debit",
            amount: amount,
            description: transferDetails.purpose || "Transfer",
            recipient: transferDetails.recipient
          });
          
          setTransferModalOpen(false);
          setTransferDetails({ recipient: '', amount: '', purpose: '' });
          alert(t('transfer_success'));
        };

        const handleBillPayment = () => {
          if (!billPayment.biller || !billPayment.customerId || !billPayment.amount) {
            alert('Please fill all fields');
            return;
          }
          
          const amount = parseFloat(billPayment.amount);
          if (amount > user.balance) {
            alert(t('insufficient_funds'));
            return;
          }
          
          addTransaction({
            type: "debit",
            amount: amount,
            description: `Bill Payment - ${billPayment.biller}`,
            recipient: billPayment.biller
          });
          
          setBillPaymentModal(false);
          setBillPayment({ biller: '', customerId: '', amount: '' });
          alert(t('payment_successful'));
        };

        const handleAirtimeTopup = () => {
          if (!airtimeDetails.network || !airtimeDetails.phone || !airtimeDetails.amount) {
            alert('Please fill all fields');
            return;
          }
          
          const amount = parseFloat(airtimeDetails.amount);
          if (amount > user.balance) {
            alert(t('insufficient_funds'));
            return;
          }
          
          addTransaction({
            type: "debit",
            amount: amount,
            description: `Airtime - ${airtimeDetails.network}`,
            recipient: airtimeDetails.phone
          });
          
          setAirtimeModal(false);
          setAirtimeDetails({ network: '', phone: '', amount: '' });
          alert(t('topup_successful'));
        };

        const handleLoanApplication = () => {
          if (!loanApplication.type || !loanApplication.amount || !loanApplication.purpose) {
            alert('Please fill all required fields');
            return;
          }
          
          const newLoan = {
            id: `loan_${Date.now()}`,
            type: loanApplication.type,
            amount: parseFloat(loanApplication.amount),
            purpose: loanApplication.purpose,
            monthlyIncome: parseFloat(loanApplication.income),
            status: 'pending',
            applicationDate: new Date().toISOString().split('T')[0],
            interestRate: 15
          };
          
          updateUser({
            loans: [...user.loans, newLoan]
          });
          
          setLoanModal(false);
          setLoanApplication({ type: '', amount: '', purpose: '', income: '' });
          alert(t('loan_applied'));
        };

        const handleInvestment = () => {
          if (!investmentDetails.type || !investmentDetails.amount) {
            alert('Please fill all fields');
            return;
          }
          
          const amount = parseFloat(investmentDetails.amount);
          if (amount > user.balance) {
            alert(t('insufficient_funds'));
            return;
          }
          
          const newInvestment = {
            id: `inv_${Date.now()}`,
            type: investmentDetails.type,
            amount: amount,
            duration: investmentDetails.duration,
            returnRate: investmentDetails.type === 'treasury' ? 13.5 : 
                      investmentDetails.type === 'mutual_funds' ? 18.2 : 12.0,
            startDate: new Date().toISOString().split('T')[0],
            status: 'active',
            currentValue: amount
          };
          
          updateUser({
            investments: [...user.investments, newInvestment],
            balance: user.balance - amount
          });
          
          addTransaction({
            type: "debit",
            amount: amount,
            description: `Investment - ${investmentDetails.type}`,
            recipient: "Investment Account"
          });
          
          setInvestmentModal(false);
          setInvestmentDetails({ type: '', amount: '', duration: '' });
          alert(t('investment_successful'));
        };

        const handleBiometricScan = (type) => {
          setBiometricScanning(type);
          
          setTimeout(() => {
            setBiometricScanning(null);
            setBiometricEnrolled(prev => ({ ...prev, [type]: true }));
            
            updateUser({
              biometricData: {
                ...user.biometricData,
                [type]: {
                  enrolled: true,
                  enrollmentDate: new Date().toISOString(),
                  lastUsed: new Date().toISOString()
                }
              }
            });
            
            alert(t('enrollment_successful'));
          }, 3000);
        };

        // USSD state management
        const [ussdSession, setUssdSession] = React.useState({
          active: false,
          currentMenu: 'main',
          history: [],
          input: ''
        });

        const handleUSSDCommand = () => {
          if (!ussdCode && !ussdSession.active) return;
          
          let response = '';
          let nextMenu = null;
          let sessionActive = true;
          
          // Initial USSD codes
          if (!ussdSession.active) {
            if (ussdCode === '*389#') {
              response = `Welcome to ONPIN Wallet\n\n1. Check Balance\n2. Transfer Money\n3. Pay Bills\n4. Buy Airtime\n5. Loan Services\n6. Investment\n\nReply with option number:`;
              nextMenu = 'main';
              setUssdSession({ active: true, currentMenu: 'main', history: [], input: '' });
            } else if (ussdCode === '*389*1#') {
              response = `Your ONPIN Wallet Balance:\n₦${user.balance.toLocaleString()}\n\nThank you for using ONPIN!`;
              sessionActive = false;
            } else if (ussdCode === '*389*2#') {
              response = `Transfer Money\n\nEnter recipient wallet ID:`;
              nextMenu = 'transfer_recipient';
              setUssdSession({ active: true, currentMenu: 'transfer_recipient', history: [], input: '' });
            } else {
              response = 'Invalid USSD code. Try *389# for main menu.';
              sessionActive = false;
            }
          } else {
            // Handle menu navigation
            const input = ussdCode;
            
            switch (ussdSession.currentMenu) {
              case 'main':
                switch (input) {
                  case '1':
                    response = `Your ONPIN Wallet Balance:\n₦${user.balance.toLocaleString()}\n\nThank you for using ONPIN!`;
                    sessionActive = false;
                    break;
                  case '2':
                    response = `Transfer Money\n\nEnter recipient wallet ID:`;
                    nextMenu = 'transfer_recipient';
                    break;
                  case '3':
                    response = `Pay Bills\n\n1. Electricity\n2. Water\n3. Cable TV\n4. Phone Bill\n\nReply with option number:`;
                    nextMenu = 'bills_menu';
                    break;
                  case '4':
                    response = `Buy Airtime\n\n1. MTN\n2. Airtel\n3. Glo\n4. 9mobile\n\nReply with option number:`;
                    nextMenu = 'airtime_network';
                    break;
                  case '5':
                    response = `Loan Services\n\n1. Apply for Loan\n2. Check Loan Status\n3. Repay Loan\n\nReply with option number:`;
                    nextMenu = 'loan_menu';
                    break;
                  case '6':
                    response = `Investment Options\n\n1. Treasury Bills\n2. Mutual Funds\n3. Fixed Deposit\n4. Check Portfolio\n\nReply with option number:`;
                    nextMenu = 'investment_menu';
                    break;
                  default:
                    response = `Invalid option. Please select 1-6:`;
                    nextMenu = 'main';
                }
                break;
                
              case 'transfer_recipient':
                if (input.length >= 10) {
                  response = `Transfer to: ${input}\n\nEnter amount (₦):`;
                  nextMenu = 'transfer_amount';
                  setUssdSession(prev => ({ ...prev, history: [...prev.history, { recipient: input }] }));
                } else {
                  response = `Invalid wallet ID. Enter valid recipient ID:`;
                  nextMenu = 'transfer_recipient';
                }
                break;
                
              case 'transfer_amount':
                const amount = parseFloat(input);
                if (isNaN(amount) || amount <= 0) {
                  response = `Invalid amount. Enter amount (₦):`;
                  nextMenu = 'transfer_amount';
                } else if (amount > user.balance) {
                  response = `Insufficient funds. Your balance: ₦${user.balance.toLocaleString()}\n\nEnter amount (₦):`;
                  nextMenu = 'transfer_amount';
                } else {
                  const recipient = ussdSession.history[0]?.recipient || 'Unknown';
                  response = `Confirm Transfer:\nTo: ${recipient}\nAmount: ₦${amount.toLocaleString()}\n\n1. Confirm\n2. Cancel\n\nReply with option:`;
                  nextMenu = 'transfer_confirm';
                  setUssdSession(prev => ({ ...prev, history: [...prev.history, { amount }] }));
                }
                break;
                
              case 'transfer_confirm':
                if (input === '1') {
                  const transferData = ussdSession.history.reduce((acc, item) => ({ ...acc, ...item }), {});
                  
                  // Process transfer
                  const newTransaction = {
                    id: `txn_${Date.now()}`,
                    type: "debit",
                    amount: transferData.amount,
                    date: new Date().toISOString().split('T')[0],
                    description: "USSD Transfer",
                    status: "completed",
                    recipient: transferData.recipient
                  };
                  
                  setUser(prev => {
                    const updatedUser = {
                      ...prev,
                      balance: prev.balance - transferData.amount,
                      transactions: [newTransaction, ...prev.transactions]
                    };
                    
                    const userDatabase = JSON.parse(localStorage.getItem('onpinUsers')) || {};
                    userDatabase[prev.did] = updatedUser;
                    localStorage.setItem('onpinUsers', JSON.stringify(userDatabase));
                    
                    return updatedUser;
                  });
                  
                  response = `Transfer Successful!\n\nAmount: ₦${transferData.amount.toLocaleString()}\nTo: ${transferData.recipient}\nNew Balance: ₦${(user.balance - transferData.amount).toLocaleString()}\n\nThank you!`;
                  sessionActive = false;
                } else if (input === '2') {
                  response = `Transfer cancelled.\n\nThank you for using ONPIN!`;
                  sessionActive = false;
                } else {
                  response = `Invalid option.\n\n1. Confirm\n2. Cancel\n\nReply with option:`;
                  nextMenu = 'transfer_confirm';
                }
                break;
                
              case 'bills_menu':
                const billers = ['AEDC (Electricity)', 'Lagos Water Corp', 'DSTV', 'MTN'];
                if (input >= '1' && input <= '4') {
                  const selectedBiller = billers[parseInt(input) - 1];
                  response = `${selectedBiller}\n\nEnter customer ID:`;
                  nextMenu = 'bill_customer_id';
                  setUssdSession(prev => ({ ...prev, history: [{ biller: selectedBiller }] }));
                } else {
                  response = `Invalid option. Select 1-4:`;
                  nextMenu = 'bills_menu';
                }
                break;
                
              case 'bill_customer_id':
                if (input.length >= 8) {
                  response = `Customer ID: ${input}\n\nEnter amount (₦):`;
                  nextMenu = 'bill_amount';
                  setUssdSession(prev => ({ ...prev, history: [...prev.history, { customerId: input }] }));
                } else {
                  response = `Invalid customer ID. Enter valid ID:`;
                  nextMenu = 'bill_customer_id';
                }
                break;
                
              case 'bill_amount':
                const billAmount = parseFloat(input);
                if (isNaN(billAmount) || billAmount <= 0) {
                  response = `Invalid amount. Enter amount (₦):`;
                  nextMenu = 'bill_amount';
                } else if (billAmount > user.balance) {
                  response = `Insufficient funds. Your balance: ₦${user.balance.toLocaleString()}\n\nEnter amount (₦):`;
                  nextMenu = 'bill_amount';
                } else {
                  const billData = ussdSession.history.reduce((acc, item) => ({ ...acc, ...item }), {});
                  
                  // Process bill payment
                  const newTransaction = {
                    id: `txn_${Date.now()}`,
                    type: "debit",
                    amount: billAmount,
                    date: new Date().toISOString().split('T')[0],
                    description: `Bill Payment - ${billData.biller}`,
                    status: "completed",
                    recipient: billData.biller
                  };
                  
                  setUser(prev => {
                    const updatedUser = {
                      ...prev,
                      balance: prev.balance - billAmount,
                      transactions: [newTransaction, ...prev.transactions]
                    };
                    
                    const userDatabase = JSON.parse(localStorage.getItem('onpinUsers')) || {};
                    userDatabase[prev.did] = updatedUser;
                    localStorage.setItem('onpinUsers', JSON.stringify(userDatabase));
                    
                    return updatedUser;
                  });
                  
                  response = `Bill Payment Successful!\n\nBiller: ${billData.biller}\nCustomer ID: ${billData.customerId}\nAmount: ₦${billAmount.toLocaleString()}\nNew Balance: ₦${(user.balance - billAmount).toLocaleString()}\n\nThank you!`;
                  sessionActive = false;
                }
                break;
                
              case 'airtime_network':
                const networks = ['MTN', 'Airtel', 'Glo', '9mobile'];
                if (input >= '1' && input <= '4') {
                  const selectedNetwork = networks[parseInt(input) - 1];
                  response = `${selectedNetwork} Airtime\n\nEnter phone number:`;
                  nextMenu = 'airtime_phone';
                  setUssdSession(prev => ({ ...prev, history: [{ network: selectedNetwork }] }));
                } else {
                  response = `Invalid option. Select 1-4:`;
                  nextMenu = 'airtime_network';
                }
                break;
                
              case 'airtime_phone':
                if (input.length >= 11 && input.match(/^[0-9]+$/)) {
                  response = `Phone: ${input}\n\nSelect amount:\n1. ₦100\n2. ₦200\n3. ₦500\n4. ₦1000\n5. Custom amount\n\nReply with option:`;
                  nextMenu = 'airtime_amount';
                  setUssdSession(prev => ({ ...prev, history: [...prev.history, { phone: input }] }));
                } else {
                  response = `Invalid phone number. Enter valid number:`;
                  nextMenu = 'airtime_phone';
                }
                break;
                
              case 'airtime_amount':
                let airtimeAmount;
                if (input === '1') airtimeAmount = 100;
                else if (input === '2') airtimeAmount = 200;
                else if (input === '3') airtimeAmount = 500;
                else if (input === '4') airtimeAmount = 1000;
                else if (input === '5') {
                  response = `Enter custom amount (₦):`;
                  nextMenu = 'airtime_custom';
                  break;
                } else {
                  response = `Invalid option. Select 1-5:`;
                  nextMenu = 'airtime_amount';
                  break;
                }
                
                if (airtimeAmount > user.balance) {
                  response = `Insufficient funds. Your balance: ₦${user.balance.toLocaleString()}\n\nSelect different amount:`;
                  nextMenu = 'airtime_amount';
                } else {
                  const airtimeData = ussdSession.history.reduce((acc, item) => ({ ...acc, ...item }), {});
                  
                  // Process airtime purchase
                  const newTransaction = {
                    id: `txn_${Date.now()}`,
                    type: "debit",
                    amount: airtimeAmount,
                    date: new Date().toISOString().split('T')[0],
                    description: `Airtime - ${airtimeData.network}`,
                    status: "completed",
                    recipient: airtimeData.phone
                  };
                  
                  setUser(prev => {
                    const updatedUser = {
                      ...prev,
                      balance: prev.balance - airtimeAmount,
                      transactions: [newTransaction, ...prev.transactions]
                    };
                    
                    const userDatabase = JSON.parse(localStorage.getItem('onpinUsers')) || {};
                    userDatabase[prev.did] = updatedUser;
                    localStorage.setItem('onpinUsers', JSON.stringify(userDatabase));
                    
                    return updatedUser;
                  });
                  
                  response = `Airtime Purchase Successful!\n\nNetwork: ${airtimeData.network}\nPhone: ${airtimeData.phone}\nAmount: ₦${airtimeAmount.toLocaleString()}\nNew Balance: ₦${(user.balance - airtimeAmount).toLocaleString()}\n\nThank you!`;
                  sessionActive = false;
                }
                break;
                
              case 'airtime_custom':
                const customAmount = parseFloat(input);
                if (isNaN(customAmount) || customAmount <= 0) {
                  response = `Invalid amount. Enter amount (₦):`;
                  nextMenu = 'airtime_custom';
                } else if (customAmount > user.balance) {
                  response = `Insufficient funds. Your balance: ₦${user.balance.toLocaleString()}\n\nEnter amount (₦):`;
                  nextMenu = 'airtime_custom';
                } else {
                  const airtimeData = ussdSession.history.reduce((acc, item) => ({ ...acc, ...item }), {});
                  
                  // Process custom airtime purchase
                  const newTransaction = {
                    id: `txn_${Date.now()}`,
                    type: "debit",
                    amount: customAmount,
                    date: new Date().toISOString().split('T')[0],
                    description: `Airtime - ${airtimeData.network}`,
                    status: "completed",
                    recipient: airtimeData.phone
                  };
                  
                  setUser(prev => {
                    const updatedUser = {
                      ...prev,
                      balance: prev.balance - customAmount,
                      transactions: [newTransaction, ...prev.transactions]
                    };
                    
                    const userDatabase = JSON.parse(localStorage.getItem('onpinUsers')) || {};
                    userDatabase[prev.did] = updatedUser;
                    localStorage.setItem('onpinUsers', JSON.stringify(userDatabase));
                    
                    return updatedUser;
                  });
                  
                  response = `Airtime Purchase Successful!\n\nNetwork: ${airtimeData.network}\nPhone: ${airtimeData.phone}\nAmount: ₦${customAmount.toLocaleString()}\nNew Balance: ₦${(user.balance - customAmount).toLocaleString()}\n\nThank you!`;
                  sessionActive = false;
                }
                break;
                
              case 'loan_menu':
                switch (input) {
                  case '1':
                    response = `Apply for Loan\n\n1. Personal Loan (15% p.a.)\n2. Business Loan (12% p.a.)\n3. Emergency Loan (18% p.a.)\n\nReply with option:`;
                    nextMenu = 'loan_type';
                    break;
                  case '2':
                    const activeLoans = user.loans?.filter(loan => loan.status === 'active') || [];
                    if (activeLoans.length > 0) {
                      response = `Active Loans:\n\n${activeLoans.map((loan, i) => 
                        `${i+1}. ${loan.type} - ₦${loan.balance?.toLocaleString() || 0} remaining`
                      ).join('\n')}\n\nThank you!`;
                    } else {
                      response = `No active loans found.\n\nThank you!`;
                    }
                    sessionActive = false;
                    break;
                  case '3':
                    response = `Loan Repayment\n\nEnter loan ID or reply 1 for latest loan:`;
                    nextMenu = 'loan_repay';
                    break;
                  default:
                    response = `Invalid option. Select 1-3:`;
                    nextMenu = 'loan_menu';
                }
                break;
                
              case 'investment_menu':
                switch (input) {
                  case '1':
                    response = `Treasury Bills\nMinimum: ₦10,000\nReturn: 13.5% p.a.\n\nEnter investment amount (₦):`;
                    nextMenu = 'invest_treasury';
                    break;
                  case '2':
                    response = `Mutual Funds\nMinimum: ₦5,000\nExpected Return: 18.2% p.a.\n\nEnter investment amount (₦):`;
                    nextMenu = 'invest_mutual';
                    break;
                  case '3':
                    response = `Fixed Deposit\nMinimum: ₦50,000\nReturn: 12.0% p.a.\n\nEnter investment amount (₦):`;
                    nextMenu = 'invest_fixed';
                    break;
                  case '4':
                    const totalInvested = user.investments?.reduce((sum, inv) => sum + inv.amount, 0) || 0;
                    const currentValue = user.investments?.reduce((sum, inv) => sum + inv.currentValue, 0) || 0;
                    response = `Investment Portfolio:\n\nTotal Invested: ₦${totalInvested.toLocaleString()}\nCurrent Value: ₦${currentValue.toLocaleString()}\nReturns: ₦${(currentValue - totalInvested).toLocaleString()}\n\nThank you!`;
                    sessionActive = false;
                    break;
                  default:
                    response = `Invalid option. Select 1-4:`;
                    nextMenu = 'investment_menu';
                }
                break;
                
              default:
                response = 'Session expired. Dial *389# to start again.';
                sessionActive = false;
            }
            
            if (nextMenu) {
              setUssdSession(prev => ({ ...prev, currentMenu: nextMenu }));
            }
          }
          
          if (!sessionActive) {
            setUssdSession({ active: false, currentMenu: 'main', history: [], input: '' });
          }
          
          setUssdResponse(response);
          setUssdCode(''); // Clear input for next command
        };

        if (!user) {
          return <div className="min-h-screen flex items-center justify-center">Loading...</div>;
        }

        const creditRating = CreditScoringSystem.getCreditRating(creditScore);
        const loanEligibility = CreditScoringSystem.getLoanEligibility(creditScore, user);
        const creditFactors = CreditScoringSystem.getCreditFactors(user);

        return (
          <div className="min-h-screen flex flex-col">
            {/* Header */}
            <header className="bg-green-800 text-white p-4 shadow-md">
              <div className="container mx-auto flex justify-between items-center">
                <h1 className="text-2xl font-bold">
                  <img src="logo.png" alt={t('wallet_balance')} />
                </h1>
                <div className="flex items-center space-x-4">
                 {/* Hea
                  <button
                    onClick={() => setVoiceCommandActive(!voiceCommandActive)}
                    className={`p-2 rounded-full ${voiceCommandActive ? 'bg-green-500 voice-command-active' : 'bg-green-700'}`}
                  >
                    <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z" />
                    </svg>
                  </button>
                  der */}
                  <select
                    value={language}
                    onChange={(e) => setLanguage(e.target.value)}
                    className="bg-white text-gray-800 rounded px-3 py-1 pr-8 language-selector appearance-none"
                  >
                    <option value="en">{t('english')}</option>
                    <option value="yo">{t('yoruba')}</option>
                    <option value="fr">{t('french')}</option>
                    <option value="ar">{t('arabic')}</option>
                    <option value="ig">{t('igbo')}</option>
                    <option value="ha">{t('hausa')}</option>
                  </select>
                </div>
              </div>
            </header>

            {/* Main Content */}
            <main className="flex-grow container mx-auto p-4">
              <div className="max-w-6xl mx-auto">
                {/* User Profile Header */}
                <div className="bg-white rounded-lg shadow-md p-6 mb-6">
                  <div className="flex justify-between items-start">
                    <div className="flex items-center">
                      <div className="bg-green-100 rounded-full p-3 mr-4">
                        <svg xmlns="http://www.w3.org/2000/svg" className="h-10 w-10 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                      </div>
                      <div>
                        <h2 className="text-xl font-bold">{t('welcome_message').replace('{{name}}', user.name)}</h2>
                        <p className="text-gray-600">{user.location ? user.location : t('country_default')}</p>
                        <div className="flex flex-wrap gap-2 mt-2">
                          <span className="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded">{t('nin_label')}: {user.nin}</span>
                          <span className="bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded">{t('did_label')}: {user.did}</span>
                          <span className={`text-xs px-2 py-1 rounded ${
                            user.identityStatus === 'active' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'
                          }`}>
                            {t('status')}: {t(`identity_status_${user.identityStatus}`)}
                          </span>
                        </div>
                      </div>
                    </div>
                    <button
                      onClick={() => window.location.href = 'index.html'}
                      className="px-4 py-2 bg-red-100 text-red-600 rounded-md hover:bg-red-200 transition duration-300"
                    >
                      {t('logout_button')}
                    </button>
                  </div>

                  {/* Balance Card */}
                  <div className="mt-6 bg-green-50 rounded-lg p-4">
                    <div className="flex justify-between items-center">
                      <div>
                        <p className="text-gray-600">{t('wallet_balance')}</p>
                        <p className="text-3xl font-bold">₦{user.balance.toLocaleString()}</p>
                      </div>
                      <div className="flex space-x-2">
                        <button
                          onClick={() => setFundWalletModal(true)}
                          className="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition duration-300"
                        >
                          {t('fund_wallet')}
                        </button>
                      </div>
                    </div>
                  </div>
                </div>

                {/* Navigation Tabs */}
                <div className="flex border-b border-gray-200 mb-6 overflow-x-auto">
                  <div className="flex space-x-1 min-w-max">
                    {[
                      { key: 'overview', label: t('overview_tab') },
                      { key: 'credit', label: t('credit_score') },
                      { key: 'payments', label: t('payments_tab') },
                      { key: 'identity', label: t('identity_status') },
                      { key: 'consent', label: t('consent_tab') },
                      { key: 'lifecycle', label: t('lifecycle_tab') },
                      { key: 'loans', label: t('loan_application') },
                      { key: 'remittance', label: t('remittance_services') },
                      { key: 'investments', label: t('investment_options') },
                      { key: 'insurance', label: t('insurance_policies') },
                      { key: 'disaster', label: t('disaster_alerts') }
                    ].map(tab => (
                      <button
                        key={tab.key}
                        onClick={() => setActiveTab(tab.key)}
                        className={`px-3 py-2 text-sm font-medium whitespace-nowrap ${
                          activeTab === tab.key 
                            ? 'text-green-600 border-b-2 border-green-600' 
                            : 'text-gray-500 hover:text-gray-700'
                        }`}
                      >
                        {tab.label}
                      </button>
                    ))}
                  </div>
                </div>

                {/* Tab Content */}
                {activeTab === 'overview' && (
                  <div className="space-y-6">
                    {/* Quick Actions */}
                    <div className="bg-white rounded-lg shadow-md p-6">
                      <h3 className="text-lg font-semibold mb-4">{t('quick_actions')}</h3>
                      <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <button
                          onClick={() => setTransferModalOpen(true)}
                          className="bg-blue-50 p-4 rounded-lg hover:bg-blue-100 transition duration-300"
                        >
                          <div className="flex flex-col items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" className="h-8 w-8 text-blue-600 mb-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10" />
                            </svg>
                            <span className="text-sm">{t('transfer')}</span>
                          </div>
                        </button>

                        <button
                          onClick={() => setBillPaymentModal(true)}
                          className="bg-yellow-50 p-4 rounded-lg hover:bg-yellow-100 transition duration-300"
                        >
                          <div className="flex flex-col items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" className="h-8 w-8 text-yellow-600 mb-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                            </svg>
                            <span className="text-sm">{t('pay_bills')}</span>
                          </div>
                        </button>

                        <button
                          onClick={() => setAirtimeModal(true)}
                          className="bg-green-50 p-4 rounded-lg hover:bg-green-100 transition duration-300"
                        >
                          <div className="flex flex-col items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" className="h-8 w-8 text-green-600 mb-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z" />
                            </svg>
                            <span className="text-sm">{t('airtime_data')}</span>
                          </div>
                        </button>

                        <button
                          onClick={() => setActiveTab('credit')}
                          className="bg-purple-50 p-4 rounded-lg hover:bg-purple-100 transition duration-300"
                        >
                          <div className="flex flex-col items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" className="h-8 w-8 text-purple-600 mb-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                            </svg>
                            <span className="text-sm">{t('credit_score')}</span>
                            <span className="text-xs text-purple-600">{creditScore}</span>
                          </div>
                        </button>
                      </div>
                    </div>

                      {/* Bank Connections */}
                      <div className="p-4 border rounded-lg">
                        <h4 className="font-medium mb-4">{t('bank_connections')}</h4>
                        <div className="space-y-3">
                          {user.connectedBanks?.map(bank => (
                            <div key={bank.id} className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                              <div>
                                <p className="font-medium">{bank.name}</p>
                                <p className="text-sm text-gray-600">{bank.accountNumber} • {bank.accountName}</p>
                              </div>
                              <span className={`text-xs px-2 py-1 rounded ${
                                bank.verified ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'
                              }`}>
                                {bank.verified ? t('verified') : t('pending')}
                              </span>
                            </div>
                          ))}
                          <button
                            onClick={() => setAddBankModal(true)}
                            className="w-full p-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-gray-400 hover:text-gray-800 transition"
                          >
                            + {t('add_bank')}
                          </button>
                        </div>
                      </div>

                    {/* USSD/SMS Access */}
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div className="p-4 border rounded-lg">
                          <h4 className="font-medium mb-2">{t('ussd_access')}</h4>
                          <p className="text-sm text-gray-600 mb-4">{t('ussd_access_description')}</p>
                          <div className="space-y-2">
                            <p className="text-sm"><strong>*389#</strong> - {t('main_menu')}</p>
                            <p className="text-sm"><strong>*389*1#</strong> - {t('check_balance')}</p>
                            <p className="text-sm"><strong>*389*2#</strong> - {t('transfer_money')}</p>
                          </div>
                          <button
                            onClick={() => setUssdModalOpen(true)}
                            className="mt-4 w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition"
                          >
                            {t('simulate_ussd')}
                          </button>
                        </div>

                        <div className="p-4 border rounded-lg">
                          <h4 className="font-medium mb-2">{t('sms_access')}</h4>
                          <p className="text-sm text-gray-600 mb-4">{t('sms_access_description')}</p>
                          <div className="space-y-2">
                            <p className="text-sm"><strong>BAL</strong> to 389 - {t('check_balance')}</p>
                            <p className="text-sm"><strong>SEND amount phone</strong> - {t('transfer_money')}</p>
                            <p className="text-sm"><strong>BILL type amount</strong> - {t('pay_bills')}</p>
                          </div>
                          <button
                            onClick={() => setSmsModalOpen(true)}
                            className="mt-4 w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition"
                          >
                            {t('simulate_sms')}
                          </button>
                        </div>
                      </div>

                    {/* Recent Activity */}
                    <div className="bg-white rounded-lg shadow-md p-6">
                      <h3 className="text-lg font-semibold mb-4">{t('recent_activity')}</h3>
                      <div className="space-y-3">
                        {user.transactions.slice(0, 5).map(txn => (
                          <div
                            key={txn.id}
                            className="flex justify-between items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer"
                            onClick={() => setTransactionDetail(txn)}
                          >
                            <div className="flex items-center">
                              <div className={`w-10 h-10 rounded-full flex items-center justify-center mr-3 ${
                                txn.type === 'credit' ? 'bg-green-100' : 'bg-red-100'
                              }`}>
                                <svg xmlns="http://www.w3.org/2000/svg" className={`h-5 w-5 ${
                                  txn.type === 'credit' ? 'text-green-600' : 'text-red-600'
                                }`} fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} 
                                    d={txn.type === 'credit' ? "M12 6v6m0 0v6m0-6h6m-6 0H6" : "M20 12H4"} />
                                </svg>
                              </div>
                              <div>
                                <p className="font-medium">{txn.description}</p>
                                <p className="text-sm text-gray-500">{txn.date}</p>
                              </div>
                            </div>
                            <div className="text-right">
                              <p className={`font-semibold ${
                                txn.type === 'credit' ? 'text-green-600' : 'text-red-600'
                              }`}>
                                {txn.type === 'credit' ? '+' : '-'}₦{txn.amount.toLocaleString()}
                              </p>
                              <span className={`text-xs px-2 py-1 rounded ${
                                txn.status === 'completed' ? 'bg-green-100 text-green-800' :
                                txn.status === 'failed' ? 'bg-red-100 text-red-800' : 'bg-yellow-100 text-yellow-800'
                              }`}>
                                {t(txn.status)}
                              </span>
                            </div>
                          </div>
                        ))}
                      </div>
                    </div>
                  </div>
                )}

                {/* Credit Score Tab */}
                {activeTab === 'credit' && (
                  <div className="bg-white rounded-lg shadow-md p-6">
                    <h3 className="text-lg font-semibold mb-6">{t('credit_score')}</h3>
                    
                    {/* Credit Score Gauge */}
                    <div className="text-center mb-8">
                      <div className="credit-gauge">
                        <svg viewBox="0 0 200 100">
                          <path
                            d="M 20 80 A 80 80 0 0 1 180 80"
                            fill="none"
                            stroke="#e5e7eb"
                            strokeWidth="20"
                          />
                          <path
                            d="M 20 80 A 80 80 0 0 1 180 80"
                            fill="none"
                            stroke={
                              creditRating === 'excellent' ? '#10b981' :
                              creditRating === 'good' ? '#3b82f6' :
                              creditRating === 'fair' ? '#f59e0b' : '#ef4444'
                            }
                            strokeWidth="20"
                            strokeDasharray={`${(creditScore - 300) / 550 * 251.2} 251.2`}
                            strokeLinecap="round"
                          />
                        </svg>
                        <div className="credit-score-text">
                          <div className="text-4xl font-bold">{creditScore}</div>
                          <div className="text-lg text-gray-600">{t(creditRating)}</div>
                        </div>
                      </div>
                    </div>

                    {/* Credit Details Grid */}
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                      <div className="p-4 border rounded-lg">
                        <h4 className="font-medium mb-2">{t('loan_eligibility')}</h4>
                        <div className="flex items-center space-x-2 mb-2">
                          <span className={`px-2 py-1 text-xs rounded ${
                            loanEligibility.eligible ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'
                          }`}>
                            {loanEligibility.eligible ? t('eligible') : t('not_eligible')}
                          </span>
                        </div>
                        {loanEligibility.eligible && (
                          <div className="text-sm text-gray-600">
                            <p>Max Amount: ₦{loanEligibility.maxAmount.toLocaleString()}</p>
                            <p>Interest Rate: {loanEligibility.interestRate}% p.a.</p>
                          </div>
                        )}
                      </div>

                      <div className="p-4 border rounded-lg">
                        <h4 className="font-medium mb-2">{t('credit_history')}</h4>
                        <div className="text-sm text-gray-600">
                          <p>Total Transactions: {user.transactions.length}</p>
                          <p>Completed Payments: {user.transactions.filter(t => t.status === 'completed').length}</p>
                          <p>Account Age: {user.createdAt ? Math.floor((Date.now() - new Date(user.createdAt).getTime()) / (1000 * 60 * 60 * 24)) : 0} days</p>
                        </div>
                      </div>
                    </div>

                    {/* Credit Factors */}
                    <div className="mb-8">
                      <h4 className="font-medium mb-4">{t('credit_factors')}</h4>
                      <div className="space-y-4">
                        {[
                          { key: 'paymentHistory', label: t('payment_history'), value: creditFactors.paymentHistory, color: 'bg-green-600' },
                          { key: 'creditUtilization', label: t('credit_utilization'), value: creditFactors.creditUtilization, color: 'bg-blue-600' },
                          { key: 'creditLength', label: t('credit_length'), value: Math.min(creditFactors.creditLength / 60 * 100, 100), color: 'bg-purple-600' },
                          { key: 'creditMix', label: t('credit_mix'), value: creditFactors.creditMix, color: 'bg-yellow-600' }
                        ].map(factor => (
                          <div key={factor.key}>
                            <div className="flex justify-between text-sm mb-1">
                              <span>{factor.label}</span>
                              <span>{factor.value.toFixed(1)}%</span>
                            </div>
                            <div className="w-full bg-gray-200 rounded-full h-2">
                              <div 
                                className={`${factor.color} h-2 rounded-full progress-bar`}
                                style={{width: `${factor.value}%`}}
                              ></div>
                            </div>
                          </div>
                        ))}
                      </div>
                    </div>

                    {/* Actions */}
                    <div className="flex flex-wrap gap-4">
                      <button
                        onClick={() => {
                          const report = CreditScoringSystem.generateCreditReport(user);
                          const reportData = JSON.stringify(report, null, 2);
                          const blob = new Blob([reportData], { type: 'application/json' });
                          const url = URL.createObjectURL(blob);
                          const a = document.createElement('a');
                          a.href = url;
                          a.download = `credit_report_${user.did}.json`;
                          a.click();
                          URL.revokeObjectURL(url);
                        }}
                        className="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition"
                      >
                        {t('download_report')}
                      </button>
                      <button
                        onClick={() => alert('Credit report shared with lender')}
                        className="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition"
                      >
                        {t('share_with_lender')}
                      </button>
                      <button
                        onClick={() => {
                          const key = CreditScoringSystem.generateAPIKey(user.did);
                          setApiKey(key);
                          updateUser({ apiKey: key });
                          alert(`API Key generated: ${key}`);
                        }}
                        className="px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition"
                      >
                        {t('generate_api_key')}
                      </button>
                    </div>

                    {/* API Key Display */}
                    {(apiKey || user.apiKey) && (
                      <div className="mt-6 p-4 bg-gray-50 rounded-lg">
                        <h4 className="font-medium mb-2">{t('api_access')}</h4>
                        <div className="font-mono text-sm bg-white p-2 rounded border">
                          {apiKey || user.apiKey}
                        </div>
                        <p className="text-xs text-gray-600 mt-2">
                          Use this API key to access credit scoring data for lending decisions.
                        </p>
                      </div>
                    )}
                  </div>
                )}
  {/* Payments Tab */}
  {activeTab === 'payments' && (
    <div className="space-y-6">
      <div className="bg-white rounded-lg shadow-md p-6">
        <h3 className="text-lg font-semibold mb-4">{t('payment_services')}</h3>
        <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
          {/* Send Money */}
          <div className="p-4 border rounded-lg">
            <h4 className="font-medium mb-2">{t('send_money')}</h4>
            <p className="text-sm text-gray-600 mb-4">Transfer money to other ONPIN wallets</p>
            <button
              onClick={() => setTransferModalOpen(true)}
              className="w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition"
            >
              {t('transfer')}
            </button>
          </div>

          {/* Pay Bills */}
          <div className="p-4 border rounded-lg">
            <h4 className="font-medium mb-2">{t('pay_bills')}</h4>
            <p className="text-sm text-gray-600 mb-4">Pay electricity, water, cable TV bills</p>
            <button
              onClick={() => setBillPaymentModal(true)}
              className="w-full px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 transition"
            >
              {t('bill_payment')}
            </button>
          </div>

          {/* Airtime/Data */}
          <div className="p-4 border rounded-lg">
            <h4 className="font-medium mb-2">{t('airtime_data')}</h4>
            <p className="text-sm text-gray-600 mb-4">Buy airtime and data bundles</p>
            <button
              onClick={() => setAirtimeModal(true)}
              className="w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition"
            >
              {t('buy_now')}
            </button>
          </div>

          {/* Welfare Disbursements */}
          <div className="p-4 border rounded-lg">
            <h4 className="font-medium mb-2">Welfare Disbursements</h4>
            <p className="text-sm text-gray-600 mb-4">Request government welfare funds</p>
            <button
              onClick={() => setWelfareModal(true)}
              className="w-full px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition"
            >
              Request Funds
            </button>
          </div>
        </div>
      </div>

      {/* Recent Transactions */}
      <div className="bg-white rounded-lg shadow-md p-6">
        <h3 className="text-lg font-semibold mb-4">{t('recent_transactions')}</h3>
        <div className="space-y-3">
          {user.transactions.map(txn => (
            <div
              key={txn.id}
              className="flex justify-between items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer"
              onClick={() => setTransactionDetail(txn)}
            >
              <div>
                <p className="font-medium">{txn.description}</p>
                <p className="text-sm text-gray-500">{txn.date} • {txn.recipient || txn.sender || 'Government'}</p>
              </div>
              <div className="text-right">
                <p className={`font-semibold ${
                  txn.type === 'credit' ? 'text-green-600' : 'text-red-600'
                }`}>
                  {txn.type === 'credit' ? '+' : '-'}₦{txn.amount.toLocaleString()}
                </p>
                <span className={`text-xs px-2 py-1 rounded ${
                  txn.status === 'completed' ? 'bg-green-100 text-green-800' :
                  txn.status === 'failed' ? 'bg-red-100 text-red-800' : 'bg-yellow-100 text-yellow-800'
                }`}>
                  {t(txn.status)}
                </span>
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  )}

  {/* Welfare Disbursement Modal */}
  {welfareModal && (
    <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
      <div className="bg-white rounded-lg shadow-xl p-6 w-full max-w-md">
        <h3 className="text-xl font-bold mb-4">Government Welfare Disbursement</h3>
        <div className="space-y-4">
          <div>
            <label className="block text-gray-700 mb-1">Select Program</label>
            <select
              value={welfareDetails.program}
              onChange={(e) => setWelfareDetails({...welfareDetails, program: e.target.value})}
              className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
            >
              <option value="">Select Welfare Program</option>
              <option value="poverty_alleviation">Poverty Alleviation Fund</option>
              <option value="education_grant">Education Support Grant</option>
              <option value="healthcare_support">Healthcare Support</option>
              <option value="agricultural_subsidy">Agricultural Subsidy</option>
              <option value="disaster_relief">Disaster Relief Fund</option>
            </select>
          </div>
          
          {welfareDetails.program && (
            <>
              <div>
                <label className="block text-gray-700 mb-1">Eligibility Status</label>
                <div className="p-3 bg-green-50 rounded-md">
                  <div className="flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 text-green-600 mr-2" viewBox="0 0 20 20" fill="currentColor">
                      <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clipRule="evenodd" />
                    </svg>
                    <span className="text-sm text-green-800">Verified Eligible</span>
                  </div>
                  <p className="text-xs text-green-600 mt-1">Based on your NIN and BVN records</p>
                </div>
              </div>
              
              <div>
                <label className="block text-gray-700 mb-1">Amount Available</label>
                <div className="p-3 bg-blue-50 rounded-md">
                  <p className="font-medium text-blue-800">
                    ₦{welfarePrograms.find(p => p.id === welfareDetails.program)?.amount.toLocaleString() || '0'}
                  </p>
                  <p className="text-xs text-blue-600 mt-1">Maximum disbursement amount for this program</p>
                </div>
              </div>
              
              <div>
                <label className="block text-gray-700 mb-1">Request Amount (₦)</label>
                <input
                  type="number"
                  value={welfareDetails.amount}
                  onChange={(e) => setWelfareDetails({...welfareDetails, amount: e.target.value})}
                  className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                  placeholder={`Enter amount up to ₦${welfarePrograms.find(p => p.id === welfareDetails.program)?.amount.toLocaleString()}`}
                  max={welfarePrograms.find(p => p.id === welfareDetails.program)?.amount}
                />
              </div>
            </>
          )}
        </div>
        <div className="flex justify-end space-x-3 mt-6">
          <button
            onClick={() => {
              setWelfareModal(false);
              setWelfareDetails({ program: '', amount: '' });
            }}
            className="px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition duration-300"
          >
            {t('cancel')}
          </button>
          <button
            onClick={() => {
              if (!welfareDetails.program) {
                alert('Please select a welfare program');
                return;
              }
              
              const program = welfarePrograms.find(p => p.id === welfareDetails.program);
              const amount = parseFloat(welfareDetails.amount) || program.amount;
              
              if (amount > program.amount) {
                alert(`Amount cannot exceed ₦${program.amount.toLocaleString()} for this program`);
                return;
              }
              
              // Add transaction to wallet
              addTransaction({
                type: "credit",
                amount: amount,
                description: `Welfare Disbursement: ${program.name}`,
                recipient: user.name,
                status: "completed"
              });
              
              setWelfareModal(false);
              setWelfareDetails({ program: '', amount: '' });
              alert(`₦${amount.toLocaleString()} welfare disbursement received successfully!`);
            }}
            className="px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition duration-300"
            disabled={!welfareDetails.program}
          >
            Request Disbursement
          </button>
        </div>
      </div>
    </div>
  )}

  {/* Identity Tab */}
  {activeTab === 'identity' && (
    <div className="space-y-6">
      <div className="bg-white rounded-lg shadow-md p-6">
        <h3 className="text-lg font-semibold mb-4">{t('identity_verification')}</h3>
        
        {/* Identity Status */}
        <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
          <div className="p-4 border rounded-lg">
            <h4 className="font-medium mb-2">{t('identity_status')}</h4>
            <div className="flex items-center space-x-2 mb-2">
              <span className={`px-3 py-1 text-sm rounded-full ${
                user.identityStatus === 'active' ? 'bg-green-100 text-green-800' :
                user.identityStatus === 'suspended' ? 'bg-yellow-100 text-yellow-800' :
                'bg-red-100 text-red-800'
              }`}>
                {t(`identity_status_${user.identityStatus}`)}
              </span>
            </div>
            <div className="text-sm text-gray-600 space-y-2">
              <div className="flex justify-between">
                <span>Issue Date:</span>
                <span className="font-medium">{user.identityIssueDate}</span>
              </div>
              <div className="flex justify-between">
                <span>Last Verified:</span>
                <span className="font-medium">{user.lastVerified}</span>
              </div>
              <div className="flex justify-between">
                <span>Next Verification:</span>
                <span className="font-medium">{user.nextVerification}</span>
              </div>
              <div className="flex justify-between">
                <span>NIN:</span>
                <span className="font-mono font-medium">{user.nin || 'Not provided'}</span>
              </div>
            </div>
          </div>

          {/* Owner Details Card */}
          <div className="p-4 border rounded-lg">
            <h4 className="font-medium mb-4">Owner Details</h4>
            <div className="flex items-start space-x-4 mb-4">
              <div className="w-20 h-20 bg-gray-200 rounded-full overflow-hidden">
                {user.profilePhoto ? (
                  <img src={user.profilePhoto} alt="Profile" className="w-full h-full object-cover" />
                ) : (
                  <div className="w-full h-full flex items-center justify-center text-gray-400">
                    <svg xmlns="http://www.w3.org/2000/svg" className="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                    </svg>
                  </div>
                )}
              </div>
              <div className="flex-1">
                <h5 className="font-medium text-lg">{user.name}</h5>
                <p className="text-sm text-gray-600">{user.occupation || 'Occupation not specified'}</p>
                <p className="text-sm text-gray-600">{user.phone}</p>
                <p className="text-sm text-gray-600">{user.email}</p>
              </div>
            </div>
            <div className="grid grid-cols-2 gap-2 text-sm">
              <div>
                <span className="text-gray-600">Date of Birth:</span>
                <p className="font-medium">{user.dob || 'Not provided'}</p>
              </div>
              <div>
                <span className="text-gray-600">Gender:</span>
                <p className="font-medium">{user.gender || 'Not specified'}</p>
              </div>
              <div>
                <span className="text-gray-600">State of Origin:</span>
                <p className="font-medium">{user.stateOfOrigin || 'Not provided'}</p>
              </div>
              <div>
                <span className="text-gray-600">LGA:</span>
                <p className="font-medium">{user.lga || 'Not provided'}</p>
              </div>
            </div>
          </div>
        </div>

        {/* Biometric Enrollment */}
        <div className="p-4 border rounded-lg mb-6">
          <h4 className="font-medium mb-4">{t('biometric_enrollment')}</h4>
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            {[
              { key: 'face', label: t('face_id'), icon: '👤', description: 'Facial recognition for secure authentication' },
              { key: 'fingerprint', label: t('fingerprint'), icon: '👆', description: 'Fingerprint scanning for quick access' },
              { key: 'iris', label: 'Iris Scan', icon: '👁️', description: 'Iris pattern recognition for high-security verification' },
              { key: 'voice', label: t('voice_recognition'), icon: '🎤', description: 'Voice pattern matching for hands-free access' }
            ].map(biometric => (
              <div key={biometric.key} className="p-3 border rounded-lg hover:bg-gray-50 transition">
                <div className="flex items-start space-x-3">
                  <span className="text-2xl">{biometric.icon}</span>
                  <div className="flex-1">
                    <div className="flex items-center justify-between">
                      <h5 className="font-medium">{biometric.label}</h5>
                      <span className={`text-xs px-2 py-1 rounded ${
                        biometricEnrolled[biometric.key] || user.biometricData?.[biometric.key]?.enrolled
                          ? 'bg-green-100 text-green-800' 
                          : 'bg-gray-100 text-gray-800'
                      }`}>
                        {biometricEnrolled[biometric.key] || user.biometricData?.[biometric.key]?.enrolled 
                          ? t('verified') 
                          : t('not_enrolled')}
                      </span>
                    </div>
                    <p className="text-sm text-gray-600 mt-1">{biometric.description}</p>
                    {!(biometricEnrolled[biometric.key] || user.biometricData?.[biometric.key]?.enrolled) && (
                      <button
                        onClick={() => handleBiometricScan(biometric.key)}
                        className="mt-2 w-full py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition"
                        disabled={biometricScanning === biometric.key}
                      >
                        {biometricScanning === biometric.key ? t('verifying') : t('enroll_now')}
                      </button>
                    )}
                  </div>
                </div>
              </div>
            ))}
          </div>
        </div>

        {/* Identity Documents */}
        <div className="p-4 border rounded-lg">
          <h4 className="font-medium mb-4">Identity Documents</h4>
          <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div className="border rounded-lg p-3 text-center">
              <div className="h-32 bg-gray-100 rounded flex items-center justify-center mb-2">
                <span className="text-gray-400">NIN Front</span>
              </div>
              <p className="text-sm font-medium">National ID Card</p>
              <p className="text-xs text-gray-500">Uploaded: {user.ninUploadDate || 'Not uploaded'}</p>
            </div>
            <div className="border rounded-lg p-3 text-center">
              <div className="h-32 bg-gray-100 rounded flex items-center justify-center mb-2">
                <span className="text-gray-400">Passport Photo</span>
              </div>
              <p className="text-sm font-medium">Passport</p>
              <p className="text-xs text-gray-500">Expires: {user.passportExpiry || 'Not provided'}</p>
            </div>
            <div className="border rounded-lg p-3 text-center">
              <div className="h-32 bg-gray-100 rounded flex items-center justify-center mb-2">
                <span className="text-gray-400">Driver's License</span>
              </div>
              <p className="text-sm font-medium">Driver's License</p>
              <p className="text-xs text-gray-500">Expires: {user.licenseExpiry || 'Not provided'}</p>
            </div>
          </div>
        </div>

        {/* Verification History */}
        <div className="p-4 border rounded-lg mt-6">
          <h4 className="font-medium mb-4">Verification History</h4>
          <div className="space-y-3">
            {[
              { id: 1, date: '2023-11-15', type: 'Biometric', status: 'success', method: 'Face ID' },
              { id: 2, date: '2023-08-22', type: 'Document', status: 'success', method: 'NIN Verification' },
              { id: 3, date: '2023-05-10', type: 'Address', status: 'pending', method: 'Utility Bill' }
            ].map(verification => (
              <div key={verification.id} className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                <div>
                  <p className="font-medium">{verification.type} Verification</p>
                  <p className="text-sm text-gray-600">{verification.method} • {verification.date}</p>
                </div>
                <span className={`text-xs px-2 py-1 rounded ${
                  verification.status === 'success' ? 'bg-green-100 text-green-800' :
                  verification.status === 'pending' ? 'bg-yellow-100 text-yellow-800' :
                  'bg-red-100 text-red-800'
                }`}>
                  {verification.status}
                </span>
              </div>
            ))}
          </div>
        </div>
      </div>
    </div>
  )}


{/* Consent Tab */}
{activeTab === 'consent' && (
  <div className="bg-white rounded-lg shadow-md p-6">
    <h3 className="text-lg font-semibold mb-4">{t('consent_management')}</h3>
    
    <div className="space-y-6">
      {/* Active Consents */}
      <div>
        <div className="flex justify-between items-center mb-4">
          <h4 className="font-medium">{t('active_consents')}</h4>
          <span className="text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded">
            {user.activeConsents?.length || 0} Active
          </span>
        </div>
        
        <div className="space-y-3">
          {user.activeConsents?.map(consent => (
            <div key={consent.id} className="p-4 border rounded-lg hover:shadow-sm transition">
              <div className="flex justify-between items-start">
                <div>
                  <div className="flex items-center space-x-2">
                    <h5 className="font-medium">{consent.organization}</h5>
                    <span className={`text-xs px-2 py-1 rounded ${
                      consent.status === 'active' ? 'bg-green-100 text-green-800' :
                      consent.status === 'pending' ? 'bg-yellow-100 text-yellow-800' :
                      'bg-gray-100 text-gray-800'
                    }`}>
                      {consent.status}
                    </span>
                  </div>
                  <p className="text-xs text-gray-500 mt-1">
                    Granted: {consent.date} • Expires: {consent.expiry}
                  </p>
                </div>
                <button
                  onClick={() => {
                    const updatedConsents = user.activeConsents.filter(c => c.id !== consent.id);
                    updateUser({ activeConsents: updatedConsents });
                    alert(`Consent revoked from ${consent.organization}`);
                  }}
                  className="px-3 py-1 bg-red-100 text-red-600 rounded hover:bg-red-200 transition text-sm"
                >
                  {t('revoke')}
                </button>
              </div>
              
              <div className="mt-3">
                <h6 className="text-sm font-medium text-gray-700 mb-1">Data Shared:</h6>
                <div className="flex flex-wrap gap-2">
                  {consent.dataTypes?.map(dataType => (
                    <span key={dataType} className="text-xs bg-gray-100 text-gray-800 px-2 py-1 rounded">
                      {dataType}
                    </span>
                  ))}
                </div>
              </div>
              
              <div className="mt-3">
                <h6 className="text-sm font-medium text-gray-700 mb-1">Purpose:</h6>
                <p className="text-sm text-gray-600">{consent.purpose || 'General verification'}</p>
              </div>
            </div>
          ))}
          
          {(!user.activeConsents || user.activeConsents.length === 0) && (
            <div className="text-center py-8 border rounded-lg bg-gray-50">
              <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12 mx-auto text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
              </svg>
              <p className="text-gray-500 mt-2">{t('no_active_consents')}</p>
            </div>
          )}
        </div>
      </div>

      {/* Consent Requests */}
      <div>
        <h4 className="font-medium mb-4">{t('pending_requests')}</h4>
        <div className="space-y-4">
          {/* Sample consent requests */}
          {[
            {
              id: 'req-1',
              organization: 'First Bank Nigeria',
              purpose: 'Loan application processing',
              requestedData: ['identity_verification', 'credit_score', 'transaction_history'],
              date: 'Today'
            },
            {
              id: 'req-2',
              organization: 'HealthPlus Insurance',
              purpose: 'Policy underwriting',
              requestedData: ['identity_verification', 'health_records'],
              date: '2 days ago'
            }
          ].map(request => (
            <div key={request.id} className="border rounded-lg overflow-hidden">
              <div className="p-4 bg-blue-50">
                <div className="flex justify-between items-start">
                  <div>
                    <h5 className="font-medium">{request.organization}</h5>
                    <p className="text-sm text-gray-600">{request.purpose}</p>
                    <p className="text-xs text-gray-500 mt-1">Requested: {request.date}</p>
                  </div>
                  <span className="text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded">
                    Pending
                  </span>
                </div>
              </div>
              
              <div className="p-4 border-t">
                <h6 className="text-sm font-medium text-gray-700 mb-2">Requesting Access To:</h6>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  {[
                    { id: 'identity', label: 'Identity Verification', description: 'Name, NIN, Date of Birth' },
                    { id: 'credit', label: 'Credit Information', description: 'Credit score & history' },
                    { id: 'transactions', label: 'Transaction History', description: '6 months of transactions' },
                    { id: 'health', label: 'Health Records', description: 'Medical history & insurance' }
                  ].filter(item => request.requestedData.includes(item.id.replace('-', '_')))
                  .map(data => (
                    <div key={data.id} className="flex items-start space-x-3">
                      <input 
                        type="checkbox" 
                        id={`${request.id}-${data.id}`}
                        className="mt-1 h-4 w-4 text-blue-600 rounded focus:ring-blue-500"
                        defaultChecked
                      />
                      <div>
                        <label htmlFor={`${request.id}-${data.id}`} className="text-sm font-medium text-gray-700">
                          {data.label}
                        </label>
                        <p className="text-xs text-gray-500">{data.description}</p>
                      </div>
                    </div>
                  ))}
                </div>
                
                <div className="flex justify-end space-x-3 mt-4">
                  <button
                    onClick={() => {
                      // Deny action
                      alert(`Denied consent request from ${request.organization}`);
                    }}
                    className="px-3 py-1 bg-gray-100 text-gray-800 rounded hover:bg-gray-200 transition text-sm"
                  >
                    {t('deny')}
                  </button>
                  <button
                    onClick={() => {
                      const newConsent = {
                        id: `consent-${Date.now()}`,
                        organization: request.organization,
                        date: new Date().toISOString().split('T')[0],
                        expiry: new Date(Date.now() + 90 * 24 * 60 * 60 * 1000).toISOString().split('T')[0], // 90 days
                        status: 'active',
                        purpose: request.purpose,
                        dataTypes: request.requestedData.map(id => 
                          id === 'identity_verification' ? 'Identity' :
                          id === 'credit_score' ? 'Credit Score' :
                          id === 'transaction_history' ? 'Transactions' :
                          id === 'health_records' ? 'Health Data' : id
                        )
                      };
                      updateUser({ 
                        activeConsents: [...(user.activeConsents || []), newConsent] 
                      });
                      alert(t('consent_granted', { requester: request.organization }));
                    }}
                    className="px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 transition text-sm"
                  >
                    {t('grant')}
                  </button>
                </div>
              </div>
            </div>
          ))}
          
          <div className="text-center py-4">
            <p className="text-gray-500">No other pending requests</p>
          </div>
        </div>
      </div>
      
      {/* New Consent Types Section */}
      <div className="border-t pt-6">
        <h4 className="font-medium mb-4">Data Sharing Categories</h4>
        <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
          {[
            {
              id: 'identity',
              title: 'Identity Data',
              description: 'Name, NIN, Date of Birth, Address',
              icon: '🆔'
            },
            {
              id: 'financial',
              title: 'Financial Data',
              description: 'Account balances, transactions, credit score',
              icon: '💰'
            },
            {
              id: 'health',
              title: 'Health Data',
              description: 'Medical records, insurance claims',
              icon: '🏥'
            }
          ].map(category => (
            <div key={category.id} className="border rounded-lg p-4 hover:shadow-sm transition">
              <div className="flex items-center space-x-3 mb-2">
                <span className="text-2xl">{category.icon}</span>
                <h5 className="font-medium">{category.title}</h5>
              </div>
              <p className="text-sm text-gray-600 mb-3">{category.description}</p>
              <button
                onClick={() => alert(`View ${category.title} sharing history`)}
                className="text-sm text-blue-600 hover:text-blue-800"
              >
                View Sharing History →
              </button>
            </div>
          ))}
        </div>
      </div>
    </div>
  </div>
)}

                {/* Lifecycle Tab */}
                {activeTab === 'lifecycle' && (
                  <div className="bg-white rounded-lg shadow-md p-6">
                    <h3 className="text-lg font-semibold mb-4">{t('lifecycle_tab')}</h3>
                    
                    <div className="space-y-6">
                      {/* Identity Lifecycle */}
                      <div className="p-4 border rounded-lg">
                        <h4 className="font-medium mb-4">Identity Lifecycle Management</h4>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                          <div className="p-3 bg-green-50 rounded-lg">
                            <h5 className="font-medium text-green-800">{t('issue_at_birth')}</h5>
                            <p className="text-sm text-green-600">Automatic identity issuance upon birth registration</p>
                            <p className="text-xs text-green-500 mt-2">Status: Active since {user.identityIssueDate}</p>
                          </div>
                          <div className="p-3 bg-gray-50 rounded-lg">
                            <h5 className="font-medium text-gray-800">{t('revoke_at_death')}</h5>
                            <p className="text-sm text-gray-600">Identity revocation upon death certificate</p>
                            <p className="text-xs text-gray-500 mt-2">Status: Not applicable</p>
                          </div>
                        </div>
                      </div>

                      {/* Certificate
                      <div className="p-4 border rounded-lg">
                        <h4 className="font-medium mb-4">Certificate Services</h4>
                        <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                          {[
                            { key: 'birth', label: t('birth_certificate'), icon: '👶' },
                            { key: 'marriage', label: t('marriage_certificate'), icon: '💒' },
                            { key: 'divorce', label: t('divorce_certificate'), icon: '📋' },
                            { key: 'death', label: t('death_certificate'), icon: '⚰️' }
                          ].map(cert => (
                            <button
                              key={cert.key}
                              onClick={() => {
                                alert(`${cert.label} request submitted. You will be notified when ready.`);
                              }}
                              className="p-4 border rounded-lg hover:bg-gray-50 transition text-center"
                            >
                              <div className="text-2xl mb-2">{cert.icon}</div>
                              <div className="text-sm font-medium">{cert.label}</div>
                            </button>
                          ))}
                        </div>
                      </div>
                      Services */}

                      {/* Linked Services */}
                      <div className="p-4 border rounded-lg">
                        <h4 className="font-medium mb-4">{t('linked_services')}</h4>
                        <div className="space-y-3">
                          {[
                            { name: 'National Health Insurance Scheme', status: 'active', connected: true },
                            { name: 'National Pension Commission', status: 'active', connected: true },
                            { name: 'Federal Inland Revenue Service', status: 'active', connected: false },
                            { name: 'National Social Investment Programme', status: 'pending', connected: false }
                          ].map((service, index) => (
                            <div key={index} className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                              <div>
                                <p className="font-medium">{service.name}</p>
                                <p className="text-sm text-gray-600">Status: {service.status}</p>
                              </div>
                              <span className={`text-xs px-2 py-1 rounded ${
                                service.connected ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'
                              }`}>
                                {service.connected ? 'Connected' : 'Not Connected'}
                              </span>
                            </div>
                          ))}
                        </div>
                      </div>
                    </div>
                  </div>
                )}

                {/* Loans Tab */}
                {activeTab === 'loans' && (
                  <div className="space-y-6">
                    <div className="bg-white rounded-lg shadow-md p-6">
                      <div className="flex justify-between items-center mb-4">
                        <h3 className="text-lg font-semibold">Loan Services</h3>
                        <button
                          onClick={() => setLoanModal(true)}
                          className="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition"
                        >
                          {t('loan_application')}
                        </button>
                      </div>

                      {/* Active Loans */}
                      <div className="mb-6">
                        <h4 className="font-medium mb-4">Active Loans</h4>
                        <div className="space-y-4">
                          {user.loans?.filter(loan => loan.status === 'active').map(loan => (
                            <div key={loan.id} className="p-4 border rounded-lg">
                              <div className="flex justify-between items-start mb-2">
                                <div>
                                  <h5 className="font-medium capitalize">{loan.type} Loan</h5>
                                  <p className="text-sm text-gray-600">{loan.purpose}</p>
                                </div>
                                <span className="text-xs px-2 py-1 bg-green-100 text-green-800 rounded">
                                  {loan.status}
                                </span>
                              </div>
                              <div className="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                                <div>
                                  <p className="text-gray-600">Loan Amount</p>
                                  <p className="font-semibold">₦{loan.amount?.toLocaleString()}</p>
                                </div>
                                <div>
                                  <p className="text-gray-600">Balance</p>
                                  <p className="font-semibold">₦{loan.balance?.toLocaleString()}</p>
                                </div>
                                <div>
                                  <p className="text-gray-600">Interest Rate</p>
                                  <p className="font-semibold">{loan.interestRate}%</p>
                                </div>
                                <div>
                                  <p className="text-gray-600">Due Date</p>
                                  <p className="font-semibold">{loan.dueDate}</p>
                                </div>
                              </div>
                              <div className="mt-4 flex space-x-2">
                                <button
                                  onClick={() => {
                                    const paymentAmount = Math.min(50000, loan.balance);
                                    if (paymentAmount > user.balance) {
                                      alert(t('insufficient_funds'));
                                      return;
                                    }
                                    
                                    const updatedLoan = {
                                      ...loan,
                                      balance: loan.balance - paymentAmount,
                                      paidAmount: (loan.paidAmount || 0) + paymentAmount
                                    };
                                    
                                    const updatedLoans = user.loans.map(l => 
                                      l.id === loan.id ? updatedLoan : l
                                    );
                                    
                                    updateUser({ loans: updatedLoans });
                                    
                                    addTransaction({
                                      type: "debit",
                                      amount: paymentAmount,
                                      description: `Loan Repayment - ${loan.type}`,
                                      recipient: "Loan Account"
                                    });
                                    
                                    alert(t('payment_made'));
                                  }}
                                  className="px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 transition"
                                >
                                  {t('make_payment')}
                                </button>
                                <button className="px-3 py-1 bg-gray-100 text-gray-600 rounded hover:bg-gray-200 transition">
                                  {t('view_details')}
                                </button>
                              </div>
                            </div>
                          ))}
                        </div>
                      </div>

                      {/* Loan Options */}
                      <div>
                        <h4 className="font-medium mb-4">Available Loan Products</h4>
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                          {[
                            { type: 'personal', name: 'Personal Loan', rate: '15%', max: '₦2M', duration: '12-36 months' },
                            { type: 'business', name: 'Business Loan', rate: '12%', max: '₦10M', duration: '12-60 months' },
                            { type: 'emergency', name: 'Emergency Loan', rate: '18%', max: '₦500K', duration: '6-12 months' }
                          ].map(product => (
                            <div key={product.type} className="p-4 border rounded-lg">
                              <h5 className="font-medium mb-2">{product.name}</h5>
                              <div className="space-y-1 text-sm text-gray-600">
                                <p>Interest Rate: {product.rate}</p>
                                <p>Max Amount: {product.max}</p>
                                <p>Duration: {product.duration}</p>
                              </div>
                              <button
                                onClick={() => {
                                  setLoanApplication(prev => ({ ...prev, type: product.type }));
                                  setLoanModal(true);
                                }}
                                className="mt-3 w-full px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition"
                              >
                                Apply Now
                              </button>
                            </div>
                          ))}
                        </div>
                      </div>
                    </div>
                  </div>
                )}
                
                {/* Remittance Tab */}
  {activeTab === 'remittance' && (
    <div className="space-y-6">
      <div className="bg-white rounded-lg shadow-md p-6">
        <div className="flex justify-between items-center mb-4">
          <h3 className="text-lg font-semibold">{t('remittance_services')}</h3>
          <div className="flex space-x-2">
            <button
              onClick={() => setReceiveRemittanceModal(true)}
              className="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition"
            >
              {t('receive_money')}
            </button>
            <button
              onClick={() => setRemittanceModal(true)}
              className="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition"
            >
              {t('send_money_abroad')}
            </button>
          </div>
        </div>

        {/* Exchange Rates */}
        <div className="mb-6">
          <h4 className="font-medium mb-4">Current Exchange Rates</h4>
          <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
            {countries.slice(0, 6).map(country => (
              <div key={country.code} className="p-3 border rounded-lg">
                <div className="flex justify-between items-center">
                  <span className="font-medium">{country.code}</span>
                  <span className="text-green-600">₦{country.rate}</span>
                </div>
                <p className="text-sm text-gray-600">{country.name}</p>
                <p className="text-xs text-gray-500 mt-1">1 {country.code} = ₦{country.rate}</p>
              </div>
            ))}
          </div>
        </div>

        {/* Remittance Options */}
        <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
          <div className="p-4 border rounded-lg bg-blue-50">
            <h4 className="font-medium text-blue-800 mb-2">{t('send_money_abroad')}</h4>
            <p className="text-sm text-blue-600 mb-3">Send money to over 50 countries worldwide with competitive exchange rates</p>
            <button
              onClick={() => setRemittanceModal(true)}
              className="w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition"
            >
              Send
            </button>
          </div>
          <div className="p-4 border rounded-lg bg-green-50">
            <h4 className="font-medium text-green-800 mb-2">{t('receive_money')}</h4>
            <p className="text-sm text-green-600 mb-3">Receive money from abroad directly to your ONPIN wallet in Naira</p>
            <button
              onClick={() => setReceiveRemittanceModal(true)}
              className="w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition"
            >
              Receive
            </button>
          </div>
        </div>

        {/* Recent Remittances */}
        <div>
          <h4 className="font-medium mb-4">Recent Remittances</h4>
          <div className="space-y-3">
            {[
              { id: 1, type: 'received', sender: 'David Smith', country: 'United States', amount: 500, currency: 'USD', nairaAmount: 825000, status: 'completed', date: '2023-07-15' },
              { id: 2, type: 'sent', recipient: 'Mary Johnson', country: 'United Kingdom', amount: 200, currency: 'GBP', nairaAmount: 420000, status: 'completed', date: '2023-07-14' },
              { id: 3, type: 'received', sender: 'James Brown', country: 'Canada', amount: 1000, currency: 'CAD', nairaAmount: 1200000, status: 'pending', date: '2023-07-12' }
            ].map(remittance => (
              <div key={remittance.id} className="flex justify-between items-center p-4 border rounded-lg">
                <div>
                  <p className="font-medium">
                    {remittance.type === 'received' ? 
                      `From: ${remittance.sender}` : 
                      `To: ${remittance.recipient}`}
                  </p>
                  <p className="text-sm text-gray-600">
                    {remittance.country} • {remittance.date}
                  </p>
                </div>
                <div className="text-right">
                  <p className="font-semibold">
                    {remittance.type === 'received' ? '+' : '-'}{remittance.currency} {remittance.amount}
                  </p>
                  <p className="text-sm text-gray-600">
                    ₦{remittance.nairaAmount.toLocaleString()}
                  </p>
                  <span className={`text-xs px-2 py-1 rounded ${
                    remittance.status === 'completed' ? 'bg-green-100 text-green-800' : 
                    remittance.status === 'pending' ? 'bg-yellow-100 text-yellow-800' : 'bg-red-100 text-red-800'
                  }`}>
                    {remittance.status}
                  </span>
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>
    </div>
  )}

  {/* Receive Remittance Modal */}
  {receiveRemittanceModal && (
    <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
      <div className="bg-white rounded-lg shadow-xl p-6 w-full max-w-md">
        <h3 className="text-xl font-bold mb-4">Receive Money from Abroad</h3>
        <div className="space-y-4">
          <div>
            <label className="block text-gray-700 mb-1">Sender's Country</label>
            <select
              value={receiveRemittanceDetails.country}
              onChange={(e) => setReceiveRemittanceDetails({...receiveRemittanceDetails, country: e.target.value})}
              className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
            >
              <option value="">Select Country</option>
              {countries.map(country => (
                <option key={country.code} value={country.code}>
                  {country.name} ({country.code})
                </option>
              ))}
            </select>
          </div>
          <div>
            <label className="block text-gray-700 mb-1">Sender's Name</label>
            <input
              type="text"
              value={receiveRemittanceDetails.sender}
              onChange={(e) => setReceiveRemittanceDetails({...receiveRemittanceDetails, sender: e.target.value})}
              className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
              placeholder="Enter sender's name"
            />
          </div>
          <div>
            <label className="block text-gray-700 mb-1">Amount to Receive</label>
            <div className="flex">
              <input
                type="number"
                value={receiveRemittanceDetails.amount}
                onChange={(e) => setReceiveRemittanceDetails({...receiveRemittanceDetails, amount: e.target.value})}
                className="w-full px-3 py-2 border rounded-l-md focus:outline-none focus:ring-2 focus:ring-green-500"
                placeholder="Enter amount"
              />
              <select
                value={receiveRemittanceDetails.currency}
                onChange={(e) => setReceiveRemittanceDetails({...receiveRemittanceDetails, currency: e.target.value})}
                className="px-3 py-2 border-t border-b border-r rounded-r-md bg-gray-100"
              >
                {countries.map(country => (
                  <option key={country.code} value={country.code}>{country.code}</option>
                ))}
              </select>
            </div>
          {receiveRemittanceDetails.country && receiveRemittanceDetails.amount && (
            <p className="text-sm text-gray-600 mt-1">
              You will receive: ₦{(
                parseFloat(receiveRemittanceDetails.amount) * 
                (countries.find(c => c.code === receiveRemittanceDetails.currency)?.rate || 1)
              ).toLocaleString()}
            </p>
          )}
          </div>
          <div>
            <label className="block text-gray-700 mb-1">Purpose</label>
            <select
              value={receiveRemittanceDetails.purpose}
              onChange={(e) => setReceiveRemittanceDetails({...receiveRemittanceDetails, purpose: e.target.value})}
              className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
            >
              <option value="">Select Purpose</option>
              <option value="family_support">Family Support</option>
              <option value="education">Education</option>
              <option value="business">Business</option>
              <option value="medical">Medical</option>
              <option value="other">Other</option>
            </select>
          </div>
          <div className="p-3 bg-blue-50 rounded-md">
            <p className="text-sm text-blue-800">
              Share these details with sender:
            </p>
            <div className="mt-2 p-2 bg-white rounded border border-blue-200">
              <p className="text-xs font-mono">ONPIN Wallet ID: {user?.did}</p>
              <p className="text-xs font-mono">Account Name: {user?.name}</p>
              <p className="text-xs font-mono">Bank Name: ONPIN Digital Bank</p>
              <p className="text-xs font-mono">Routing Number: 123456789</p>
            </div>
          </div>
        </div>
        <div className="flex justify-end space-x-3 mt-6">
          <button
            onClick={() => {
              setReceiveRemittanceModal(false);
              setReceiveRemittanceDetails({ country: '', sender: '', amount: '', currency: 'USD', purpose: '' });
            }}
            className="px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition duration-300"
          >
            {t('cancel')}
          </button>
          <button
            onClick={() => {
              if (!receiveRemittanceDetails.country || !receiveRemittanceDetails.sender || !receiveRemittanceDetails.amount) {
                alert('Please fill all fields');
                return;
              }
              
              const amount = parseFloat(receiveRemittanceDetails.amount);
              const nairaAmount = amount * (countries.find(c => c.code === receiveRemittanceDetails.currency)?.rate || 1);
              
              addTransaction({
                type: "credit",
                amount: nairaAmount,
                description: `Remittance from ${receiveRemittanceDetails.sender} (${receiveRemittanceDetails.country})`,
                recipient: user.name
              });
              
              setReceiveRemittanceModal(false);
              setReceiveRemittanceDetails({ country: '', sender: '', amount: '', currency: 'USD', purpose: '' });
              alert('Remittance received successfully!');
            }}
            className="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition duration-300"
          >
            Confirm Receipt
          </button>
        </div>
      </div>
    </div>
  )}
                
                {/* Investments Tab */}
                {activeTab === 'investments' && (
                  <div className="space-y-6">
                    <div className="bg-white rounded-lg shadow-md p-6">
                      <div className="flex justify-between items-center mb-4">
                        <h3 className="text-lg font-semibold">{t('investment_options')}</h3>
                        <button
                          onClick={() => setInvestmentModal(true)}
                          className="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition"
                        >
                          {t('invest_now')}
                        </button>
                      </div>

                      {/* Portfolio Overview */}
                      <div className="mb-6">
                        <h4 className="font-medium mb-4">Investment Portfolio</h4>
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                          <div className="p-4 bg-green-50 rounded-lg">
                            <h5 className="font-medium text-green-800">Total Invested</h5>
                            <p className="text-2xl font-bold text-green-600">
                              ₦{user.investments?.reduce((sum, inv) => sum + inv.amount, 0).toLocaleString()}
                            </p>
                          </div>
                          <div className="p-4 bg-blue-50 rounded-lg">
                            <h5 className="font-medium text-blue-800">Current Value</h5>
                            <p className="text-2xl font-bold text-blue-600">
                              ₦{user.investments?.reduce((sum, inv) => sum + inv.currentValue, 0).toLocaleString()}
                            </p>
                          </div>
                          <div className="p-4 bg-purple-50 rounded-lg">
                            <h5 className="font-medium text-purple-800">Total Returns</h5>
                            <p className="text-2xl font-bold text-purple-600">
                              ₦{user.investments?.reduce((sum, inv) => sum + (inv.currentValue - inv.amount), 0).toLocaleString()}
                            </p>
                          </div>
                        </div>
                      </div>

                      {/* Active Investments */}
                      <div className="mb-6">
                        <h4 className="font-medium mb-4">Active Investments</h4>
                        <div className="space-y-4">
                          {user.investments?.map(investment => (
                            <div key={investment.id} className="p-4 border rounded-lg">
                              <div className="flex justify-between items-start mb-2">
                                <div>
                                  <h5 className="font-medium capitalize">{investment.type.replace('_', ' ')}</h5>
                                  <p className="text-sm text-gray-600">Started: {investment.startDate}</p>
                                </div>
                                <span className="text-xs px-2 py-1 bg-green-100 text-green-800 rounded">
                                  {investment.status}
                                </span>
                              </div>
                              <div className="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                                <div>
                                  <p className="text-gray-600">Invested</p>
                                  <p className="font-semibold">₦{investment.amount.toLocaleString()}</p>
                                </div>
                                <div>
                                  <p className="text-gray-600">Current Value</p>
                                  <p className="font-semibold">₦{investment.currentValue.toLocaleString()}</p>
                                </div>
                                <div>
                                  <p className="text-gray-600">Return Rate</p>
                                  <p className="font-semibold">{investment.returnRate}%</p>
                                </div>
                                <div>
                                  <p className="text-gray-600">Maturity</p>
                                  <p className="font-semibold">{investment.maturityDate || 'Flexible'}</p>
                                </div>
                              </div>
                              <div className="mt-4 flex space-x-2">
                                <button
                                  onClick={() => {
                                    const withdrawAmount = investment.currentValue;
                                    const updatedInvestments = user.investments.filter(inv => inv.id !== investment.id);
                                    
                                    updateUser({ 
                                      investments: updatedInvestments,
                                      balance: user.balance + withdrawAmount
                                    });
                                    
                                    addTransaction({
                                      type: "credit",
                                      amount: withdrawAmount,
                                      description: `Investment Withdrawal - ${investment.type}`,
                                      recipient: "Investment Account"
                                    });
                                    
                                    alert(t('withdrawal_successful'));
                                  }}
                                  className="px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 transition"
                                >
                                  {t('withdraw_now')}
                                </button>
                                <button className="px-3 py-1 bg-gray-100 text-gray-600 rounded hover:bg-gray-200 transition">
                                  {t('view_details')}
                                </button>
                              </div>
                            </div>
                          ))}
                        </div>
                      </div>

                      {/* Investment Products */}
                      <div>
                        <h4 className="font-medium mb-4">Available Investment Products</h4>
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                          {[
                            { type: 'treasury', name: t('treasury_bills'), rate: '13.5%', risk: 'Low', min: '₦10K' },
                            { type: 'mutual_funds', name: t('mutual_funds'), rate: '18.2%', risk: 'Medium', min: '₦5K' },
                            { type: 'fixed_deposit', name: t('fixed_deposit'), rate: '12.0%', risk: 'Low', min: '₦50K' },
                            { type: 'stocks', name: t('stocks'), rate: '25.0%', risk: 'High', min: '₦1K' }
                          ].map(product => (
                            <div key={product.type} className="p-4 border rounded-lg">
                              <h5 className="font-medium mb-2">{product.name}</h5>
                              <div className="space-y-1 text-sm text-gray-600">
                                <p>Expected Return: {product.rate}</p>
                                <p>Risk Level: {product.risk}</p>
                                <p>Minimum: {product.min}</p>
                              </div>
                              <button
                                onClick={() => {
                                  setInvestmentDetails(prev => ({ ...prev, type: product.type }));
                                  setInvestmentModal(true);
                                }}
                                className="mt-3 w-full px-3 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition"
                              >
                                {t('invest_now')}
                              </button>
                            </div>
                          ))}
                        </div>
                      </div>
                    </div>
                  </div>
                )}

                {/* Emotional Data Tab */}
                {activeTab === 'emotional' && (
                  <div className="bg-white rounded-lg shadow-md p-6">
                    <h3 className="text-lg font-semibold mb-4">{t('emotional_wellbeing')}</h3>
                    
                    <div className="space-y-6">
                      {/* Current Mood */}
                      <div className="p-4 border rounded-lg">
                        <h4 className="font-medium mb-4">{t('mood_tracker')}</h4>
                        <div className="space-y-4">
                          {[
                            { key: 'mood', label: 'Overall Mood', value: emotionalData.mood, color: 'blue' },
                            { key: 'stress', label: t('stress_level'), value: emotionalData.stress, color: 'red' },
                            { key: 'happiness', label: t('happiness_index'), value: emotionalData.happiness, color: 'green' },
                            { key: 'anxiety', label: t('anxiety_level'), value: emotionalData.anxiety, color: 'yellow' }
                          ].map(metric => (
                            <div key={metric.key}>
                              <div className="flex justify-between items-center mb-2">
                                <label className="text-sm font-medium">{metric.label}</label>
                                <span className="text-sm">{metric.value}%</span>
                              </div>
                              <div className="relative">
                                <input
                                  type="range"
                                  min="0"
                                  max="100"
                                  value={metric.value}
                                  onChange={(e) => setEmotionalData(prev => ({
                                    ...prev,
                                    [metric.key]: parseInt(e.target.value)
                                  }))}
                                  className="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
                                />
                              </div>
                            </div>
                          ))}
                        </div>
                        <button
                          onClick={recordEmotionalData}
                          className="mt-4 w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition"
                        >
                          {t('record_mood')}
                        </button>
                      </div>

                      {/* Emotional History */}
                      <div className="p-4 border rounded-lg">
                        <h4 className="font-medium mb-4">Emotional History</h4>
                        <div className="space-y-3">
                          {user.emotionalHistory?.slice(0, 7).map((entry, index) => (
                            <div key={index} className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                              <div>
                                <p className="font-medium">{entry.date}</p>
                                <div className="flex space-x-4 text-sm text-gray-600">
                                  <span>Mood: {entry.mood}%</span>
                                  <span>Stress: {entry.stress}%</span>
                                  <span>Happiness: {entry.happiness}%</span>
                                </div>
                              </div>
                              <div className="emotional-meter w-20 relative">
                                <div 
                                  className="emotional-indicator"
                                  style={{ left: `${entry.mood}%` }}
                                ></div>
                              </div>
                            </div>
                          ))}
                        </div>
                      </div>

                      {/* Insights */}
                      <div className="p-4 border rounded-lg">
                        <h4 className="font-medium mb-4">Emotional Insights</h4>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                          <div className="p-3 bg-blue-50 rounded-lg">
                            <h5 className="font-medium text-blue-800">Weekly Average</h5>
                            <p className="text-sm text-blue-600">
                              Your mood has been {emotionalData.mood > 70 ? 'excellent' : emotionalData.mood > 50 ? 'good' : 'needs attention'} this week
                            </p>
                          </div>
                          <div className="p-3 bg-green-50 rounded-lg">
                            <h5 className="font-medium text-green-800">Recommendation</h5>
                            <p className="text-sm text-green-600">
                              {emotionalData.stress > 70 ? 'Consider stress management techniques' : 
                              emotionalData.happiness < 50 ? 'Try engaging in activities you enjoy' :
                              'Keep up the positive mindset!'}
                            </p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                )}
  {/* Insurance Tab */}

{activeTab === 'insurance' && (
  <div className="space-y-6">
    <div className="bg-white rounded-lg shadow-md p-6">
      <div className="mb-6">
        <h1 className="text-2xl font-bold">Insurance</h1>
        <h2 className="text-3xl">₦{user?.walletBalance?.toLocaleString() || '0'}</h2>
      </div>

      <div className="flex border-b">
        <button 
          onClick={() => setInsuranceView('products')} 
          className={`px-4 py-2 font-small ${insuranceView === 'products' ? 'border-b-2 border-blue-500 text-blue-600' : 'text-gray-500'}`}
        >
          Insurance
        </button>
        <button 
          onClick={() => setInsuranceView('policies')} 
          className={`px-4 py-2 font-small ${insuranceView === 'policies' ? 'border-b-2 border-blue-500 text-blue-600' : 'text-gray-500'}`}
        >
          Policies
        </button>
        <button 
          onClick={() => setInsuranceView('claims')} 
          className={`px-4 py-2 font-small ${insuranceView === 'claims' ? 'border-b-2 border-blue-500 text-blue-600' : 'text-gray-500'}`}
        >
          Claims
        </button>
        <button 
          onClick={() => setInsuranceView('micro')} 
          className={`px-4 py-2 font-small ${insuranceView === 'micro' ? 'border-b-2 border-blue-500 text-blue-600' : 'text-gray-500'}`}
        >
          Solutions
        </button>
      </div>

      {insuranceView === 'products' && (
        <div className="mt-6">
          <h3 className="text-lg font-semibold mb-4">Available Insurance Products</h3>
          
          <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
            <button 
              onClick={() => setProductCategory('health')} 
              className={`p-4 rounded-lg text-left ${productCategory === 'health' ? 'bg-blue-50 border border-blue-200' : 'bg-gray-50'}`}
            >
              <h4 className="font-medium">Health Insurance</h4>
              <p className="text-sm text-gray-600">Medical coverage</p>
            </button>
            <button 
              onClick={() => setProductCategory('life')} 
              className={`p-4 rounded-lg text-left ${productCategory === 'life' ? 'bg-blue-50 border border-blue-200' : 'bg-gray-50'}`}
            >
              <h4 className="font-medium">Life Insurance</h4>
              <p className="text-sm text-gray-600">Financial protection</p>
            </button>
            <button 
              onClick={() => setProductCategory('property')} 
              className={`p-4 rounded-lg text-left ${productCategory === 'property' ? 'bg-blue-50 border border-blue-200' : 'bg-gray-50'}`}
            >
              <h4 className="font-medium">Property Insurance</h4>
              <p className="text-sm text-gray-600">Home protection</p>
            </button>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            {getProductsByCategory().map(product => (
              <div key={product.id} className="border rounded-lg p-4 hover:shadow-md transition">
                <div className="flex justify-between items-start mb-2">
                  <h4 className="font-medium">{product.name}</h4>
                  <span className="text-xs bg-green-100 text-green-800 px-2 py-1 rounded">Popular</span>
                </div>
                <p className="text-sm text-gray-600 mb-3">{product.description}</p>
                <div className="space-y-2 text-sm mb-4">
                  <div className="flex justify-between">
                    <span className="text-gray-600">Premium:</span>
                    <span className="font-medium">{product.premium}</span>
                  </div>
                  <div className="flex justify-between">
                    <span className="text-gray-600">Coverage:</span>
                    <span className="font-medium">{product.coverage}</span>
                  </div>
                  <div className="flex justify-between">
                    <span className="text-gray-600">Term:</span>
                    <span className="font-medium">{product.term}</span>
                  </div>
                </div>
                <button 
                  onClick={() => handlePurchase(product)} 
                  className="w-full py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition"
                >
                  Get Coverage
                </button>
              </div>
            ))}
          </div>
        </div>
      )}

      {insuranceView === 'micro' && (
        <div className="mt-6">
          <h3 className="text-lg font-semibold mb-4">Micro Protection Solutions</h3>
          
          <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
            <button 
              onClick={() => setMicroCategory('insurance')} 
              className={`p-4 rounded-lg text-left ${microCategory === 'insurance' ? 'bg-blue-50 border border-blue-200' : 'bg-gray-50'}`}
            >
              <h4 className="font-medium">Micro-Insurance</h4>
              <p className="text-sm text-gray-600">Pay-as-you-go</p>
            </button>
            <button 
              onClick={() => setMicroCategory('pensions')} 
              className={`p-4 rounded-lg text-left ${microCategory === 'pensions' ? 'bg-blue-50 border border-blue-200' : 'bg-gray-50'}`}
            >
              <h4 className="font-medium">Micro-Pensions</h4>
              <p className="text-sm text-gray-600">Small savings</p>
            </button>
            <button 
              onClick={() => setMicroCategory('investment')} 
              className={`p-4 rounded-lg text-left ${microCategory === 'investment' ? 'bg-blue-50 border border-blue-200' : 'bg-gray-50'}`}
            >
              <h4 className="font-medium">Micro-Investments</h4>
              <p className="text-sm text-gray-600">Grow your money</p>
            </button>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            {getMicroProductsByCategory().map(product => (
              <div key={product.id} className="border rounded-lg p-4 hover:shadow-md transition">
                <div className="flex justify-between items-start mb-2">
                  <h4 className="font-medium">{product.name}</h4>
                  <span className="text-xs bg-green-100 text-green-800 px-2 py-1 rounded">Flexible</span>
                </div>
                <p className="text-sm text-gray-600 mb-3">{product.description}</p>
                <div className="space-y-2 text-sm mb-4">
                  <div className="flex justify-between">
                    <span className="text-gray-600">Payment:</span>
                    <span className="font-medium">{product.payment}</span>
                  </div>
                  <div className="flex justify-between">
                    <span className="text-gray-600">Benefit:</span>
                    <span className="font-medium">{product.coverage}</span>
                  </div>
                </div>
                <button 
                  onClick={() => handleMicroPurchase(product)} 
                  className="w-full py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition"
                >
                  {microCategory === 'pensions' ? 'Start Saving' : microCategory === 'investment' ? 'Start Investing' : 'Get Covered'}
                </button>
              </div>
            ))}
          </div>
        </div>
      )}

      {insuranceView === 'policies' && (
        <div className="mt-6">
          <div className="flex justify-between items-center mb-4">
            <h3 className="text-lg font-semibold">My Coverage</h3>
            <div className="flex space-x-2">
              <button 
                onClick={() => setInsuranceView('products')} 
                className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition"
              >
                Get New Policy
              </button>
              <button 
                onClick={() => setInsuranceView('micro')} 
                className="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition"
              >
                Micro Solutions
              </button>
            </div>
          </div>

          {user.insurancePolicies.length > 0 ? (
            <div className="space-y-4">
              {user.insurancePolicies.map(policy => (
                <div key={policy.id} className="border rounded-lg p-4">
                  <div className="flex justify-between items-start mb-3">
                    <div>
                      <h4 className="font-medium capitalize">{policy.type}</h4>
                      <p className="text-sm text-gray-600">{policy.provider}</p>
                    </div>
                    <span className="text-xs bg-green-100 text-green-800 px-2 py-1 rounded">Active</span>
                  </div>
                  <div className="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mb-3">
                    <div>
                      <p className="text-gray-600">Premium</p>
                      <p className="font-medium">₦{policy.premium.toLocaleString()}/year</p>
                    </div>
                    <div>
                      <p className="text-gray-600">Coverage</p>
                      <p className="font-medium">₦{policy.coverage.toLocaleString()}</p>
                    </div>
                    <div>
                      <p className="text-gray-600">Next Payment</p>
                      <p className="font-medium">{policy.nextPayment}</p>
                    </div>
                  </div>
                  <div className="flex flex-wrap gap-2 mt-3">
                    <button 
                      onClick={() => handlePremiumPayment(policy)} 
                      className="px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 transition"
                    >
                      Pay Premium
                    </button>
                    <button 
                      onClick={() => setCurrentClaimPolicy(policy)} 
                      className="px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition"
                    >
                      File Claim
                    </button>
                    <button 
                      onClick={() => handlePolicyDetails(policy)} 
                      className="px-3 py-1 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 transition"
                    >
                      Details
                    </button>
                  </div>
                </div>
              ))}
            </div>
          ) : (
            <div className="text-center py-8">
              <p className="text-gray-500 mb-4">No active policies</p>
              <button 
                onClick={() => setInsuranceView('products')} 
                className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition"
              >
                Browse Products
              </button>
            </div>
          )}
        </div>
      )}

      {insuranceView === 'claims' && (
        <div className="mt-6">
          <h3 className="text-lg font-semibold mb-4">My Claims</h3>
          
          {currentClaimPolicy && (
            <div className="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
              <div className="flex justify-between items-center mb-2">
                <h4 className="font-medium">New Claim for {currentClaimPolicy.type}</h4>
                <button 
                  onClick={() => setCurrentClaimPolicy(null)} 
                  className="text-gray-500 hover:text-gray-700"
                >
                  ×
                </button>
              </div>
              <div className="space-y-3">
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-1">Claim Amount (₦)</label>
                  <input 
                    type="number" 
                    value={claimAmount} 
                    onChange={(e) => setClaimAmount(e.target.value)} 
                    className="w-full p-2 border rounded" 
                    placeholder="Enter amount" 
                  />
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-1">Description</label>
                  <textarea 
                    value={claimDescription} 
                    onChange={(e) => setClaimDescription(e.target.value)} 
                    className="w-full p-2 border rounded" 
                    rows="3" 
                    placeholder="Describe your claim"
                  ></textarea>
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-1">Upload Documents</label>
                  <input 
                    type="file" 
                    onChange={handleFileUpload} 
                    className="w-full p-2 border rounded" 
                    multiple 
                  />
                </div>
                <button 
                  onClick={submitClaim} 
                  className="w-full py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition"
                >
                  Submit Claim
                </button>
              </div>
            </div>
          )}
          
          {user.insuranceClaims.length > 0 ? (
            <div className="space-y-4">
              {user.insuranceClaims.map(claim => (
                <div key={claim.id} className="border rounded-lg p-4">
                  <div className="flex justify-between items-start mb-2">
                    <div>
                      <h4 className="font-medium">{claim.policyType} Claim</h4>
                      <p className="text-sm text-gray-600">#{claim.id}</p>
                    </div>
                    <span className="text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded">Pending</span>
                  </div>
                  <div className="grid grid-cols-2 md:grid-cols-3 gap-4 text-sm mb-3">
                    <div>
                      <p className="text-gray-600">Amount</p>
                      <p className="font-medium">₦{claim.amount.toLocaleString()}</p>
                    </div>
                    <div>
                      <p className="text-gray-600">Submitted</p>
                      <p className="font-medium">{claim.date}</p>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          ) : (
            <div className="text-center py-8">
              <p className="text-gray-500 mb-4">No claims submitted</p>
              {user.insurancePolicies.length > 0 ? (
                <button 
                  onClick={() => setInsuranceView('policies')} 
                  className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition"
                >
                  File a Claim
                </button>
              ) : (
                <button 
                  onClick={() => setInsuranceView('products')} 
                  className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition"
                >
                  Get Insurance First
                </button>
              )}
            </div>
          )}
        </div>
      )}
    </div>
  </div>
)}  
  
  {/* Disaster Alert Tab */}
  {activeTab === 'disaster' && (
    <div className="space-y-6">
      <div className="bg-white rounded-lg shadow-md p-6">
        <div className="flex justify-between items-center mb-6">
          <h3 className="text-xl font-semibold text-gray-800">{t('disaster_alerts')}</h3>
          <div className="flex items-center space-x-2">
          <span className={`px-2 py-1 text-xs rounded-full ${
            disasterAlerts.some(a => a.active) 
              ? 'bg-red-100 text-red-800 alarm-active' 
              : 'bg-green-100 text-green-800'
          }`}>
            {disasterAlerts.some(a => a.active) ? t('active_alerts') : t('all_clear')}
          </span>
  <button 
    onClick={() => {
      // Play alarm sound
      audio.play().catch(e => console.log("Audio play failed:", e));
      
      // Simulate new alert
      const newAlert = {
        id: `alert-${Date.now()}`,
        type: ['flood', 'earthquake', 'extremeWeather', 'fire'][Math.floor(Math.random() * 4)],
        title: ['Severe Storm Warning', 'Tsunami Alert', 'Wildfire Warning', 'Tornado Watch'][Math.floor(Math.random() * 4)],
        severity: ['low', 'medium', 'high'][Math.floor(Math.random() * 3)],
        issued: new Date().toISOString(),
        areas: ['Your Area', 'Nearby Regions'],
        description: 'This is a test alert to demonstrate the system',
        instructions: 'This is only a test. No action required.',
        active: true
      };
      setDisasterAlerts([newAlert, ...disasterAlerts]);
      
      // Optional: Vibrate device if supported
      if ("vibrate" in navigator) {
        navigator.vibrate([200, 100, 200]);
      }
    }}
    className="px-3 py-1 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 transition"
  >
    {t('test_alert')}
  </button>

  <div className="flex items-center space-x-2">
    {/* Existing indicator and test button */}
    {disasterAlerts.some(a => a.active) && (
      <button 
        onClick={() => {
          audio.pause();
          audio.currentTime = 0;
          if ("vibrate" in navigator) {
            navigator.vibrate(0); // Stop vibration
          }
        }}
        className="px-3 py-1 bg-red-600 text-white text-sm rounded-md hover:bg-red-700 transition"
      >
        Stop
      </button>
    )}
  </div>
          </div>
        </div>
        
        {/* Current Alerts */}
        <div className="mb-8">
          <h4 className="font-medium mb-4 text-gray-700">Active Alerts in Your Area</h4>
          {disasterAlerts.filter(a => a.active).length > 0 ? (
            <div className="space-y-4">
              {disasterAlerts.filter(a => a.active).map(alert => (
                <div 
                  key={alert.id} 
                  className={`p-4 rounded-lg border ${
                    alert.severity === 'high' ? 'bg-red-50 border-red-200' :
                    alert.severity === 'medium' ? 'bg-yellow-50 border-yellow-200' :
                    'bg-blue-50 border-blue-200'
                  }`}
                >
                  <div className="flex justify-between items-start mb-3">
                    <div>
                      <h5 className={`font-medium ${
                        alert.severity === 'high' ? 'text-red-800' :
                        alert.severity === 'medium' ? 'text-yellow-800' :
                        'text-blue-800'
                      }`}>
                        {alert.title}
                      </h5>
                      <p className="text-sm text-gray-600">{alert.description}</p>
                    </div>
                    <span className={`text-xs px-2 py-1 rounded-full ${
                      alert.severity === 'high' ? 'bg-red-100 text-red-800' :
                      alert.severity === 'medium' ? 'bg-yellow-100 text-yellow-800' :
                      'bg-blue-100 text-blue-800'
                    }`}>
                      {alert.severity === 'high' ? 'High Priority' :
                      alert.severity === 'medium' ? 'Medium Priority' : 'Low Priority'}
                    </span>
                  </div>
                  
                  <div className="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-700 mb-3">
                    <div>
                      <p><span className="font-medium">Issued:</span> {new Date(alert.issued).toLocaleString()}</p>
                      <p><span className="font-medium">Affected Areas:</span> {alert.areas.join(', ')}</p>
                    </div>
                    <div className="bg-white p-2 rounded border">
                      <p className="font-medium text-gray-800">Recommended Actions:</p>
                      <p>{alert.instructions}</p>
                    </div>
                  </div>
                  
                  <div className="flex justify-between items-center">
                    <button 
                      onClick={() => {
                        // Mark as read
                        setDisasterAlerts(disasterAlerts.map(a => 
                          a.id === alert.id ? {...a, active: false} : a
                        ));
                      }}
                      className="text-sm text-blue-600 hover:text-blue-800"
                    >
                      Mark as Resolved
                    </button>
                    <button 
                      onClick={() => {
                        // Share alert
                        const shareText = `${alert.title}\n\n${alert.description}\n\nAffected Areas: ${alert.areas.join(', ')}\n\nInstructions: ${alert.instructions}`;
                        if (navigator.share) {
                          navigator.share({
                            title: alert.title,
                            text: shareText
                          });
                        } else {
                          alert('Share this alert:\n\n' + shareText);
                        }
                      }}
                      className="px-3 py-1 bg-gray-100 text-gray-700 text-sm rounded hover:bg-gray-200 transition"
                    >
                      Share Alert
                    </button>
                  </div>
                </div>
              ))}
            </div>
          ) : (
            <div className="p-8 text-center bg-gray-50 rounded-lg">
              <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12 mx-auto text-green-500 mb-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              <p className="text-gray-600">No active alerts in your area</p>
            </div>
          )}
        </div>

        {/* Alert Settings */}
        <div className="p-4 border rounded-lg bg-gray-50">
          <h4 className="font-medium mb-4 text-gray-700">Alert Preferences</h4>
          <div className="space-y-4">
            <div className="flex items-center justify-between">
              <label className="text-gray-700">Receive Emergency Alerts</label>
              <label className="relative inline-flex items-center cursor-pointer">
                <input 
                  type="checkbox" 
                  className="sr-only peer" 
                  checked={alertPreferences.receiveAlerts}
                  onChange={() => setAlertPreferences({
                    ...alertPreferences,
                    receiveAlerts: !alertPreferences.receiveAlerts
                  })}
                />
                <div className="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
              </label>
            </div>
            
            <div>
              <label className="block text-gray-700 mb-2">Alert Types</label>
              <div className="grid grid-cols-2 gap-3">
                {Object.entries(alertPreferences.alertTypes).map(([type, enabled]) => (
                  <label key={type} className="flex items-center space-x-2">
                    <input 
                      type="checkbox" 
                      className="form-checkbox h-5 w-5 text-blue-600 rounded"
                      checked={enabled}
                      onChange={() => setAlertPreferences({
                        ...alertPreferences,
                        alertTypes: {
                          ...alertPreferences.alertTypes,
                          [type]: !enabled
                        }
                      })}
                    />
                    <span className="text-gray-700 capitalize">
                      {type === 'extremeWeather' ? 'Extreme Weather' : type}
                    </span>
                  </label>
                ))}
              </div>
            </div>
            
            <div>
              <label className="block text-gray-700 mb-2">Notification Methods</label>
              <div className="grid grid-cols-2 gap-3">
                {Object.entries(alertPreferences.notificationMethods).map(([method, enabled]) => (
                  <label key={method} className="flex items-center space-x-2">
                    <input 
                      type="checkbox" 
                      className="form-checkbox h-5 w-5 text-blue-600 rounded"
                      checked={enabled}
                      onChange={() => setAlertPreferences({
                        ...alertPreferences,
                        notificationMethods: {
                          ...alertPreferences.notificationMethods,
                          [method]: !enabled
                        }
                      })}
                    />
                    <span className="text-gray-700 capitalize">
                      {method === 'push' ? 'Push Notification' : 
                      method === 'sms' ? 'SMS' : 
                      method === 'voice' ? 'Voice Call' : 'Email'}
                    </span>
                  </label>
                ))}
              </div>
            </div>
          </div>
          
          <button 
            onClick={() => alert('Preferences saved!')}
            className="mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition"
          >
            Save Preferences
          </button>
        </div>

        {/* Emergency Resources */}
        <div className="mt-8">
          <h4 className="font-medium mb-4 text-gray-700">Emergency Resources</h4>
          <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
            <button 
              onClick={() => alert('Emergency contacts:\n\nPolice: 112\nAmbulance: 119\nFire: 110')}
              className="p-4 bg-white rounded-lg border hover:bg-blue-50 transition flex flex-col items-center"
            >
              <div className="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 mb-2">
                <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                </svg>
              </div>
              <span className="text-sm text-center">{t('emergency_contacts')}</span>
            </button>
            
            <button 
              onClick={() => alert('Nearest hospitals:\n\nGeneral Hospital Lagos\nSt. Nicholas Hospital\nReddington Hospital')}
              className="p-4 bg-white rounded-lg border hover:bg-blue-50 transition flex flex-col items-center"
            >
              <div className="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 mb-2">
                <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
                </svg>
              </div>
              <span className="text-sm text-center">{t('nearest_hospitals')}</span>
            </button>
            
            <button 
              onClick={() => alert('Shelter locations:\n\nNational Stadium Lagos\nLagos City Hall\nCommunity Center Yaba')}
              className="p-4 bg-white rounded-lg border hover:bg-blue-50 transition flex flex-col items-center"
            >
              <div className="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 mb-2">
                <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                </svg>
              </div>
              <span className="text-sm text-center">{t('shelter_locations')}</span>
            </button>
            
            <button 
              onClick={() => alert('Disaster preparedness information will be shown here')}
              className="p-4 bg-white rounded-lg border hover:bg-blue-50 transition flex flex-col items-center"
            >
              <div className="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 mb-2">
                <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                </svg>
              </div>
              <span className="text-sm text-center">{t('disaster_preparedness')}</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  )}
              </div>
            </main>

            {/* Modals */}
            
            {/* Transfer Modal */}
            {transferModalOpen && (
              <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                <div className="bg-white rounded-lg shadow-xl p-6 w-full max-w-md">
                  <h3 className="text-xl font-bold mb-4">{t('make_transfer')}</h3>
                  <div className="space-y-4">
                    <div>
                      <label className="block text-gray-700 mb-1">{t('to')}</label>
                      <input
                        type="text"
                        value={transferDetails.recipient}
                        onChange={(e) => setTransferDetails({...transferDetails, recipient: e.target.value})}
                        className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                        placeholder={t('enter_recipient')}
                      />
                    </div>
                    <div>
                      <label className="block text-gray-700 mb-1">{t('amount')} (₦)</label>
                      <input
                        type="number"
                        value={transferDetails.amount}
                        onChange={(e) => setTransferDetails({...transferDetails, amount: e.target.value})}
                        className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                        placeholder={t('enter_amount')}
                      />
                    </div>
                    <div>
                      <label className="block text-gray-700 mb-1">{t('purpose')} ({t('optional')})</label>
                      <input
                        type="text"
                        value={transferDetails.purpose}
                        onChange={(e) => setTransferDetails({...transferDetails, purpose: e.target.value})}
                        className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                        placeholder={t('purpose')}
                      />
                    </div>
                  </div>
                  <div className="flex justify-end space-x-3 mt-6">
                    <button
                      onClick={() => setTransferModalOpen(false)}
                      className="px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition duration-300"
                    >
                      {t('cancel')}
                    </button>
                    <button
                      onClick={handleTransfer}
                      className="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition duration-300"
                    >
                      {t('send')}
                    </button>
                  </div>
                </div>
              </div>
            )}

            {/* Bill Payment Modal */}
            {billPaymentModal && (
              <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                <div className="bg-white rounded-lg shadow-xl p-6 w-full max-w-md">
                  <h3 className="text-xl font-bold mb-4">{t('bill_payment')}</h3>
                  <div className="space-y-4">
                    <div>
                      <label className="block text-gray-700 mb-1">{t('select_biller')}</label>
                      <select
                        value={billPayment.biller}
                        onChange={(e) => setBillPayment({...billPayment, biller: e.target.value})}
                        className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                      >
                        <option value="">Select Biller</option>
                        {billers.map(biller => (
                          <option key={biller.name} value={biller.name}>{biller.name}</option>
                        ))}
                      </select>
                    </div>
                    <div>
                      <label className="block text-gray-700 mb-1">{t('customer_id')}</label>
                      <input
                        type="text"
                        value={billPayment.customerId}
                        onChange={(e) => setBillPayment({...billPayment, customerId: e.target.value})}
                        className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                        placeholder="Enter customer ID"
                      />
                    </div>
                    <div>
                      <label className="block text-gray-700 mb-1">{t('amount')} (₦)</label>
                      <input
                        type="number"
                        value={billPayment.amount}
                        onChange={(e) => setBillPayment({...billPayment, amount: e.target.value})}
                        className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                        placeholder="Enter amount"
                      />
                    </div>
                  </div>
                  <div className="flex justify-end space-x-3 mt-6">
                    <button
                      onClick={() => setBillPaymentModal(false)}
                      className="px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition duration-300"
                    >
                      {t('cancel')}
                    </button>
                    <button
                      onClick={handleBillPayment}
                      className="px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 transition duration-300"
                    >
                      {t('pay_now')}
                    </button>
                  </div>
                </div>
              </div>
            )}

            {/* Airtime Modal */}
            {airtimeModal && (
              <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                <div className="bg-white rounded-lg shadow-xl p-6 w-full max-w-md">
                  <h3 className="text-xl font-bold mb-4">{t('airtime_topup')}</h3>
                  <div className="space-y-4">
                    <div>
                      <label className="block text-gray-700 mb-1">{t('select_network')}</label>
                      <select
                        value={airtimeDetails.network}
                        onChange={(e) => setAirtimeDetails({...airtimeDetails, network: e.target.value})}
                        className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                      >
                        <option value="">Select Network</option>
                        {networks.map(network => (
                          <option key={network} value={network}>{network}</option>
                        ))}
                      </select>
                    </div>
                    <div>
                      <label className="block text-gray-700 mb-1">{t('phone_number')}</label>
                      <input
                        type="tel"
                        value={airtimeDetails.phone}
                        onChange={(e) => setAirtimeDetails({...airtimeDetails, phone: e.target.value})}
                        className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                        placeholder="08012345678"
                      />
                    </div>
                    <div>
                      <label className="block text-gray-700 mb-1">{t('amount')} (₦)</label>
                      <div className="grid grid-cols-3 gap-2 mb-2">
                        {[100, 200, 500, 1000, 2000, 5000].map(amount => (
                          <button
                            key={amount}
                            onClick={() => setAirtimeDetails({...airtimeDetails, amount: amount.toString()})}
                            className="px-3 py-2 border rounded-md hover:bg-gray-50 transition"
                          >
                            ₦{amount}
                          </button>
                        ))}
                      </div>
                      <input
                        type="number"
                        value={airtimeDetails.amount}
                        onChange={(e) => setAirtimeDetails({...airtimeDetails, amount: e.target.value})}
                        className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                        placeholder="Enter custom amount"
                      />
                    </div>
                  </div>
                  <div className="flex justify-end space-x-3 mt-6">
                    <button
                      onClick={() => setAirtimeModal(false)}
                      className="px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition duration-300"
                    >
                      {t('cancel')}
                    </button>
                    <button
                      onClick={handleAirtimeTopup}
                      className="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition duration-300"
                    >
                      {t('buy_now')}
                    </button>
                  </div>
                </div>
              </div>
            )}

            {/* Loan Application Modal */}
            {loanModal && (
              <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                <div className="bg-white rounded-lg shadow-xl p-6 w-full max-w-md">
                  <h3 className="text-xl font-bold mb-4">{t('loan_application')}</h3>
                  <div className="space-y-4">
                    <div>
                      <label className="block text-gray-700 mb-1">Loan Type</label>
                      <select
                        value={loanApplication.type}
                        onChange={(e) => setLoanApplication({...loanApplication, type: e.target.value})}
                        className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                      >
                        <option value="">Select Loan Type</option>
                        <option value="personal">Personal Loan</option>
                        <option value="business">Business Loan</option>
                        <option value="emergency">Emergency Loan</option>
                      </select>
                    </div>
                    <div>
                      <label className="block text-gray-700 mb-1">{t('loan_amount')} (₦)</label>
                      <input
                        type="number"
                        value={loanApplication.amount}
                        onChange={(e) => setLoanApplication({...loanApplication, amount: e.target.value})}
                        className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                        placeholder="Enter loan amount"
                      />
                    </div>
                    <div>
                      <label className="block text-gray-700 mb-1">{t('loan_purpose')}</label>
                      <input
                        type="text"
                        value={loanApplication.purpose}
                        onChange={(e) => setLoanApplication({...loanApplication, purpose: e.target.value})}
                        className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                        placeholder="Purpose of loan"
                      />
                    </div>
                    <div>
                      <label className="block text-gray-700 mb-1">{t('monthly_income')} (₦)</label>
                      <input
                        type="number"
                        value={loanApplication.income}
                        onChange={(e) => setLoanApplication({...loanApplication, income: e.target.value})}
                        className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                        placeholder="Enter monthly income"
                      />
                    </div>
                  </div>
                  <div className="flex justify-end space-x-3 mt-6">
                    <button
                      onClick={() => setLoanModal(false)}
                      className="px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition duration-300"
                    >
                      {t('cancel')}
                    </button>
                    <button
                      onClick={handleLoanApplication}
                      className="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition duration-300"
                    >
                      {t('apply_loan')}
                    </button>
                  </div>
                </div>
              </div>
            )}

            {/* Investment Modal */}
            {investmentModal && (
              <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                <div className="bg-white rounded-lg shadow-xl p-6 w-full max-w-md">
                  <h3 className="text-xl font-bold mb-4">{t('investment_options')}</h3>
                  <div className="space-y-4">
                    <div>
                      <label className="block text-gray-700 mb-1">Investment Type</label>
                      <select
                        value={investmentDetails.type}
                        onChange={(e) => setInvestmentDetails({...investmentDetails, type: e.target.value})}
                        className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                      >
                        <option value="">Select Investment Type</option>
                        <option value="treasury">Treasury Bills</option>
                        <option value="mutual_funds">Mutual Funds</option>
                        <option value="fixed_deposit">Fixed Deposit</option>
                        <option value="stocks">Stocks</option>
                      </select>
                    </div>
                    <div>
                      <label className="block text-gray-700 mb-1">{t('invest_amount')} (₦)</label>
                      <input
                        type="number"
                        value={investmentDetails.amount}
                        onChange={(e) => setInvestmentDetails({...investmentDetails, amount: e.target.value})}
                        className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                        placeholder="Enter investment amount"
                      />
                    </div>
                    <div>
                      <label className="block text-gray-700 mb-1">Duration</label>
                      <select
                        value={investmentDetails.duration}
                        onChange={(e) => setInvestmentDetails({...investmentDetails, duration: e.target.value})}
                        className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                      >
                        <option value="">Select Duration</option>
                        <option value="3">3 Months</option>
                        <option value="6">6 Months</option>
                        <option value="12">12 Months</option>
                        <option value="24">24 Months</option>
                      </select>
                    </div>
                  </div>
                  <div className="flex justify-end space-x-3 mt-6">
                    <button
                      onClick={() => setInvestmentModal(false)}
                      className="px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition duration-300"
                    >
                      {t('cancel')}
                    </button>
                    <button
                      onClick={handleInvestment}
                      className="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition duration-300"
                    >
                      {t('invest_now')}
                    </button>
                  </div>
                </div>
              </div>
            )}

            {/* Remittance Modal */}
            {remittanceModal && (
              <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                <div className="bg-white rounded-lg shadow-xl p-6 w-full max-w-md">
                  <h3 className="text-xl font-bold mb-4">{t('send_money_abroad')}</h3>
                  <div className="space-y-4">
                    <div>
                      <label className="block text-gray-700 mb-1">{t('recipient_country')}</label>
                      <select
                        value={remittanceDetails.country}
                        onChange={(e) => setRemittanceDetails({...remittanceDetails, country: e.target.value})}
                        className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                      >
                        <option value="">Select Country</option>
                        {countries.map(country => (
                          <option key={country.code} value={country.code}>
                            {country.name} ({country.code})
                          </option>
                        ))}
                      </select>
                    </div>
                    <div>
                      <label className="block text-gray-700 mb-1">Recipient Name</label>
                      <input
                        type="text"
                        value={remittanceDetails.recipient}
                        onChange={(e) => setRemittanceDetails({...remittanceDetails, recipient: e.target.value})}
                        className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                        placeholder="Enter recipient name"
                      />
                    </div>
                    <div>
                      <label className="block text-gray-700 mb-1">{t('amount')} (₦)</label>
                      <input
                        type="number"
                        value={remittanceDetails.amount}
                        onChange={(e) => setRemittanceDetails({...remittanceDetails, amount: e.target.value})}
                        className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                        placeholder="Enter amount in Naira"
                      />
                      {remittanceDetails.country && remittanceDetails.amount && (
                        <p className="text-sm text-gray-600 mt-1">
                          Recipient will receive: {remittanceDetails.country} {(parseFloat(remittanceDetails.amount) / (countries.find(c => c.code === remittanceDetails.country)?.rate || 1)).toFixed(2)}
                        </p>
                      )}
                    </div>
                    <div>
                      <label className="block text-gray-700 mb-1">{t('purpose')}</label>
                      <select
                        value={remittanceDetails.purpose}
                        onChange={(e) => setRemittanceDetails({...remittanceDetails, purpose: e.target.value})}
                        className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                      >
                        <option value="">Select Purpose</option>
                        <option value="family_support">Family Support</option>
                        <option value="education">Education</option>
                        <option value="business">Business</option>
                        <option value="medical">Medical</option>
                        <option value="other">Other</option>
                      </select>
                    </div>
                  </div>
                  <div className="flex justify-end space-x-3 mt-6">
                    <button
                      onClick={() => setRemittanceModal(false)}
                      className="px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition duration-300"
                    >
                      {t('cancel')}
                    </button>
                    <button
                      onClick={() => {
                        if (!remittanceDetails.country || !remittanceDetails.recipient || !remittanceDetails.amount) {
                          alert('Please fill all fields');
                          return;
                        }
                        
                        const amount = parseFloat(remittanceDetails.amount);
                        const fee = amount * 0.02; // 2% fee
                        const total = amount + fee;
                        
                        if (total > user.balance) {
                          alert(t('insufficient_funds'));
                          return;
                        }
                        
                        addTransaction({
                          type: "debit",
                          amount: total,
                          description: `Remittance to ${remittanceDetails.recipient} (${remittanceDetails.country})`,
                          recipient: remittanceDetails.recipient
                        });
                        
                        setRemittanceModal(false);
                        setRemittanceDetails({ country: '', recipient: '', amount: '', purpose: '' });
                        alert(t('remittance_sent'));
                      }}
                      className="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition duration-300"
                    >
                      {t('send_remittance')}
                    </button>
                  </div>
                </div>
              </div>
            )}

            {/* Fund Wallet Modal */}
            {fundWalletModal && (
              <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                <div className="bg-white rounded-lg shadow-xl p-6 w-full max-w-md">
                  <h3 className="text-xl font-bold mb-4">{t('fund_wallet')}</h3>
                  <div className="space-y-4">
                    <div>
                      <label className="block text-gray-700 mb-1">{t('select_bank')}</label>
                      <select className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                        <option value="">Select Bank</option>
                        {banks.map(bank => (
                          <option key={bank.code} value={bank.code}>{bank.name}</option>
                        ))}
                      </select>
                    </div>
                    <div>
                      <label className="block text-gray-700 mb-1">{t('amount')} (₦)</label>
                      <input
                        type="number"
                        className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                        placeholder="Enter amount to fund"
                      />
                    </div>
                  </div>
                  <div className="flex justify-end space-x-3 mt-6">
                    <button
                      onClick={() => setFundWalletModal(false)}
                      className="px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition duration-300"
                    >
                      {t('cancel')}
                    </button>
                    <button
                      onClick={() => {
                        setFundWalletModal(false);
                        alert(t('funding_success'));
                      }}
                      className="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition duration-300"
                    >
                      {t('fund_now')}
                    </button>
                  </div>
                </div>
              </div>
            )}

            {/* Add Bank Modal */}
            {addBankModal && (
              <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                <div className="bg-white rounded-lg shadow-xl p-6 w-full max-w-md">
                  <h3 className="text-xl font-bold mb-4">{t('add_bank')}</h3>
                  <div className="space-y-4">
                    <div>
                      <label className="block text-gray-700 mb-1">{t('bank_name')}</label>
                      <select className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                        <option value="">Select Bank</option>
                        {banks.map(bank => (
                          <option key={bank.code} value={bank.name}>{bank.name}</option>
                        ))}
                      </select>
                    </div>
                    <div>
                      <label className="block text-gray-700 mb-1">{t('account_number')}</label>
                      <input
                        type="text"
                        className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                        placeholder="Enter account number"
                      />
                    </div>
                    <div>
                      <label className="block text-gray-700 mb-1">{t('account_name')}</label>
                      <input
                        type="text"
                        className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                        placeholder="Account name will be auto-filled"
                        disabled
                      />
                    </div>
                  </div>
                  <div className="flex justify-end space-x-3 mt-6">
                    <button
                      onClick={() => setAddBankModal(false)}
                      className="px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition duration-300"
                    >
                      {t('cancel')}
                    </button>
                    <button
                      onClick={() => {
                        setAddBankModal(false);
                        alert(t('bank_added'));
                      }}
                      className="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition duration-300"
                    >
                      {t('add_now')}
                    </button>
                  </div>
                </div>
              </div>
            )}

            {/* USSD Modal */}
            {ussdModalOpen && (
              <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                <div className="bg-white rounded-lg shadow-xl p-6 w-full max-w-md">
                  <div className="flex justify-between items-center mb-4">
                    <h3 className="text-xl font-bold">{t('simulate_ussd')}</h3>
                    {ussdSession.active && (
                      <span className="text-xs bg-green-100 text-green-800 px-2 py-1 rounded">
                        Session Active
                      </span>
                    )}
                  </div>
                  <div className="space-y-4">
                    <div>
                      <label className="block text-gray-700 mb-1">
                        {ussdSession.active ? 'Enter your choice:' : 'USSD Code'}
                      </label>
                      <input
                        type="text"
                        value={ussdCode}
                        onChange={(e) => setUssdCode(e.target.value)}
                        className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                        placeholder={ussdSession.active ? "Enter option number" : "Enter USSD code (e.g., *389#)"}
                      />
                    </div>
                    {ussdResponse && (
                      <div className="p-3 bg-gray-100 rounded-md">
                        <p className="text-sm font-mono whitespace-pre-line">{ussdResponse}</p>
                      </div>
                    )}
                    {ussdSession.active && (
                      <div className="text-xs text-gray-600">
                        <p>💡 Current menu: {ussdSession.currentMenu}</p>
                        <p>Type your choice and click Send</p>
                      </div>
                    )}
                  </div>
                  <div className="flex justify-end space-x-3 mt-6">
                    <button
                      onClick={() => {
                        setUssdModalOpen(false);
                        setUssdCode('');
                        setUssdResponse('');
                        setUssdSession({ active: false, currentMenu: 'main', history: [], input: '' });
                      }}
                      className="px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition duration-300"
                    >
                      {ussdSession.active ? 'End Session' : t('close')}
                    </button>
                    <button
                      onClick={handleUSSDCommand}
                      className="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition duration-300"
                    >
                      Send
                    </button>
                  </div>
                </div>
              </div>
            )}

            {/* SMS Modal */}
            {smsModalOpen && (
              <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                <div className="bg-white rounded-lg shadow-xl p-6 w-full max-w-md">
                  <h3 className="text-xl font-bold mb-4">{t('simulate_sms')}</h3>
                  <div className="space-y-4">
                    <div>
                      <label className="block text-gray-700 mb-1">SMS Command</label>
                      <input
                        type="text"
                        value={smsCommand}
                        onChange={(e) => setSmsCommand(e.target.value)}
                        className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                        placeholder="Enter SMS command (e.g., BAL)"
                      />
                    </div>
                    <div>
                      <label className="block text-gray-700 mb-1">Send to</label>
                      <input
                        type="text"
                        value="389"
                        disabled
                        className="w-full px-3 py-2 border rounded-md bg-gray-100"
                      />
                    </div>
                  </div>
                  <div className="flex justify-end space-x-3 mt-6">
                    <button
                      onClick={() => {
                        setSmsModalOpen(false);
                        setSmsCommand('');
                      }}
                      className="px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition duration-300"
                    >
                      {t('close')}
                    </button>
                    <button
                      onClick={() => {
                        let response = '';
                        if (smsCommand.toUpperCase() === 'BAL') {
                          response = `Your ONPIN wallet balance is ₦${user.balance.toLocaleString()}`;
                        } else {
                          response = 'Invalid SMS command';
                        }
                        alert(response);
                      }}
                      className="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition duration-300"
                    >
                      Send SMS
                    </button>
                  </div>
                </div>
              </div>
            )}

            {/* Transaction Detail Modal */}
            {transactionDetail && (
              <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                <div className="bg-white rounded-lg shadow-xl p-6 w-full max-w-md">
                  <h3 className="text-xl font-bold mb-4">{t('transaction_details')}</h3>
                  <div className="space-y-3">
                    <div className="flex justify-between">
                      <span className="text-gray-600">{t('transaction_id')}:</span>
                      <span className="font-mono text-sm">{transactionDetail.id}</span>
                    </div>
                    <div className="flex justify-between">
                      <span className="text-gray-600">Type:</span>
                      <span className={`capitalize ${
                        transactionDetail.type === 'credit' ? 'text-green-600' : 'text-red-600'
                      }`}>
                        {transactionDetail.type}
                      </span>
                    </div>
                    <div className="flex justify-between">
                      <span className="text-gray-600">{t('amount')}:</span>
                      <span className="font-semibold">₦{transactionDetail.amount.toLocaleString()}</span>
                    </div>
                    <div className="flex justify-between">
                      <span className="text-gray-600">{t('date')}:</span>
                      <span>{transactionDetail.date}</span>
                    </div>
                    <div className="flex justify-between">
                      <span className="text-gray-600">Description:</span>
                      <span>{transactionDetail.description}</span>
                    </div>
                    <div className="flex justify-between">
                      <span className="text-gray-600">{t('recipient')}:</span>
                      <span>{transactionDetail.recipient}</span>
                    </div>
                    <div className="flex justify-between">
                      <span className="text-gray-600">{t('status')}:</span>
                      <span className={`px-2 py-1 text-xs rounded ${
                        transactionDetail.status === 'completed' ? 'bg-green-100 text-green-800' :
                        transactionDetail.status === 'failed' ? 'bg-red-100 text-red-800' : 'bg-yellow-100 text-yellow-800'
                      }`}>
                        {t(transactionDetail.status)}
                      </span>
                    </div>
                  </div>
                  <div className="flex justify-end mt-6">
                    <button
                      onClick={() => setTransactionDetail(null)}
                      className="px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition duration-300"
                    >
                      {t('close')}
                    </button>
                  </div>
                </div>
              </div>
            )}

            {/* Biometric Scanning Modal */}
            {biometricScanning && (
              <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                <div className="bg-white rounded-lg shadow-xl p-6 w-full max-w-md text-center">
                  <h3 className="text-xl font-bold mb-4">
                    {biometricScanning === 'face' ? t('biometric_scan_face') :
                    biometricScanning === 'fingerprint' ? t('biometric_scan_finger') :
                    t('biometric_scan_voice')}
                  </h3>
                  <div className="biometric-scan-container mb-6">
                    <div className="relative">
                      <div className="w-32 h-32 mx-auto border-4 border-green-500 rounded-full flex items-center justify-center">
                        <div className="text-4xl">
                          {biometricScanning === 'face' ? '👤' :
                          biometricScanning === 'fingerprint' ? '👆' : '🎤'}
                        </div>
                      </div>
                      <div className="absolute inset-0 border-4 border-green-500 rounded-full biometric-scan"></div>
                    </div>
                  </div>
                  <p className="text-gray-600">
                    {biometricScanning === 'face' ? t('scan_face') :
                    biometricScanning === 'fingerprint' ? t('scan_fingerprint') :
                    t('speak_now')}
                  </p>
                  <div className="mt-4">
                    <div className="w-full bg-gray-200 rounded-full h-2">
                      <div className="bg-green-600 h-2 rounded-full progress-bar" style={{width: '60%'}}></div>
                    </div>
                    <p className="text-sm text-gray-500 mt-2">Scanning...</p>
                  </div>
                </div>
              </div>
            )}

            {/* Footer */}
            <footer className="bg-gray-800 text-white p-4 text-center">
              <p>© 2024 ONPIN - National Identity Wallet with AI Credit Scoring & Financial Services</p>
            </footer>
          </div>
        );
      }

      // Render the app
      ReactDOM.render(<DashboardApp />, document.getElementById('root'));
    </script>
  </body>
  </html>
