<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>ONPIN Identity Wallet - Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .biometric-icon {
      transition: all 0.3s ease;
    }
    .biometric-icon:hover {
      transform: scale(1.1);
    }
    .progress-bar {
      transition: width 0.5s ease;
    }
    .voice-command-active {
      animation: pulse 1.5s infinite;
    }
    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(74, 222, 128, 0.7); }
      70% { box-shadow: 0 0 0 10px rgba(74, 222, 128, 0); }
      100% { box-shadow: 0 0 0 0 rgba(74, 222, 128, 0); }
    }
    .language-selector {
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23334d5c'%3E%3Cpath d='M12 2a10 10 0 100 20 10 10 0 000-20zm0 18a8 8 0 110-16 8 8 0 010 16z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 0.5rem center;
      background-size: 1.5em;
    }
    .biometric-scan {
      animation: scan 2s infinite;
    }
    @keyframes scan {
      0% { transform: translateY(0); opacity: 0; }
      50% { opacity: 1; }
      100% { transform: translateY(100%); opacity: 0; }
    }
    /* Credit Score Gauge */
    .credit-gauge {
      position: relative;
      width: 200px;
      height: 100px;
      margin: 0 auto;
    }
    .credit-gauge svg {
      width: 100%;
      height: 100%;
    }
    .credit-score-text {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
    }
    /* Responsive styles */
    .container {
      width: 100%;
      padding-left: 1rem;
      padding-right: 1rem;
    }
    @media (min-width: 640px) {
      .container {
        max-width: 640px;
      }
    }
    @media (min-width: 768px) {
      .container {
        max-width: 768px;
      }
    }
    @media (min-width: 1024px) {
      .container {
        max-width: 1024px;
      }
    }
    header {
      padding: 1rem;
    }
    @media (min-width: 768px) {
      header {
        padding: 1.5rem;
      }
    }
    .profile-container {
      flex-direction: column;
    }
    @media (min-width: 768px) {
      .profile-container {
        flex-direction: row;
      }
    }
    .quick-actions {
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 0.5rem;
    }
    @media (min-width: 640px) {
      .quick-actions {
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 1rem;
      }
    }
    .tab-container {
      overflow-x: auto;
      white-space: nowrap;
      -webkit-overflow-scrolling: touch;
    }
    .tab-item {
      display: inline-block;
      padding: 0.75rem 1rem;
    }
    @media (min-width: 768px) {
      .tab-container {
        overflow-x: visible;
        white-space: normal;
      }
      .tab-item {
        display: block;
      }
    }
    .transaction-item {
      flex-direction: column;
      padding: 0.75rem;
    }
    @media (min-width: 640px) {
      .transaction-item {
        flex-direction: row;
        padding: 1rem;
      }
    }
    .modal-container {
      width: 95%;
      margin: 1rem auto;
      padding: 1rem;
    }
    @media (min-width: 640px) {
      .modal-container {
        width: 100%;
        max-width: 28rem;
        padding: 1.5rem;
      }
    }
    input, select {
      width: 100%;
      padding: 0.5rem;
      font-size: 1rem;
    }
    @media (min-width: 640px) {
      input, select {
        padding: 0.75rem;
        font-size: 1.125rem;
      }
    }
    .btn {
      padding: 0.5rem 1rem;
      font-size: 0.875rem;
    }
    @media (min-width: 640px) {
      .btn {
        padding: 0.75rem 1.5rem;
        font-size: 1rem;
      }
    }
    .text-xs { font-size: 0.75rem; }
    .text-sm { font-size: 0.875rem; }
    .text-base { font-size: 1rem; }
    .text-lg { font-size: 1.125rem; }
    .text-xl { font-size: 1.25rem; }
    .text-2xl { font-size: 1.5rem; }
    @media (min-width: 768px) {
      .text-xl { font-size: 1.5rem; }
      .text-2xl { font-size: 1.75rem; }
    }
    .biometric-scan-container {
      width: 100%;
      max-width: 18rem;
      margin: 0 auto;
    }
    .emotional-meter {
      background: linear-gradient(90deg, #ef4444 0%, #f59e0b 25%, #10b981 50%, #3b82f6 75%, #8b5cf6 100%);
      height: 8px;
      border-radius: 4px;
      position: relative;
    }
    .emotional-indicator {
      position: absolute;
      top: -2px;
      width: 12px;
      height: 12px;
      background: white;
      border: 2px solid #374151;
      border-radius: 50%;
      transform: translateX(-50%);
    }
  </style>
</head>
<body class="bg-gray-100">
  <div id="root"></div>

  <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <script type="text/babel">
    // Translations
    const translations = {
      en: {
        login_title: "Login to ONPIN Wallet",
        signup_title: "Create ONPIN Wallet",
        email_label: "Email",
        password_label: "Password",
        confirm_password_label: "Confirm Password",
        login_button: "Login",
        signup_button: "Sign Up",
        or_login_with: "Or login with",
        no_account: "Don't have an account?",
        have_account: "Already have an account?",
        signup_link: "Sign up now",
        login_link: "Login now",
        verifying_biometrics: "Verifying biometrics...",
        welcome_message: "Welcome back {{name}}",
        logout_button: "Logout",
        wallet_balance: "E-naira Wallet Balance",
        overview_tab: "Overview",
        payments_tab: "Payments",
        consent_tab: "Consent",
        settings_tab: "Settings",
        quick_actions: "Quick Actions",
        transfer: "Transfer",
        payments: "Payments",
        consent: "Consent",
        disaster_relief: "Disaster Relief",
        recent_activity: "Recent Activity",
        account_verified: "Account Verified",
        biometric_enrollment: "Biometric Enrollment",
        consent_granted_to: "Consent granted to",
        payment_services: "Payment Services",
        send_money: "Send Money",
        request_money: "Request Money",
        pay_bills: "Pay Bills",
        airtime_data: "Airtime/Data",
        recent_transactions: "Recent Transactions",
        credit: "Credit",
        debit: "Debit",
        disaster_relief_payment: "Disaster Relief Payment",
        consent_management: "Consent Management",
        pending_requests: "Pending Requests",
        active_consents: "Active Consents",
        no_pending_requests: "No pending requests",
        no_active_consents: "No active consents",
        grant: "Grant",
        deny: "Deny",
        revoke: "Revoke",
        government_services: "Government Services",
        emergency_payments: "Emergency Payments",
        biometric_settings: "Biometric Settings",
        face_id: "Face ID",
        fingerprint: "Fingerprint",
        voice_recognition: "Voice Recognition",
        security: "Security",
        change_password: "Change Password",
        privacy: "Privacy",
        data_sharing_preferences: "Data Sharing Preferences",
        help: "Help",
        contact_support: "Contact Support",
        voice_command_received: "Voice command received: {{command}}",
        voice_command_unknown: "Sorry, I didn't understand that command",
        disaster_payment_triggered: "Disaster relief payments triggered for your location",
        disaster_payment_confirmation: "Disaster relief payments have been processed for citizens in your area",
        consent_granted: "Consent granted to {{requester}}",
        consent_revoked: "Consent revoked from {{requester}}",
        name_label: "Full Name",
        nin_label: "National Identification Number (NIN)",
        bvn_label: "Bank Verification Number (BVN)",
        phone_label: "Phone Number",
        step_1: "NIN/BVN",
        step_2: "Details",
        step_3: "Password",
        step_4: "Biometrics",
        biometric_title: "Biometric Enrollment",
        biometric_description: "Secure your wallet with multi-factor biometric authentication",
        complete_registration: "Complete Registration",
        back_button: "Back",
        next_button: "Next",
        nin_required: "NIN is required",
        bvn_required: "BVN is required",
        name_required: "Name is required",
        email_required: "Email is required",
        phone_required: "Phone is required",
        password_required: "Password is required",
        password_mismatch: "Passwords do not match",
        registration_complete: "Registration complete! Your ONPIN wallet is ready",
        kyc_verification: "KYC Verification",
        identity_verification: "Identity Verification",
        view_biometrics: "View Biometrics",
        biometric_data: "Biometric Data",
        bank_connections: "Bank Connections",
        connect_bank: "Connect Bank",
        connected_banks: "Connected Banks",
        no_connected_banks: "No banks connected",
        verify_identity: "Verify Identity",
        identity_status: "Identity Status",
        verified: "Verified",
        unverified: "Unverified",
        verify_now: "Verify Now",
        verification_success: "Identity verification successful",
        bank_verification: "Bank Verification",
        recent_transfers: "Recent Transfers",
        no_recent_transfers: "No recent transfers",
        recipient: "Recipient",
        amount: "Amount",
        date: "Date",
        status: "Status",
        pending: "Pending",
        completed: "Completed",
        failed: "Failed",
        make_transfer: "Make Transfer",
        to: "To",
        enter_amount: "Enter Amount",
        send: "Send",
        cancel: "Cancel",
        transfer_success: "Transfer successful",
        transfer_failed: "Transfer failed",
        insufficient_funds: "Insufficient funds",
        enter_recipient: "Enter recipient wallet ID",
        enter_valid_amount: "Please enter a valid amount",
        transaction_details: "Transaction Details",
        transaction_id: "Transaction ID",
        reference: "Reference",
        purpose: "Purpose",
        view_details: "View Details",
        close: "Close",
        language: "Language",
        english: "English",
        yoruba: "Yoruba",
        hausa: "Hausa",
        igbo: "Igbo",
        french: "French",
        arabic: "Arabic",
        did_label: "Decentralized ID (DID)",
        pin_label: "PIN",
        login_with_pin: "Login with PIN",
        generate_did: "Generate DID",
        did_generated: "Your DID has been generated: {{did}}",
        pin_required: "PIN is required",
        pin_must_be_4_digits: "PIN must be 4 digits",
        invalid_pin: "Invalid PIN",
        invalid_did: "Invalid DID",
        fund_wallet: "Fund Wallet",
        select_bank: "Select Bank",
        fund_amount: "Amount to Fund",
        fund_now: "Fund Now",
        funding_success: "Wallet funded successfully",
        scan_face: "Scan your face",
        scan_fingerprint: "Scan your fingerprint",
        speak_now: "Speak now for voice recognition",
        biometric_success: "Biometric verification successful",
        biometric_failed: "Biometric verification failed",
        not_enrolled: "Not enrolled",
        enroll_now: "Enroll Now",
        optional: "Optional",
        add_bank: "Add Bank Account",
        bank_name: "Bank Name",
        account_number: "Account Number",
        account_name: "Account Name",
        add_now: "Add Now",
        bank_added: "Bank account added successfully",
        verify_bank: "Verify Bank",
        verifying: "Verifying...",
        bank_verified: "Bank account verified",
        consent_tab: "Consent",
        lifecycle_tab: "Lifecycle",
        grant_consent: "Grant Consent",
        revoke_consent: "Revoke Consent",
        active_consents: "Active Consents",
        no_active_consents: "No active consents",
        identity_status: "Identity Status",
        issue_at_birth: "Issue at Birth",
        revoke_at_death: "Revoke at Death",
        linked_services: "Linked Services",
        ussd_access: "USSD Access",
        sms_access: "SMS Access",
        dial_code: "Dial code",
        send_to: "Send to",
        view_commands: "View Commands",
        simulate_ussd: "Simulate USSD",
        simulate_sms: "Simulate SMS",
        identity_status_active: "Active",
        identity_status_suspended: "Suspended",
        identity_status_revoked: "Revoked",
        next_verification: "Next Verification",
        credit_score: "Credit Score",
        credit_rating: "Credit Rating",
        excellent: "Excellent",
        good: "Good",
        fair: "Fair",
        poor: "Poor",
        credit_history: "Credit History",
        loan_eligibility: "Loan Eligibility",
        eligible: "Eligible",
        not_eligible: "Not Eligible",
        credit_factors: "Credit Factors",
        payment_history: "Payment History",
        credit_utilization: "Credit Utilization",
        credit_length: "Credit Length",
        credit_mix: "Credit Mix",
        new_credit: "New Credit",
        improve_score: "Improve Score",
        credit_report: "Credit Report",
        download_report: "Download Report",
        share_with_lender: "Share with Lender",
        api_access: "API Access",
        generate_api_key: "Generate API Key",
        api_documentation: "API Documentation",
        // Additional translations for new features
        bill_payment: "Bill Payment",
        electricity: "Electricity",
        water: "Water",
        internet: "Internet",
        cable_tv: "Cable TV",
        phone_bill: "Phone Bill",
        select_biller: "Select Biller",
        customer_id: "Customer ID",
        pay_now: "Pay Now",
        payment_successful: "Payment successful",
        airtime_topup: "Airtime Top-up",
        data_bundle: "Data Bundle",
        select_network: "Select Network",
        phone_number: "Phone Number",
        select_amount: "Select Amount",
        buy_now: "Buy Now",
        topup_successful: "Top-up successful",
        loan_application: "Loan Application",
        personal_loan: "Personal Loan",
        business_loan: "Business Loan",
        emergency_loan: "Emergency Loan",
        loan_amount: "Loan Amount",
        loan_purpose: "Loan Purpose",
        monthly_income: "Monthly Income",
        apply_loan: "Apply for Loan",
        loan_applied: "Loan application submitted",
        repay_loan: "Repay Loan",
        loan_balance: "Loan Balance",
        next_payment: "Next Payment",
        make_payment: "Make Payment",
        payment_made: "Payment made successfully",
        investment_options: "Investment Options",
        treasury_bills: "Treasury Bills",
        mutual_funds: "Mutual Funds",
        fixed_deposit: "Fixed Deposit",
        stocks: "Stocks",
        invest_amount: "Investment Amount",
        expected_return: "Expected Return",
        maturity_date: "Maturity Date",
        invest_now: "Invest Now",
        investment_successful: "Investment successful",
        withdraw_investment: "Withdraw Investment",
        current_value: "Current Value",
        withdraw_amount: "Withdraw Amount",
        withdraw_now: "Withdraw Now",
        withdrawal_successful: "Withdrawal successful",
        emotional_wellbeing: "Emotional Wellbeing",
        mood_tracker: "Mood Tracker",
        stress_level: "Stress Level",
        happiness_index: "Happiness Index",
        anxiety_level: "Anxiety Level",
        record_mood: "Record Mood",
        mood_recorded: "Mood recorded successfully",
        insurance_policies: "Insurance Policies",
        health_insurance: "Health Insurance",
        life_insurance: "Life Insurance",
        auto_insurance: "Auto Insurance",
        property_insurance: "Property Insurance",
        policy_details: "Policy Details",
        premium_amount: "Premium Amount",
        coverage_amount: "Coverage Amount",
        pay_premium: "Pay Premium",
        premium_paid: "Premium paid successfully",
        file_claim: "File Claim",
        claim_amount: "Claim Amount",
        claim_reason: "Claim Reason",
        submit_claim: "Submit Claim",
        claim_submitted: "Claim submitted successfully",
        remittance_services: "Remittance Services",
        send_money_abroad: "Send Money Abroad",
        receive_money: "Receive Money",
        exchange_rate: "Exchange Rate",
        recipient_country: "Recipient Country",
        recipient_details: "Recipient Details",
        transfer_fee: "Transfer Fee",
        send_remittance: "Send Remittance",
        remittance_sent: "Remittance sent successfully",
        birth_certificate: "Birth Certificate",
        death_certificate: "Death Certificate",
        marriage_certificate: "Marriage Certificate",
        divorce_certificate: "Divorce Certificate",
        request_certificate: "Request Certificate",
        certificate_requested: "Certificate requested successfully",
        biometric_scan_face: "Scanning face...",
        biometric_scan_finger: "Scanning fingerprint...",
        biometric_scan_voice: "Recording voice...",
        scan_complete: "Scan complete",
        enrollment_successful: "Enrollment successful"
      },
      // Add other language translations here (yo, ig, fr, ar) with the same structure
      ig: {
  login_title: "Banye na ONPIN Wallet",
  signup_title: "Mepụta ONPIN Wallet",
  email_label: "Email",
  password_label: "Paswọọdụ",
  confirm_password_label: "Kwenye paswọọdụ",
  login_button: "Banye",
  signup_button: "Debanye aha",
  or_login_with: "Ma ọ bụ banye site na",
  no_account: "Enweghị akaụntụ?",
  have_account: "Enweelarị akaụntụ?",
  signup_link: "Debanye aha ugbu a",
  login_link: "Banye ugbu a",
  verifying_biometrics: "Na-enyocha biometrics...",
  welcome_message: "Nnọọ {{name}}",
  logout_button: "Wepụ",
  wallet_balance: "Balance Wallet",
  overview_tab: "Nchịkọta",
  payments_tab: "Ịkwụ ụgwọ",
  consent_tab: "Nkwenye",
  settings_tab: "Ntọala",
  quick_actions: "Ọrụ ngwa ngwa",
  transfer: "Nyefee",
  payments: "Ịkwụ ụgwọ",
  consent: "Nkwenye",
  disaster_relief: "Enyemaka Ọdachi",
  recent_activity: "Ọrụ na nso nso a",
  account_verified: "Akaụntụ enyochala",
  biometric_enrollment: "Ndebanye aha biometric",
  consent_granted_to: "Enyere nkwenye nye",
  payment_services: "Ọrụ ịkwụ ụgwọ",
  send_money: "Zipu ego",
  request_money: "Rịọ ego",
  pay_bills: "Kwụọ ụgwọ",
  airtime_data: "Oge ikuku/Data",
  recent_transactions: "Azụmahịa ndị na-adịbeghị anya",
  credit: "Kredit",
  debit: "Debit",
  disaster_relief_payment: "Ịkwụ ụgwọ enyemaka ọdachi",
  consent_management: "Njikwa nkwenye",
  pending_requests: "Arịrịọ na-echere",
  active_consents: "Nkwenye na-arụ ọrụ",
  no_pending_requests: "Enweghị arịrịọ na-echere",
  no_active_consents: "Enweghị nkwenye na-arụ ọrụ",
  grant: "Nye",
  deny: "Jụ",
  revoke: "Kagbuo",
  government_services: "Ọrụ gọọmentị",
  emergency_payments: "Ịkwụ ụgwọ mberede",
  biometric_settings: "Ntọala biometric",
  face_id: "Face ID",
  fingerprint: "Akara mkpịsị aka",
  voice_recognition: "Nnabata olu",
  security: "Nchekwa",
  change_password: "Gbanwee paswọọdụ",
  privacy: "Nzuzo",
  data_sharing_preferences: "Mmasị ịkekọrịta data",
  help: "Enyemaka",
  contact_support: "Kpọtụrụ nkwado",
  voice_command_received: "Natara iwu olu: {{command}}",
  voice_command_unknown: "Ndo, aghọtaghị m iwu ahụ",
  disaster_payment_triggered: "Akpalitela ịkwụ ụgwọ enyemaka ọdachi maka ọnọdụ gị",
  disaster_payment_confirmation: "Emeela ịkwụ ụgwọ enyemaka ọdachi maka ụmụ amaala nọ na mpaghara gị",
  consent_granted: "Enyere nkwenye nye {{requester}}",
  consent_revoked: "Ewepụla nkwenye n'aka {{requester}}",
  name_label: "Aha zuru ezu",
  nin_label: "Nọmba NJirimara Mba (NIN)",
  bvn_label: "Nọmba Nkwenye Bank (BVN)",
  phone_label: "Nọmba ekwentị",
  step_1: "NIN/BVN",
  step_2: "Nkọwa",
  step_3: "Paswọọdụ",
  step_4: "Biometrics",
  biometric_title: "Ndebanye aha biometric",
  biometric_description: "Chekwaa obere akpa gị site na njirimara biometric ọtụtụ ihe",
  complete_registration: "Mechie ndebanye aha",
  back_button: "Azụ",
  next_button: "Ọzọ",
  nin_required: "Achọrọ NIN",
  bvn_required: "Achọrọ BVN",
  name_required: "Achọrọ aha",
  email_required: "Achọrọ email",
  phone_required: "Achọrọ nọmba ekwentị",
  password_required: "Achọrọ paswọọdụ",
  password_mismatch: "Okwuntughe adabaghị",
  registration_complete: "Emechara ndebanye aha! ONPIN obere akpa gị dị njikere",
  kyc_verification: "Nyocha KYC",
  identity_verification: "Nyocha njirimara",
  view_biometrics: "Lelee biometrics",
  biometric_data: "Data biometric",
  bank_connections: "Njikọ ụlọ akụ",
  connect_bank: "Jikọọ ụlọ akụ",
  connected_banks: "Ụlọ akụ ejikọrọ",
  no_connected_banks: "Enweghị ụlọ akụ ejikọrọ",
  verify_identity: "Nyochaa njirimara",
  identity_status: "Ọkwa njirimara",
  verified: "Enyochala",
  unverified: "Achọpụtabeghị",
  verify_now: "Nyochaa ugbu a",
  verification_success: "Nyocha njirimara gara nke ọma",
  bank_verification: "Nyocha ụlọ akụ",
  recent_transfers: "Nyefe na nso nso a",
  no_recent_transfers: "Enweghị mbufe na nso nso a",
  recipient: "Onye nnata",
  amount: "Ọnụ ego",
  date: "Ụbọchị",
  status: "Ọnọdụ",
  pending: "Na-echere",
  completed: "Emechara",
  failed: "Dara",
  make_transfer: "Mee mbufe",
  to: "Gaa na",
  enter_amount: "Tinye ego",
  send: "Ziga",
  cancel: "Kagbuo",
  transfer_success: "Mbufe gara nke ọma",
  transfer_failed: "Mbufe dara",
  insufficient_funds: "Ego ezughị oke",
  enter_recipient: "Tinye ID obere akpa onye nnata",
  enter_valid_amount: "Biko tinye ego ziri ezi",
  transaction_details: "Nkọwa azụmahịa",
  transaction_id: "ID azụmahịa",
  reference: "Ntụaka",
  purpose: "Ebumnuche",
  view_details: "Lelee nkọwa",
  close: "Mechie",
  language: "Asụsụ",
  english: "Bekee",
  yoruba: "Yoruba",
  hausa: "Hausa",
  igbo: "Igbo",
  french: "French",
  arabic: "Arabic",
  did_label: "NJirimara Decentralized (DID)",
  pin_label: "PIN",
  login_with_pin: "Banye na PIN",
  generate_did: "Mepụta DID",
  did_generated: "Emepụtara DID gị: {{did}}",
  pin_required: "Achọrọ PIN",
  pin_must_be_4_digits: "PIN ga-abụrịrị nọmba 4",
  invalid_pin: "PIN na-ezighi ezi",
  invalid_did: "DID na-ezighi ezi"
},
      yo: {
        login_title: "Wo ile ONPIN Wallet",
        login_with_pin: "Wo ile pẹlu PIN",
        signup_title: "Ṣẹda ONPIN Wallet",
        email_label: "Imeeli",
        password_label: "Ọrọ igbaniwọle",
        confirm_password_label: "Jẹrisi ọrọ igbaniwọle",
        login_button: "Wo ile",
        signup_button: "Forukọsilẹ",
        or_login_with: "Tabi wo ile pẹlu",
        no_account: "Ko ni akọọlẹ?",
        have_account: "Ni akọọlẹ tẹlẹ?",
        signup_link: "Forukọsilẹ bayi",
        login_link: "Wo ile bayi",
        verifying_biometrics: "Ṣiṣayẹwo awọn biometrics...",
        welcome_message: "Kaabọ {{name}}",
        logout_button: "Jaade",
        wallet_balance: "Iwọn iṣura",
        overview_tab: "Akopọ",
        payments_tab: "Isanwo",
        consent_tab: "Igbasilẹ",
        settings_tab: "Etọ",
        quick_actions: "Awọn iṣẹ lẹsẹkẹsẹ",
        transfer: "Gbe lọ",
        payments: "Isanwo",
        consent: "Igbasilẹ",
        disaster_relief: "Iranlowo Ijamba",
        recent_activity: "Awọn iṣẹlẹ tuntun",
        account_verified: "Akọọlẹ ti jẹrisi",
        biometric_enrollment: "Iforukọsilẹ biometric",
        consent_granted_to: "Ti fun ni igbasilẹ si",
        payment_services: "Awọn iṣẹ isanwo",
        send_money: "Ranṣẹ owo",
        request_money: "Beere owo",
        pay_bills: "San awọn bilẹ",
        airtime_data: "Airtime/Data",
        recent_transactions: "Awọn iṣowo tuntun",
        credit: "Kirediti",
        debit: "Debiti",
        disaster_relief_payment: "Isanwo Iranlowo Ijamba",
        consent_management: "Iṣakoso Igbasilẹ",
        pending_requests: "Awọn ibeere ti nṣura",
        active_consents: "Awọn igbasilẹ ti nṣiṣẹ",
        no_pending_requests: "Ko si awọn ibeere ti nṣura",
        no_active_consents: "Ko si awọn igbasilẹ ti nṣiṣẹ",
        grant: "Fun ni",
        deny: "Kọ",
        revoke: "Yọ kuro",
        government_services: "Awọn iṣẹ ijọba",
        emergency_payments: "Awọn isanwo iyara",
        biometric_settings: "Awọn etọ biometric",
        face_id: "Face ID",
        fingerprint: "Ika ọwọ",
        voice_recognition: "Ifọrọwanilẹnu ohun",
        security: "Aabo",
        change_password: "Yi ọrọ igbaniwọle pada",
        privacy: "Ikọkọ",
        data_sharing_preferences: "Awọn yiyan pinpin data",
        help: "Iranlọwọ",
        contact_support: "Kan si atilẹyin",
        voice_command_received: "Aṣẹ ohun ti gba: {{command}}",
        voice_command_unknown: "Ma binu, Emi ko gbọ aṣẹ naa",
        disaster_payment_triggered: "Awọn isanwo iranlowo ijamba ti ṣe fun ipo rẹ",
        disaster_payment_confirmation: "Awọn isanwo iranlowo ijamba ti ṣe fun awọn ara ilu ni agbegbe rẹ",
        consent_granted: "Ti fun ni igbasilẹ si {{requester}}",
        consent_revoked: "Ti yọ igbasilẹ kuro ni {{requester}}",
        name_label: "Orukọ kikun",
        nin_label: "Nọmba Idanimọ Orilẹ-ede (NIN)",
        bvn_label: "Nọmba Idanimọ Banki (BVN)",
        phone_label: "Nọmba foonu",
        step_1: "NIN/BVN",
        step_2: "Awọn alaye",
        step_3: "Ọrọ igbaniwọle",
        step_4: "Awọn biometric",
        biometric_title: "Iforukọsilẹ Biometric",
        biometric_description: "Dani ẹru rẹ pẹlu ifọrọwanilẹnu biometric oriṣiriṣi",
        complete_registration: "Parẹ iforukọsilẹ",
        back_button: "Pada",
        next_button: "Iwọle",
        nin_required: "NIN nilo",
        bvn_required: "BVN nilo",
        name_required: "Orukọ nilo",
        email_required: "Imeeli nilo",
        phone_required: "Nọmba foonu nilo",
        password_required: "Ọrọ igbaniwọle nilo",
        password_mismatch: "Awọn ọrọ igbaniwọle ko baamu",
        registration_complete: "Iforukọsilẹ pari! ONPIN ẹru rẹ ti ṣetan",
        kyc_verification: "Iṣẹlẹ KYC",
        identity_verification: "Iṣẹlẹ Idanimọ",
        view_biometrics: "Wo Awọn Biometrics",
        biometric_data: "Data Biometric",
        bank_connections: "Awọn asopọ Banki",
        connect_bank: "So banki pọ",
        connected_banks: "Awọn banki ti a sopọ",
        no_connected_banks: "Ko si awọn banki ti a sopọ",
        verify_identity: "Ṣe ayẹwo idanimọ",
        identity_status: "Ipo Idanimọ",
        verified: "Ti jẹrisi",
        unverified: "Ko jẹrisi",
        verify_now: "Ṣe ayẹwo bayi",
        verification_success: "Iṣẹlẹ idanimọ ti ṣe aṣeyọri",
        bank_verification: "Iṣẹlẹ Banki",
        recent_transfers: "Awọn gbigbe tuntun",
        no_recent_transfers: "Ko si awọn gbigbe tuntun",
        recipient: "Olugba",
        amount: "Iye",
        date: "Ọjọ",
        status: "Ipo",
        pending: "Nṣura",
        completed: "Ti pari",
        failed: "Ti ṣẹgun",
        make_transfer: "Ṣe gbigbe",
        to: "Si",
        enter_amount: "Tẹ iye",
        send: "Ranṣẹ",
        cancel: "Fagilee",
        transfer_success: "Gbigbe ti ṣe aṣeyọri",
        transfer_failed: "Gbigbe ti ṣẹgun",
        insufficient_funds: "Ko si owo to",
        enter_recipient: "Tẹ idẹ ẹru olugba",
        enter_valid_amount: "Jọwọ tẹ iye ti o wulo",
        transaction_details: "Awọn alaye iṣowo",
        transaction_id: "ID Iṣowo",
        reference: "Itọkasi",
        purpose: "Idi",
        view_details: "Wo awọn alaye",
        close: "Pa",
        language: "Ede",
        english: "Gẹẹsi",
        yoruba: "Yoruba",
        hausa: "Hausa",
        igbo: "Igbo",
        french: "Faranse",
        arabic: "Arabiki",
        did_label: "Idanimọ Aisakoso (DID)",
        pin_label: "PIN",
        generate_did: "Ṣẹda DID",
        did_generated: "DID rẹ ti ṣẹda: {{did}}",
        pin_required: "PIN nilo",
        pin_must_be_4_digits: "PIN gbọdọ jẹ nọmba 4",
        invalid_pin: "PIN ti ko tọ",
        invalid_did: "DID ti ko tọ"
      },

fr: {
  login_title: "Connectez-vous à ONPIN Wallet",
  signup_title: "Créer un portefeuille ONPIN",
  email_label: "Email",
  password_label: "Mot de passe",
  confirm_password_label: "Confirmer le mot de passe",
  login_button: "Connexion",
  signup_button: "S'inscrire",
  or_login_with: "Ou connectez-vous avec",
  no_account: "Vous n'avez pas de compte?",
  have_account: "Vous avez déjà un compte?",
  signup_link: "Inscrivez-vous maintenant",
  login_link: "Connectez-vous maintenant",
  verifying_biometrics: "Vérification des données biométriques...",
  welcome_message: "Bienvenue {{name}}",
  logout_button: "Déconnexion",
  wallet_balance: "Solde du portefeuille",
  overview_tab: "Aperçu",
  payments_tab: "Paiements",
  consent_tab: "Consentement",
  settings_tab: "Paramètres",
  quick_actions: "Actions rapides",
  transfer: "Transfert",
  payments: "Paiements",
  consent: "Consentement",
  disaster_relief: "Secours en cas de catastrophe",
  recent_activity: "Activité récente",
  account_verified: "Compte vérifié",
  biometric_enrollment: "Enregistrement biométrique",
  consent_granted_to: "Consentement accordé à",
  payment_services: "Services de paiement",
  send_money: "Envoyer de l'argent",
  request_money: "Demander de l'argent",
  pay_bills: "Payer les factures",
  airtime_data: "Crédit/Données",
  recent_transactions: "Transactions récentes",
  credit: "Crédit",
  debit: "Débit",
  disaster_relief_payment: "Paiement de secours en cas de catastrophe",
  consent_management: "Gestion du consentement",
  pending_requests: "Demandes en attente",
  active_consents: "Consentements actifs",
  no_pending_requests: "Aucune demande en attente",
  no_active_consents: "Aucun consentement actif",
  grant: "Accorder",
  deny: "Refuser",
  revoke: "Révoquer",
  government_services: "Services gouvernementaux",
  emergency_payments: "Paiements d'urgence",
  biometric_settings: "Paramètres biométriques",
  face_id: "Face ID",
  fingerprint: "Empreinte digitale",
  voice_recognition: "Reconnaissance vocale",
  security: "Sécurité",
  change_password: "Changer le mot de passe",
  privacy: "Confidentialité",
  data_sharing_preferences: "Préférences de partage de données",
  help: "Aide",
  contact_support: "Contacter le support",
  voice_command_received: "Commande vocale reçue: {{command}}",
  voice_command_unknown: "Désolé, je n'ai pas compris cette commande",
  disaster_payment_triggered: "Paiements de secours en cas de catastrophe déclenchés pour votre localisation",
  disaster_payment_confirmation: "Les paiements de secours en cas de catastrophe ont été traités pour les citoyens de votre région",
  consent_granted: "Consentement accordé à {{requester}}",
  consent_revoked: "Consentement révoqué de {{requester}}",
  name_label: "Nom complet",
  nin_label: "Numéro d'identification nationale (NIN)",
  bvn_label: "Numéro de vérification bancaire (BVN)",
  phone_label: "Numéro de téléphone",
  step_1: "NIN/BVN",
  step_2: "Détails",
  step_3: "Mot de passe",
  step_4: "Biométrie",
  biometric_title: "Enregistrement biométrique",
  biometric_description: "Sécurisez votre portefeuille avec une authentification biométrique multifactorielle",
  complete_registration: "Terminer l'inscription",
  back_button: "Retour",
  next_button: "Suivant",
  nin_required: "NIN requis",
  bvn_required: "BVN requis",
  name_required: "Nom requis",
  email_required: "Email requis",
  phone_required: "Téléphone requis",
  password_required: "Mot de passe requis",
  password_mismatch: "Les mots de passe ne correspondent pas",
  registration_complete: "Inscription terminée! Votre portefeuille ONPIN est prêt",
  kyc_verification: "Vérification KYC",
  identity_verification: "Vérification d'identité",
  view_biometrics: "Voir les données biométriques",
  biometric_data: "Données biométriques",
  bank_connections: "Connexions bancaires",
  connect_bank: "Connecter une banque",
  connected_banks: "Banques connectées",
  no_connected_banks: "Aucune banque connectée",
  verify_identity: "Vérifier l'identité",
  identity_status: "Statut d'identité",
  verified: "Vérifié",
  unverified: "Non vérifié",
  verify_now: "Vérifier maintenant",
  verification_success: "Vérification d'identité réussie",
  bank_verification: "Vérification bancaire",
  recent_transfers: "Transferts récents",
  no_recent_transfers: "Aucun transfert récent",
  recipient: "Bénéficiaire",
  amount: "Montant",
  date: "Date",
  status: "Statut",
  pending: "En attente",
  completed: "Terminé",
  failed: "Échoué",
  make_transfer: "Effectuer un transfert",
  to: "À",
  enter_amount: "Entrez le montant",
  send: "Envoyer",
  cancel: "Annuler",
  transfer_success: "Transfert réussi",
  transfer_failed: "Échec du transfert",
  insufficient_funds: "Fonds insuffisants",
  enter_recipient: "Entrez l'ID du portefeuille du bénéficiaire",
  enter_valid_amount: "Veuillez entrer un montant valide",
  transaction_details: "Détails de la transaction",
  transaction_id: "ID de transaction",
  reference: "Référence",
  purpose: "Objet",
  view_details: "Voir les détails",
  close: "Fermer",
  language: "Langue",
  english: "Anglais",
  yoruba: "Yoruba",
  hausa: "Hausa",
  igbo: "Igbo",
  french: "Français",
  arabic: "Arabe",
  did_label: "ID décentralisé (DID)",
  pin_label: "PIN",
  login_with_pin: "Connexion avec PIN",
  generate_did: "Générer DID",
  did_generated: "Votre DID a été généré: {{did}}",
  pin_required: "PIN requis",
  pin_must_be_4_digits: "Le PIN doit être à 4 chiffres",
  invalid_pin: "PIN invalide",
  invalid_did: "DID invalide"
},

ar: {
  login_title: "تسجيل الدخول إلى محفظة ONPIN",
  signup_title: "إنشاء محفظة ONPIN",
  email_label: "البريد الإلكتروني",
  password_label: "كلمة المرور",
  confirm_password_label: "تأكيد كلمة المرور",
  login_button: "تسجيل الدخول",
  signup_button: "التسجيل",
  or_login_with: "أو تسجيل الدخول باستخدام",
  no_account: "ليس لديك حساب؟",
  have_account: "لديك حساب بالفعل؟",
  signup_link: "سجل الآن",
  login_link: "تسجيل الدخول الآن",
  verifying_biometrics: "التحقق من البصمات الحيوية...",
  welcome_message: "مرحبًا بعودتك {{name}}",
  logout_button: "تسجيل الخروج",
  wallet_balance: "رصيد المحفظة",
  overview_tab: "نظرة عامة",
  payments_tab: "المدفوعات",
  consent_tab: "الموافقة",
  settings_tab: "الإعدادات",
  quick_actions: "إجراءات سريعة",
  transfer: "تحويل",
  payments: "المدفوعات",
  consent: "الموافقة",
  disaster_relief: "الإغاثة في حالات الكوارث",
  recent_activity: "النشاط الأخير",
  account_verified: "تم التحقق من الحساب",
  biometric_enrollment: "تسجيل البصمات الحيوية",
  consent_granted_to: "تم منح الموافقة لـ",
  payment_services: "خدمات الدفع",
  send_money: "إرسال الأموال",
  request_money: "طلب الأموال",
  pay_bills: "دفع الفواتير",
  airtime_data: "رصيد/بيانات",
  recent_transactions: "المعاملات الأخيرة",
  credit: "ائتمان",
  debit: "مدين",
  disaster_relief_payment: "دفع الإغاثة في حالات الكوارث",
  consent_management: "إدارة الموافقة",
  pending_requests: "الطلبات المعلقة",
  active_consents: "الموافقات النشطة",
  no_pending_requests: "لا توجد طلبات معلقة",
  no_active_consents: "لا توجد موافقات نشطة",
  grant: "منح",
  deny: "رفض",
  revoke: "إلغاء",
  government_services: "الخدمات الحكومية",
  emergency_payments: "المدفوعات الطارئة",
  biometric_settings: "إعدادات البصمات الحيوية",
  face_id: "Face ID",
  fingerprint: "بصمة الإصبع",
  voice_recognition: "التعرف الصوتي",
  security: "الأمان",
  change_password: "تغيير كلمة المرور",
  privacy: "الخصوصية",
  data_sharing_preferences: "تفضيلات مشاركة البيانات",
  help: "مساعدة",
  contact_support: "اتصل بالدعم",
  voice_command_received: "تم استلام الأمر الصوتي: {{command}}",
  voice_command_unknown: "عذرًا، لم أفهم هذا الأمر",
  disaster_payment_triggered: "تم تشغيل مدفوعات الإغاثة في حالات الكوارث لموقعك",
  disaster_payment_confirmation: "تمت معالجة مدفوعات الإغاثة في حالات الكوارث للمواطنين في منطقتك",
  consent_granted: "تم منح الموافقة لـ {{requester}}",
  consent_revoked: "تم سحب الموافقة من {{requester}}",
  name_label: "الاسم الكامل",
  nin_label: "رقم التعريف الوطني (NIN)",
  bvn_label: "رقم التحقق المصرفي (BVN)",
  phone_label: "رقم الهاتف",
  step_1: "NIN/BVN",
  step_2: "التفاصيل",
  step_3: "كلمة المرور",
  step_4: "البصمات الحيوية",
  biometric_title: "تسجيل البصمات الحيوية",
  biometric_description: "أمّن محفظتك باستخدام المصادقة متعددة العوامل البيومترية",
  complete_registration: "إكمال التسجيل",
  back_button: "رجوع",
  next_button: "التالي",
  nin_required: "مطلوب NIN",
  bvn_required: "مطلوب BVN",
  name_required: "مطلوب الاسم",
  email_required: "البريد الإلكتروني مطلوب",
  phone_required: "رقم الهاتف مطلوب",
  password_required: "كلمة المرور مطلوبة",
  password_mismatch: "كلمات المرور غير متطابقة",
  registration_complete: "اكتمل التسجيل! محفظة ONPIN الخاصة بك جاهزة",
  kyc_verification: "التحقق من الهوية KYC",
  identity_verification: "التحقق من الهوية",
  view_biometrics: "عرض البصمات الحيوية",
  biometric_data: "بيانات البصمات الحيوية",
  bank_connections: "اتصالات البنك",
  connect_bank: "ربط البنك",
  connected_banks: "البنوك المتصلة",
  no_connected_banks: "لا توجد بنوك متصلة",
  verify_identity: "التحقق من الهوية",
  identity_status: "حالة الهوية",
  verified: "تم التحقق",
  unverified: "غير محقق",
  verify_now: "تحقق الآن",
  verification_success: "نجاح التحقق من الهوية",
  bank_verification: "التحقق من البنك",
  recent_transfers: "التحويلات الأخيرة",
  no_recent_transfers: "لا توجد تحويلات حديثة",
  recipient: "المستلم",
  amount: "المبلغ",
  date: "التاريخ",
  status: "الحالة",
  pending: "قيد الانتظار",
  completed: "مكتمل",
  failed: "فشل",
  make_transfer: "إجراء تحويل",
  to: "إلى",
  enter_amount: "أدخل المبلغ",
  send: "إرسال",
  cancel: "إلغاء",
  transfer_success: "نجاح التحويل",
  transfer_failed: "فشل التحويل",
  insufficient_funds: "أموال غير كافية",
  enter_recipient: "أدخل معرف محفظة المستلم",
  enter_valid_amount: "الرجاء إدخال مبلغ صالح",
  transaction_details: "تفاصيل المعاملة",
  transaction_id: "معرف المعاملة",
  reference: "المرجع",
  purpose: "الغرض",
  view_details: "عرض التفاصيل",
  close: "إغلاق",
  language: "اللغة",
  english: "الإنجليزية",
  yoruba: "اليوربا",
  hausa: "الهوسا",
  igbo: "الإيجبو",
  french: "الفرنسية",
  arabic: "العربية",
  did_label: "معرف اللامركزي (DID)",
  pin_label: "PIN",
  login_with_pin: "تسجيل الدخول باستخدام PIN",
  generate_did: "إنشاء DID",
  did_generated: "تم إنشاء DID الخاص بك: {{did}}",
  pin_required: "مطلوب PIN",
  pin_must_be_4_digits: "يجب أن يتكون PIN من 4 أرقام",
  invalid_pin: "PIN غير صالح",
  invalid_did: "DID غير صالح"
}
    };

    // Function to get URL parameter
    const getUrlParameter = (name) => {
      name = name.replace(/[[]/, '\\[').replace(/[\]]/, '\\]');
      const regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
      const results = regex.exec(window.location.search);
      return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
    };

    // AI Credit Scoring System
    const CreditScoringSystem = {
      calculateCreditScore: (user) => {
        let score = 300;
        const paymentHistory = user.transactions.filter(t => t.type === 'debit').length;
        const onTimePayments = user.transactions.filter(t => t.status === 'completed').length;
        const paymentScore = paymentHistory > 0 ? (onTimePayments / paymentHistory) * 350 : 0;
        score += paymentScore;
        
        const utilizationRatio = user.balance > 0 ? Math.min(user.balance / 100000, 1) : 0;
        score += utilizationRatio * 300;
        
        const accountAge = user.createdAt ? 
          (Date.now() - new Date(user.createdAt).getTime()) / (1000 * 60 * 60 * 24 * 365) : 0;
        score += Math.min(accountAge * 50, 150);
        
        const hasLoans = user.loans && user.loans.length > 0;
        const hasInvestments = user.investments && user.investments.length > 0;
        const hasBnpl = user.bnplPlans && user.bnplPlans.length > 0;
        const creditMixScore = (hasLoans ? 33 : 0) + (hasInvestments ? 33 : 0) + (hasBnpl ? 34 : 0);
        score += creditMixScore;
        
        const recentCredit = user.loans ? 
          user.loans.filter(l => new Date(l.dueDate) > Date.now()).length : 0;
        score += Math.max(100 - (recentCredit * 20), 0);
        
        return Math.min(Math.max(Math.round(score), 300), 850);
      },
      
      getCreditRating: (score) => {
        if (score >= 800) return 'excellent';
        if (score >= 740) return 'good';
        if (score >= 670) return 'fair';
        return 'poor';
      },
      
      getLoanEligibility: (score, user) => {
        const minScore = 600;
        const hasStableIncome = user.transactions.filter(t => 
          t.type === 'credit' && t.amount > 10000
        ).length >= 3;
        
        return {
          eligible: score >= minScore && hasStableIncome,
          maxAmount: score >= 750 ? 5000000 : score >= 650 ? 2000000 : 500000,
          interestRate: score >= 750 ? 12 : score >= 650 ? 15 : 18
        };
      },
      
      getCreditFactors: (user) => {
        const transactions = user.transactions || [];
        const completedPayments = transactions.filter(t => t.status === 'completed').length;
        const totalTransactions = transactions.length;
        
        return {
          paymentHistory: totalTransactions > 0 ? (completedPayments / totalTransactions) * 100 : 0,
          creditUtilization: user.balance > 0 ? Math.min((user.balance / 100000) * 100, 100) : 0,
          creditLength: user.createdAt ? 
            Math.min((Date.now() - new Date(user.createdAt).getTime()) / (1000 * 60 * 60 * 24 * 30), 60) : 0,
          creditMix: ((user.loans?.length > 0 ? 1 : 0) + 
                     (user.investments?.length > 0 ? 1 : 0) + 
                     (user.bnplPlans?.length > 0 ? 1 : 0)) * 33.33,
          newCredit: user.loans ? Math.max(100 - (user.loans.length * 10), 0) : 100
        };
      },
      
      generateAPIKey: (userId) => {
        return `onpin_${userId}_${Math.random().toString(36).substr(2, 16)}`;
      },
      
      generateCreditReport: (user) => {
        const score = CreditScoringSystem.calculateCreditScore(user);
        const rating = CreditScoringSystem.getCreditRating(score);
        const eligibility = CreditScoringSystem.getLoanEligibility(score, user);
        const factors = CreditScoringSystem.getCreditFactors(user);
        
        return {
          userId: user.did,
          score: score,
          rating: rating,
          eligibility: eligibility,
          factors: factors,
          reportDate: new Date().toISOString(),
          transactions: user.transactions || [],
          loans: user.loans || [],
          investments: user.investments || []
        };
      }
    };

    // Main App Component for Dashboard
    function DashboardApp() {
      const [user, setUser] = React.useState(null);
      const [voiceCommandActive, setVoiceCommandActive] = React.useState(false);
      const [language, setLanguage] = React.useState('en');
      const [activeTab, setActiveTab] = React.useState('overview');
      const [creditScore, setCreditScore] = React.useState(null);
      const [creditReport, setCreditReport] = React.useState(null);
      const [apiKey, setApiKey] = React.useState(null);
      
      // Modal states
      const [transferModalOpen, setTransferModalOpen] = React.useState(false);
      const [fundWalletModal, setFundWalletModal] = React.useState(false);
      const [addBankModal, setAddBankModal] = React.useState(false);
      const [billPaymentModal, setBillPaymentModal] = React.useState(false);
      const [airtimeModal, setAirtimeModal] = React.useState(false);
      const [loanModal, setLoanModal] = React.useState(false);
      const [investmentModal, setInvestmentModal] = React.useState(false);
      const [insuranceModal, setInsuranceModal] = React.useState(false);
      const [remittanceModal, setRemittanceModal] = React.useState(false);
      const [biometricModal, setBiometricModal] = React.useState(false);
      const [consentModal, setConsentModal] = React.useState(false);
      const [certificateModal, setCertificateModal] = React.useState(false);
      const [ussdModalOpen, setUssdModalOpen] = React.useState(false);
      const [smsModalOpen, setSmsModalOpen] = React.useState(false);
      const [transactionDetail, setTransactionDetail] = React.useState(null);
      
      // Form states
      const [transferDetails, setTransferDetails] = React.useState({
        recipient: '', amount: '', purpose: ''
      });
      const [billPayment, setBillPayment] = React.useState({
        biller: '', customerId: '', amount: ''
      });
      const [airtimeDetails, setAirtimeDetails] = React.useState({
        network: '', phone: '', amount: ''
      });
      const [loanApplication, setLoanApplication] = React.useState({
        type: '', amount: '', purpose: '', income: ''
      });
      const [investmentDetails, setInvestmentDetails] = React.useState({
        type: '', amount: '', duration: ''
      });
      const [insuranceDetails, setInsuranceDetails] = React.useState({
        type: '', coverage: '', premium: ''
      });
      const [remittanceDetails, setRemittanceDetails] = React.useState({
        country: '', recipient: '', amount: '', purpose: ''
      });
      const [emotionalData, setEmotionalData] = React.useState({
        mood: 50, stress: 30, happiness: 70, anxiety: 20
      });
      
      // Biometric states
      const [biometricScanning, setBiometricScanning] = React.useState(null);
      const [biometricEnrolled, setBiometricEnrolled] = React.useState({
        face: false, fingerprint: false, voice: false
      });
      
      // USSD/SMS states
      const [ussdCode, setUssdCode] = React.useState('');
      const [ussdResponse, setUssdResponse] = React.useState('');
      
      // Sample data
      const banks = [
        { name: "Access Bank", code: "044" },
        { name: "Zenith Bank", code: "057" },
        { name: "GTBank", code: "058" },
        { name: "First Bank", code: "011" },
        { name: "UBA", code: "033" }
      ];
      
      const billers = [
        { name: "AEDC (Electricity)", type: "electricity" },
        { name: "Lagos Water Corporation", type: "water" },
        { name: "DSTV", type: "cable_tv" },
        { name: "MTN", type: "phone_bill" },
        { name: "Airtel", type: "phone_bill" }
      ];
      
      const networks = ["MTN", "Airtel", "Glo", "9mobile"];
      
      const countries = [
        { name: "United States", code: "USD", rate: 1650 },
        { name: "United Kingdom", code: "GBP", rate: 2100 },
        { name: "Canada", code: "CAD", rate: 1200 },
        { name: "Ghana", code: "GHS", rate: 140 },
        { name: "South Africa", code: "ZAR", rate: 85 }
      ];

      React.useEffect(() => {
        const did = getUrlParameter('did');
        if (!did) {
          window.location.href = 'index.html';
          return;
        }

        const userDatabase = JSON.parse(localStorage.getItem('onpinUsers')) || {};
        let user = userDatabase[did];

        if (!user) {
          window.location.href = 'index.html';
          return;
        }

        // Initialize user with default data if missing
        user = {
          identityStatus: 'active',
          identityIssueDate: "2023-01-15",
          lastVerified: "2023-06-20",
          nextVerification: "2024-01-15",
          activeConsents: [
            {
              id: 'consent-1',
              organization: 'NIMC',
              date: '2023-05-10',
              expiry: '2024-05-10',
              scope: 'Basic identity verification'
            }
          ],
          loans: [
            {
              id: 'loan_1',
              type: 'personal',
              amount: 500000,
              interestRate: 15,
              dueDate: '2023-12-31',
              status: 'active',
              balance: 450000,
              paidAmount: 50000,
              totalAmount: 575000
            }
          ],
          investments: [
            {
              id: 'inv_1',
              type: 'treasury',
              amount: 200000,
              returnRate: 13.5,
              maturityDate: '2024-01-15',
              status: 'active',
              currentValue: 227000
            }
          ],
          insurancePolicies: [
            {
              id: 'ins_1',
              type: 'health',
              provider: 'AIICO Insurance',
              premium: 50000,
              coverage: 2000000,
              status: 'active',
              nextPayment: '2024-02-15'
            }
          ],
          emotionalHistory: [
            { date: '2023-07-01', mood: 75, stress: 25, happiness: 80, anxiety: 15 },
            { date: '2023-07-02', mood: 60, stress: 40, happiness: 65, anxiety: 30 }
          ],
          connectedBanks: [
            {
              id: 'bank_1',
              name: 'Access Bank',
              accountNumber: '0123456789',
              accountName: user.name,
              verified: true
            }
          ],
          ...user
        };

        const score = CreditScoringSystem.calculateCreditScore(user);
        setCreditScore(score);
        setUser(user);
      }, []);

      const t = (key, params) => {
        let text = translations[language][key] || translations.en[key] || key;
        if (params) {
          Object.keys(params).forEach(param => {
            text = text.replace(`{{${param}}}`, params[param]);
          });
        }
        return text;
      };

      const updateUser = (updates) => {
        setUser(prev => {
          const updatedUser = { ...prev, ...updates };
          const userDatabase = JSON.parse(localStorage.getItem('onpinUsers')) || {};
          userDatabase[prev.did] = updatedUser;
          localStorage.setItem('onpinUsers', JSON.stringify(userDatabase));
          return updatedUser;
        });
      };

      const addTransaction = (transaction) => {
        const newTransaction = {
          id: `txn_${Date.now()}`,
          date: new Date().toISOString().split('T')[0],
          status: "completed",
          ...transaction
        };
        
        updateUser({
          transactions: [newTransaction, ...user.transactions],
          balance: user.balance + (transaction.type === 'credit' ? transaction.amount : -transaction.amount)
        });
      };

      // Handler functions
      const handleTransfer = () => {
        if (!transferDetails.recipient || !transferDetails.amount) {
          alert(t('enter_recipient'));
          return;
        }
        
        const amount = parseFloat(transferDetails.amount);
        if (isNaN(amount) || amount <= 0) {
          alert(t('enter_valid_amount'));
          return;
        }
        
        if (amount > user.balance) {
          alert(t('insufficient_funds'));
          return;
        }
        
        addTransaction({
          type: "debit",
          amount: amount,
          description: transferDetails.purpose || "Transfer",
          recipient: transferDetails.recipient
        });
        
        setTransferModalOpen(false);
        setTransferDetails({ recipient: '', amount: '', purpose: '' });
        alert(t('transfer_success'));
      };

      const handleBillPayment = () => {
        if (!billPayment.biller || !billPayment.customerId || !billPayment.amount) {
          alert('Please fill all fields');
          return;
        }
        
        const amount = parseFloat(billPayment.amount);
        if (amount > user.balance) {
          alert(t('insufficient_funds'));
          return;
        }
        
        addTransaction({
          type: "debit",
          amount: amount,
          description: `Bill Payment - ${billPayment.biller}`,
          recipient: billPayment.biller
        });
        
        setBillPaymentModal(false);
        setBillPayment({ biller: '', customerId: '', amount: '' });
        alert(t('payment_successful'));
      };

      const handleAirtimeTopup = () => {
        if (!airtimeDetails.network || !airtimeDetails.phone || !airtimeDetails.amount) {
          alert('Please fill all fields');
          return;
        }
        
        const amount = parseFloat(airtimeDetails.amount);
        if (amount > user.balance) {
          alert(t('insufficient_funds'));
          return;
        }
        
        addTransaction({
          type: "debit",
          amount: amount,
          description: `Airtime - ${airtimeDetails.network}`,
          recipient: airtimeDetails.phone
        });
        
        setAirtimeModal(false);
        setAirtimeDetails({ network: '', phone: '', amount: '' });
        alert(t('topup_successful'));
      };

      const handleLoanApplication = () => {
        if (!loanApplication.type || !loanApplication.amount || !loanApplication.purpose) {
          alert('Please fill all required fields');
          return;
        }
        
        const newLoan = {
          id: `loan_${Date.now()}`,
          type: loanApplication.type,
          amount: parseFloat(loanApplication.amount),
          purpose: loanApplication.purpose,
          monthlyIncome: parseFloat(loanApplication.income),
          status: 'pending',
          applicationDate: new Date().toISOString().split('T')[0],
          interestRate: 15
        };
        
        updateUser({
          loans: [...user.loans, newLoan]
        });
        
        setLoanModal(false);
        setLoanApplication({ type: '', amount: '', purpose: '', income: '' });
        alert(t('loan_applied'));
      };

      const handleInvestment = () => {
        if (!investmentDetails.type || !investmentDetails.amount) {
          alert('Please fill all fields');
          return;
        }
        
        const amount = parseFloat(investmentDetails.amount);
        if (amount > user.balance) {
          alert(t('insufficient_funds'));
          return;
        }
        
        const newInvestment = {
          id: `inv_${Date.now()}`,
          type: investmentDetails.type,
          amount: amount,
          duration: investmentDetails.duration,
          returnRate: investmentDetails.type === 'treasury' ? 13.5 : 
                     investmentDetails.type === 'mutual_funds' ? 18.2 : 12.0,
          startDate: new Date().toISOString().split('T')[0],
          status: 'active',
          currentValue: amount
        };
        
        updateUser({
          investments: [...user.investments, newInvestment],
          balance: user.balance - amount
        });
        
        addTransaction({
          type: "debit",
          amount: amount,
          description: `Investment - ${investmentDetails.type}`,
          recipient: "Investment Account"
        });
        
        setInvestmentModal(false);
        setInvestmentDetails({ type: '', amount: '', duration: '' });
        alert(t('investment_successful'));
      };

      const handleBiometricScan = (type) => {
        setBiometricScanning(type);
        
        setTimeout(() => {
          setBiometricScanning(null);
          setBiometricEnrolled(prev => ({ ...prev, [type]: true }));
          
          updateUser({
            biometricData: {
              ...user.biometricData,
              [type]: {
                enrolled: true,
                enrollmentDate: new Date().toISOString(),
                lastUsed: new Date().toISOString()
              }
            }
          });
          
          alert(t('enrollment_successful'));
        }, 3000);
      };

      // USSD state management
      const [ussdSession, setUssdSession] = React.useState({
        active: false,
        currentMenu: 'main',
        history: [],
        input: ''
      });

      const handleUSSDCommand = () => {
        if (!ussdCode && !ussdSession.active) return;
        
        let response = '';
        let nextMenu = null;
        let sessionActive = true;
        
        // Initial USSD codes
        if (!ussdSession.active) {
          if (ussdCode === '*389#') {
            response = `Welcome to ONPIN Wallet\n\n1. Check Balance\n2. Transfer Money\n3. Pay Bills\n4. Buy Airtime\n5. Loan Services\n6. Investment\n\nReply with option number:`;
            nextMenu = 'main';
            setUssdSession({ active: true, currentMenu: 'main', history: [], input: '' });
          } else if (ussdCode === '*389*1#') {
            response = `Your ONPIN Wallet Balance:\n₦${user.balance.toLocaleString()}\n\nThank you for using ONPIN!`;
            sessionActive = false;
          } else if (ussdCode === '*389*2#') {
            response = `Transfer Money\n\nEnter recipient wallet ID:`;
            nextMenu = 'transfer_recipient';
            setUssdSession({ active: true, currentMenu: 'transfer_recipient', history: [], input: '' });
          } else {
            response = 'Invalid USSD code. Try *389# for main menu.';
            sessionActive = false;
          }
        } else {
          // Handle menu navigation
          const input = ussdCode;
          
          switch (ussdSession.currentMenu) {
            case 'main':
              switch (input) {
                case '1':
                  response = `Your ONPIN Wallet Balance:\n₦${user.balance.toLocaleString()}\n\nThank you for using ONPIN!`;
                  sessionActive = false;
                  break;
                case '2':
                  response = `Transfer Money\n\nEnter recipient wallet ID:`;
                  nextMenu = 'transfer_recipient';
                  break;
                case '3':
                  response = `Pay Bills\n\n1. Electricity\n2. Water\n3. Cable TV\n4. Phone Bill\n\nReply with option number:`;
                  nextMenu = 'bills_menu';
                  break;
                case '4':
                  response = `Buy Airtime\n\n1. MTN\n2. Airtel\n3. Glo\n4. 9mobile\n\nReply with option number:`;
                  nextMenu = 'airtime_network';
                  break;
                case '5':
                  response = `Loan Services\n\n1. Apply for Loan\n2. Check Loan Status\n3. Repay Loan\n\nReply with option number:`;
                  nextMenu = 'loan_menu';
                  break;
                case '6':
                  response = `Investment Options\n\n1. Treasury Bills\n2. Mutual Funds\n3. Fixed Deposit\n4. Check Portfolio\n\nReply with option number:`;
                  nextMenu = 'investment_menu';
                  break;
                default:
                  response = `Invalid option. Please select 1-6:`;
                  nextMenu = 'main';
              }
              break;
              
            case 'transfer_recipient':
              if (input.length >= 10) {
                response = `Transfer to: ${input}\n\nEnter amount (₦):`;
                nextMenu = 'transfer_amount';
                setUssdSession(prev => ({ ...prev, history: [...prev.history, { recipient: input }] }));
              } else {
                response = `Invalid wallet ID. Enter valid recipient ID:`;
                nextMenu = 'transfer_recipient';
              }
              break;
              
            case 'transfer_amount':
              const amount = parseFloat(input);
              if (isNaN(amount) || amount <= 0) {
                response = `Invalid amount. Enter amount (₦):`;
                nextMenu = 'transfer_amount';
              } else if (amount > user.balance) {
                response = `Insufficient funds. Your balance: ₦${user.balance.toLocaleString()}\n\nEnter amount (₦):`;
                nextMenu = 'transfer_amount';
              } else {
                const recipient = ussdSession.history[0]?.recipient || 'Unknown';
                response = `Confirm Transfer:\nTo: ${recipient}\nAmount: ₦${amount.toLocaleString()}\n\n1. Confirm\n2. Cancel\n\nReply with option:`;
                nextMenu = 'transfer_confirm';
                setUssdSession(prev => ({ ...prev, history: [...prev.history, { amount }] }));
              }
              break;
              
            case 'transfer_confirm':
              if (input === '1') {
                const transferData = ussdSession.history.reduce((acc, item) => ({ ...acc, ...item }), {});
                
                // Process transfer
                const newTransaction = {
                  id: `txn_${Date.now()}`,
                  type: "debit",
                  amount: transferData.amount,
                  date: new Date().toISOString().split('T')[0],
                  description: "USSD Transfer",
                  status: "completed",
                  recipient: transferData.recipient
                };
                
                setUser(prev => {
                  const updatedUser = {
                    ...prev,
                    balance: prev.balance - transferData.amount,
                    transactions: [newTransaction, ...prev.transactions]
                  };
                  
                  const userDatabase = JSON.parse(localStorage.getItem('onpinUsers')) || {};
                  userDatabase[prev.did] = updatedUser;
                  localStorage.setItem('onpinUsers', JSON.stringify(userDatabase));
                  
                  return updatedUser;
                });
                
                response = `Transfer Successful!\n\nAmount: ₦${transferData.amount.toLocaleString()}\nTo: ${transferData.recipient}\nNew Balance: ₦${(user.balance - transferData.amount).toLocaleString()}\n\nThank you!`;
                sessionActive = false;
              } else if (input === '2') {
                response = `Transfer cancelled.\n\nThank you for using ONPIN!`;
                sessionActive = false;
              } else {
                response = `Invalid option.\n\n1. Confirm\n2. Cancel\n\nReply with option:`;
                nextMenu = 'transfer_confirm';
              }
              break;
              
            case 'bills_menu':
              const billers = ['AEDC (Electricity)', 'Lagos Water Corp', 'DSTV', 'MTN'];
              if (input >= '1' && input <= '4') {
                const selectedBiller = billers[parseInt(input) - 1];
                response = `${selectedBiller}\n\nEnter customer ID:`;
                nextMenu = 'bill_customer_id';
                setUssdSession(prev => ({ ...prev, history: [{ biller: selectedBiller }] }));
              } else {
                response = `Invalid option. Select 1-4:`;
                nextMenu = 'bills_menu';
              }
              break;
              
            case 'bill_customer_id':
              if (input.length >= 8) {
                response = `Customer ID: ${input}\n\nEnter amount (₦):`;
                nextMenu = 'bill_amount';
                setUssdSession(prev => ({ ...prev, history: [...prev.history, { customerId: input }] }));
              } else {
                response = `Invalid customer ID. Enter valid ID:`;
                nextMenu = 'bill_customer_id';
              }
              break;
              
            case 'bill_amount':
              const billAmount = parseFloat(input);
              if (isNaN(billAmount) || billAmount <= 0) {
                response = `Invalid amount. Enter amount (₦):`;
                nextMenu = 'bill_amount';
              } else if (billAmount > user.balance) {
                response = `Insufficient funds. Your balance: ₦${user.balance.toLocaleString()}\n\nEnter amount (₦):`;
                nextMenu = 'bill_amount';
              } else {
                const billData = ussdSession.history.reduce((acc, item) => ({ ...acc, ...item }), {});
                
                // Process bill payment
                const newTransaction = {
                  id: `txn_${Date.now()}`,
                  type: "debit",
                  amount: billAmount,
                  date: new Date().toISOString().split('T')[0],
                  description: `Bill Payment - ${billData.biller}`,
                  status: "completed",
                  recipient: billData.biller
                };
                
                setUser(prev => {
                  const updatedUser = {
                    ...prev,
                    balance: prev.balance - billAmount,
                    transactions: [newTransaction, ...prev.transactions]
                  };
                  
                  const userDatabase = JSON.parse(localStorage.getItem('onpinUsers')) || {};
                  userDatabase[prev.did] = updatedUser;
                  localStorage.setItem('onpinUsers', JSON.stringify(userDatabase));
                  
                  return updatedUser;
                });
                
                response = `Bill Payment Successful!\n\nBiller: ${billData.biller}\nCustomer ID: ${billData.customerId}\nAmount: ₦${billAmount.toLocaleString()}\nNew Balance: ₦${(user.balance - billAmount).toLocaleString()}\n\nThank you!`;
                sessionActive = false;
              }
              break;
              
            case 'airtime_network':
              const networks = ['MTN', 'Airtel', 'Glo', '9mobile'];
              if (input >= '1' && input <= '4') {
                const selectedNetwork = networks[parseInt(input) - 1];
                response = `${selectedNetwork} Airtime\n\nEnter phone number:`;
                nextMenu = 'airtime_phone';
                setUssdSession(prev => ({ ...prev, history: [{ network: selectedNetwork }] }));
              } else {
                response = `Invalid option. Select 1-4:`;
                nextMenu = 'airtime_network';
              }
              break;
              
            case 'airtime_phone':
              if (input.length >= 11 && input.match(/^[0-9]+$/)) {
                response = `Phone: ${input}\n\nSelect amount:\n1. ₦100\n2. ₦200\n3. ₦500\n4. ₦1000\n5. Custom amount\n\nReply with option:`;
                nextMenu = 'airtime_amount';
                setUssdSession(prev => ({ ...prev, history: [...prev.history, { phone: input }] }));
              } else {
                response = `Invalid phone number. Enter valid number:`;
                nextMenu = 'airtime_phone';
              }
              break;
              
            case 'airtime_amount':
              let airtimeAmount;
              if (input === '1') airtimeAmount = 100;
              else if (input === '2') airtimeAmount = 200;
              else if (input === '3') airtimeAmount = 500;
              else if (input === '4') airtimeAmount = 1000;
              else if (input === '5') {
                response = `Enter custom amount (₦):`;
                nextMenu = 'airtime_custom';
                break;
              } else {
                response = `Invalid option. Select 1-5:`;
                nextMenu = 'airtime_amount';
                break;
              }
              
              if (airtimeAmount > user.balance) {
                response = `Insufficient funds. Your balance: ₦${user.balance.toLocaleString()}\n\nSelect different amount:`;
                nextMenu = 'airtime_amount';
              } else {
                const airtimeData = ussdSession.history.reduce((acc, item) => ({ ...acc, ...item }), {});
                
                // Process airtime purchase
                const newTransaction = {
                  id: `txn_${Date.now()}`,
                  type: "debit",
                  amount: airtimeAmount,
                  date: new Date().toISOString().split('T')[0],
                  description: `Airtime - ${airtimeData.network}`,
                  status: "completed",
                  recipient: airtimeData.phone
                };
                
                setUser(prev => {
                  const updatedUser = {
                    ...prev,
                    balance: prev.balance - airtimeAmount,
                    transactions: [newTransaction, ...prev.transactions]
                  };
                  
                  const userDatabase = JSON.parse(localStorage.getItem('onpinUsers')) || {};
                  userDatabase[prev.did] = updatedUser;
                  localStorage.setItem('onpinUsers', JSON.stringify(userDatabase));
                  
                  return updatedUser;
                });
                
                response = `Airtime Purchase Successful!\n\nNetwork: ${airtimeData.network}\nPhone: ${airtimeData.phone}\nAmount: ₦${airtimeAmount.toLocaleString()}\nNew Balance: ₦${(user.balance - airtimeAmount).toLocaleString()}\n\nThank you!`;
                sessionActive = false;
              }
              break;
              
            case 'airtime_custom':
              const customAmount = parseFloat(input);
              if (isNaN(customAmount) || customAmount <= 0) {
                response = `Invalid amount. Enter amount (₦):`;
                nextMenu = 'airtime_custom';
              } else if (customAmount > user.balance) {
                response = `Insufficient funds. Your balance: ₦${user.balance.toLocaleString()}\n\nEnter amount (₦):`;
                nextMenu = 'airtime_custom';
              } else {
                const airtimeData = ussdSession.history.reduce((acc, item) => ({ ...acc, ...item }), {});
                
                // Process custom airtime purchase
                const newTransaction = {
                  id: `txn_${Date.now()}`,
                  type: "debit",
                  amount: customAmount,
                  date: new Date().toISOString().split('T')[0],
                  description: `Airtime - ${airtimeData.network}`,
                  status: "completed",
                  recipient: airtimeData.phone
                };
                
                setUser(prev => {
                  const updatedUser = {
                    ...prev,
                    balance: prev.balance - customAmount,
                    transactions: [newTransaction, ...prev.transactions]
                  };
                  
                  const userDatabase = JSON.parse(localStorage.getItem('onpinUsers')) || {};
                  userDatabase[prev.did] = updatedUser;
                  localStorage.setItem('onpinUsers', JSON.stringify(userDatabase));
                  
                  return updatedUser;
                });
                
                response = `Airtime Purchase Successful!\n\nNetwork: ${airtimeData.network}\nPhone: ${airtimeData.phone}\nAmount: ₦${customAmount.toLocaleString()}\nNew Balance: ₦${(user.balance - customAmount).toLocaleString()}\n\nThank you!`;
                sessionActive = false;
              }
              break;
              
            case 'loan_menu':
              switch (input) {
                case '1':
                  response = `Apply for Loan\n\n1. Personal Loan (15% p.a.)\n2. Business Loan (12% p.a.)\n3. Emergency Loan (18% p.a.)\n\nReply with option:`;
                  nextMenu = 'loan_type';
                  break;
                case '2':
                  const activeLoans = user.loans?.filter(loan => loan.status === 'active') || [];
                  if (activeLoans.length > 0) {
                    response = `Active Loans:\n\n${activeLoans.map((loan, i) => 
                      `${i+1}. ${loan.type} - ₦${loan.balance?.toLocaleString() || 0} remaining`
                    ).join('\n')}\n\nThank you!`;
                  } else {
                    response = `No active loans found.\n\nThank you!`;
                  }
                  sessionActive = false;
                  break;
                case '3':
                  response = `Loan Repayment\n\nEnter loan ID or reply 1 for latest loan:`;
                  nextMenu = 'loan_repay';
                  break;
                default:
                  response = `Invalid option. Select 1-3:`;
                  nextMenu = 'loan_menu';
              }
              break;
              
            case 'investment_menu':
              switch (input) {
                case '1':
                  response = `Treasury Bills\nMinimum: ₦10,000\nReturn: 13.5% p.a.\n\nEnter investment amount (₦):`;
                  nextMenu = 'invest_treasury';
                  break;
                case '2':
                  response = `Mutual Funds\nMinimum: ₦5,000\nExpected Return: 18.2% p.a.\n\nEnter investment amount (₦):`;
                  nextMenu = 'invest_mutual';
                  break;
                case '3':
                  response = `Fixed Deposit\nMinimum: ₦50,000\nReturn: 12.0% p.a.\n\nEnter investment amount (₦):`;
                  nextMenu = 'invest_fixed';
                  break;
                case '4':
                  const totalInvested = user.investments?.reduce((sum, inv) => sum + inv.amount, 0) || 0;
                  const currentValue = user.investments?.reduce((sum, inv) => sum + inv.currentValue, 0) || 0;
                  response = `Investment Portfolio:\n\nTotal Invested: ₦${totalInvested.toLocaleString()}\nCurrent Value: ₦${currentValue.toLocaleString()}\nReturns: ₦${(currentValue - totalInvested).toLocaleString()}\n\nThank you!`;
                  sessionActive = false;
                  break;
                default:
                  response = `Invalid option. Select 1-4:`;
                  nextMenu = 'investment_menu';
              }
              break;
              
            default:
              response = 'Session expired. Dial *389# to start again.';
              sessionActive = false;
          }
          
          if (nextMenu) {
            setUssdSession(prev => ({ ...prev, currentMenu: nextMenu }));
          }
        }
        
        if (!sessionActive) {
          setUssdSession({ active: false, currentMenu: 'main', history: [], input: '' });
        }
        
        setUssdResponse(response);
        setUssdCode(''); // Clear input for next command
      };

      if (!user) {
        return <div className="min-h-screen flex items-center justify-center">Loading...</div>;
      }

      const creditRating = CreditScoringSystem.getCreditRating(creditScore);
      const loanEligibility = CreditScoringSystem.getLoanEligibility(creditScore, user);
      const creditFactors = CreditScoringSystem.getCreditFactors(user);

      return (
        <div className="min-h-screen flex flex-col">
          {/* Header */}
          <header className="bg-green-800 text-white p-4 shadow-md">
            <div className="container mx-auto flex justify-between items-center">
              <h1 className="text-2xl font-bold">ONPIN Identity Wallet</h1>
              <div className="flex items-center space-x-4">
                <button
                  onClick={() => setVoiceCommandActive(!voiceCommandActive)}
                  className={`p-2 rounded-full ${voiceCommandActive ? 'bg-green-500 voice-command-active' : 'bg-green-700'}`}
                >
                  <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z" />
                  </svg>
                </button>
                <select
                  value={language}
                  onChange={(e) => setLanguage(e.target.value)}
                  className="bg-white text-gray-800 rounded px-3 py-1 pr-8 language-selector appearance-none"
                >
                  <option value="en">{t('english')}</option>
                  <option value="yo">{t('yoruba')}</option>
                  <option value="fr">{t('french')}</option>
                  <option value="ar">{t('arabic')}</option>
                  <option value="ig">{t('igbo')}</option>
                </select>
              </div>
            </div>
          </header>

          {/* Main Content */}
          <main className="flex-grow container mx-auto p-4">
            <div className="max-w-6xl mx-auto">
              {/* User Profile Header */}
              <div className="bg-white rounded-lg shadow-md p-6 mb-6">
                <div className="flex justify-between items-start">
                  <div className="flex items-center">
                    <div className="bg-green-100 rounded-full p-3 mr-4">
                      <svg xmlns="http://www.w3.org/2000/svg" className="h-10 w-10 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                      </svg>
                    </div>
                    <div>
                      <h2 className="text-xl font-bold">Welcome! {user.name}</h2>
                      <p className="text-gray-600">{user.location || 'Nigeria'}</p>
                      <div className="flex flex-wrap gap-2 mt-2">
                        <span className="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded">NIN: {user.nin}</span>
                        <span className="bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded">DID: {user.did}</span>
                        <span className={`text-xs px-2 py-1 rounded ${
                          user.identityStatus === 'active' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'
                        }`}>
                          Status: {t(`identity_status_${user.identityStatus}`)}
                        </span>
                      </div>
                    </div>
                  </div>
                  <button
                    onClick={() => window.location.href = 'index.html'}
                    className="px-4 py-2 bg-red-100 text-red-600 rounded-md hover:bg-red-200 transition duration-300"
                  >
                    {t('logout_button')}
                  </button>
                </div>

                {/* Balance Card */}
                <div className="mt-6 bg-green-50 rounded-lg p-4">
                  <div className="flex justify-between items-center">
                    <div>
                      <p className="text-gray-600">{t('wallet_balance')}</p>
                      <p className="text-3xl font-bold">₦{user.balance.toLocaleString()}</p>
                    </div>
                    <div className="flex space-x-2">
                      <button
                        onClick={() => setFundWalletModal(true)}
                        className="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition duration-300"
                      >
                        {t('fund_wallet')}
                      </button>
                      <div className="bg-green-100 p-3 rounded-full">
                        <span className="text-green-600 text-2xl font-bold">₦</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              {/* Navigation Tabs */}
              <div className="flex border-b border-gray-200 mb-6 overflow-x-auto">
                <div className="flex space-x-1 min-w-max">
                  {[
                    { key: 'overview', label: t('overview_tab') },
                    { key: 'credit', label: t('credit_score') },
                    { key: 'payments', label: t('payments_tab') },
                    { key: 'identity', label: t('identity_status') },
                    { key: 'consent', label: t('consent_tab') },
                    { key: 'lifecycle', label: t('lifecycle_tab') },
                    { key: 'loans', label: 'Loans' },
                    { key: 'remittance', label: 'Remittance' },
                    { key: 'investments', label: 'Investments' },
                    { key: 'insurance', label: 'Insurance' }
                  ].map(tab => (
                    <button
                      key={tab.key}
                      onClick={() => setActiveTab(tab.key)}
                      className={`px-3 py-2 text-sm font-medium whitespace-nowrap ${
                        activeTab === tab.key 
                          ? 'text-green-600 border-b-2 border-green-600' 
                          : 'text-gray-500 hover:text-gray-700'
                      }`}
                    >
                      {tab.label}
                    </button>
                  ))}
                </div>
              </div>

              {/* Tab Content */}
              {activeTab === 'overview' && (
                <div className="space-y-6">
                  {/* Quick Actions */}
                  <div className="bg-white rounded-lg shadow-md p-6">
                    <h3 className="text-lg font-semibold mb-4">{t('quick_actions')}</h3>
                    <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                      <button
                        onClick={() => setTransferModalOpen(true)}
                        className="bg-blue-50 p-4 rounded-lg hover:bg-blue-100 transition duration-300"
                      >
                        <div className="flex flex-col items-center">
                          <svg xmlns="http://www.w3.org/2000/svg" className="h-8 w-8 text-blue-600 mb-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10" />
                          </svg>
                          <span className="text-sm">{t('transfer')}</span>
                        </div>
                      </button>

                      <button
                        onClick={() => setBillPaymentModal(true)}
                        className="bg-yellow-50 p-4 rounded-lg hover:bg-yellow-100 transition duration-300"
                      >
                        <div className="flex flex-col items-center">
                          <svg xmlns="http://www.w3.org/2000/svg" className="h-8 w-8 text-yellow-600 mb-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                          </svg>
                          <span className="text-sm">{t('pay_bills')}</span>
                        </div>
                      </button>

                      <button
                        onClick={() => setAirtimeModal(true)}
                        className="bg-green-50 p-4 rounded-lg hover:bg-green-100 transition duration-300"
                      >
                        <div className="flex flex-col items-center">
                          <svg xmlns="http://www.w3.org/2000/svg" className="h-8 w-8 text-green-600 mb-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z" />
                          </svg>
                          <span className="text-sm">{t('airtime_data')}</span>
                        </div>
                      </button>

                      <button
                        onClick={() => setActiveTab('credit')}
                        className="bg-purple-50 p-4 rounded-lg hover:bg-purple-100 transition duration-300"
                      >
                        <div className="flex flex-col items-center">
                          <svg xmlns="http://www.w3.org/2000/svg" className="h-8 w-8 text-purple-600 mb-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                          </svg>
                          <span className="text-sm">{t('credit_score')}</span>
                          <span className="text-xs text-purple-600">{creditScore}</span>
                        </div>
                      </button>
                    </div>
                  </div>

                  {/* Recent Activity */}
                  <div className="bg-white rounded-lg shadow-md p-6">
                    <h3 className="text-lg font-semibold mb-4">{t('recent_activity')}</h3>
                    <div className="space-y-3">
                      {user.transactions.slice(0, 5).map(txn => (
                        <div
                          key={txn.id}
                          className="flex justify-between items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer"
                          onClick={() => setTransactionDetail(txn)}
                        >
                          <div className="flex items-center">
                            <div className={`w-10 h-10 rounded-full flex items-center justify-center mr-3 ${
                              txn.type === 'credit' ? 'bg-green-100' : 'bg-red-100'
                            }`}>
                              <svg xmlns="http://www.w3.org/2000/svg" className={`h-5 w-5 ${
                                txn.type === 'credit' ? 'text-green-600' : 'text-red-600'
                              }`} fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} 
                                  d={txn.type === 'credit' ? "M12 6v6m0 0v6m0-6h6m-6 0H6" : "M20 12H4"} />
                              </svg>
                            </div>
                            <div>
                              <p className="font-medium">{txn.description}</p>
                              <p className="text-sm text-gray-500">{txn.date}</p>
                            </div>
                          </div>
                          <div className="text-right">
                            <p className={`font-semibold ${
                              txn.type === 'credit' ? 'text-green-600' : 'text-red-600'
                            }`}>
                              {txn.type === 'credit' ? '+' : '-'}₦{txn.amount.toLocaleString()}
                            </p>
                            <span className={`text-xs px-2 py-1 rounded ${
                              txn.status === 'completed' ? 'bg-green-100 text-green-800' :
                              txn.status === 'failed' ? 'bg-red-100 text-red-800' : 'bg-yellow-100 text-yellow-800'
                            }`}>
                              {t(txn.status)}
                            </span>
                          </div>
                        </div>
                      ))}
                    </div>
                  </div>
                </div>
              )}

              {/* Credit Score Tab */}
              {activeTab === 'credit' && (
                <div className="bg-white rounded-lg shadow-md p-6">
                  <h3 className="text-lg font-semibold mb-6">{t('credit_score')}</h3>
                  
                  {/* Credit Score Gauge */}
                  <div className="text-center mb-8">
                    <div className="credit-gauge">
                      <svg viewBox="0 0 200 100">
                        <path
                          d="M 20 80 A 80 80 0 0 1 180 80"
                          fill="none"
                          stroke="#e5e7eb"
                          strokeWidth="20"
                        />
                        <path
                          d="M 20 80 A 80 80 0 0 1 180 80"
                          fill="none"
                          stroke={
                            creditRating === 'excellent' ? '#10b981' :
                            creditRating === 'good' ? '#3b82f6' :
                            creditRating === 'fair' ? '#f59e0b' : '#ef4444'
                          }
                          strokeWidth="20"
                          strokeDasharray={`${(creditScore - 300) / 550 * 251.2} 251.2`}
                          strokeLinecap="round"
                        />
                      </svg>
                      <div className="credit-score-text">
                        <div className="text-4xl font-bold">{creditScore}</div>
                        <div className="text-lg text-gray-600">{t(creditRating)}</div>
                      </div>
                    </div>
                  </div>

                  {/* Credit Details Grid */}
                  <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <div className="p-4 border rounded-lg">
                      <h4 className="font-medium mb-2">{t('loan_eligibility')}</h4>
                      <div className="flex items-center space-x-2 mb-2">
                        <span className={`px-2 py-1 text-xs rounded ${
                          loanEligibility.eligible ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'
                        }`}>
                          {loanEligibility.eligible ? t('eligible') : t('not_eligible')}
                        </span>
                      </div>
                      {loanEligibility.eligible && (
                        <div className="text-sm text-gray-600">
                          <p>Max Amount: ₦{loanEligibility.maxAmount.toLocaleString()}</p>
                          <p>Interest Rate: {loanEligibility.interestRate}% p.a.</p>
                        </div>
                      )}
                    </div>

                    <div className="p-4 border rounded-lg">
                      <h4 className="font-medium mb-2">{t('credit_history')}</h4>
                      <div className="text-sm text-gray-600">
                        <p>Total Transactions: {user.transactions.length}</p>
                        <p>Completed Payments: {user.transactions.filter(t => t.status === 'completed').length}</p>
                        <p>Account Age: {user.createdAt ? Math.floor((Date.now() - new Date(user.createdAt).getTime()) / (1000 * 60 * 60 * 24)) : 0} days</p>
                      </div>
                    </div>
                  </div>

                  {/* Credit Factors */}
                  <div className="mb-8">
                    <h4 className="font-medium mb-4">{t('credit_factors')}</h4>
                    <div className="space-y-4">
                      {[
                        { key: 'paymentHistory', label: t('payment_history'), value: creditFactors.paymentHistory, color: 'bg-green-600' },
                        { key: 'creditUtilization', label: t('credit_utilization'), value: creditFactors.creditUtilization, color: 'bg-blue-600' },
                        { key: 'creditLength', label: t('credit_length'), value: Math.min(creditFactors.creditLength / 60 * 100, 100), color: 'bg-purple-600' },
                        { key: 'creditMix', label: t('credit_mix'), value: creditFactors.creditMix, color: 'bg-yellow-600' }
                      ].map(factor => (
                        <div key={factor.key}>
                          <div className="flex justify-between text-sm mb-1">
                            <span>{factor.label}</span>
                            <span>{factor.value.toFixed(1)}%</span>
                          </div>
                          <div className="w-full bg-gray-200 rounded-full h-2">
                            <div 
                              className={`${factor.color} h-2 rounded-full progress-bar`}
                              style={{width: `${factor.value}%`}}
                            ></div>
                          </div>
                        </div>
                      ))}
                    </div>
                  </div>

                  {/* Actions */}
                  <div className="flex flex-wrap gap-4">
                    <button
                      onClick={() => {
                        const report = CreditScoringSystem.generateCreditReport(user);
                        const reportData = JSON.stringify(report, null, 2);
                        const blob = new Blob([reportData], { type: 'application/json' });
                        const url = URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = `credit_report_${user.did}.json`;
                        a.click();
                        URL.revokeObjectURL(url);
                      }}
                      className="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition"
                    >
                      {t('download_report')}
                    </button>
                    <button
                      onClick={() => alert('Credit report shared with lender')}
                      className="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition"
                    >
                      {t('share_with_lender')}
                    </button>
                    <button
                      onClick={() => {
                        const key = CreditScoringSystem.generateAPIKey(user.did);
                        setApiKey(key);
                        updateUser({ apiKey: key });
                        alert(`API Key generated: ${key}`);
                      }}
                      className="px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition"
                    >
                      {t('generate_api_key')}
                    </button>
                  </div>

                  {/* API Key Display */}
                  {(apiKey || user.apiKey) && (
                    <div className="mt-6 p-4 bg-gray-50 rounded-lg">
                      <h4 className="font-medium mb-2">{t('api_access')}</h4>
                      <div className="font-mono text-sm bg-white p-2 rounded border">
                        {apiKey || user.apiKey}
                      </div>
                      <p className="text-xs text-gray-600 mt-2">
                        Use this API key to access credit scoring data for lending decisions.
                      </p>
                    </div>
                  )}
                </div>
              )}

              {/* Payments Tab */}
              {activeTab === 'payments' && (
                <div className="space-y-6">
                  <div className="bg-white rounded-lg shadow-md p-6">
                    <h3 className="text-lg font-semibold mb-4">{t('payment_services')}</h3>
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                      {/* Send Money */}
                      <div className="p-4 border rounded-lg">
                        <h4 className="font-medium mb-2">{t('send_money')}</h4>
                        <p className="text-sm text-gray-600 mb-4">Transfer money to other ONPIN wallets</p>
                        <button
                          onClick={() => setTransferModalOpen(true)}
                          className="w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition"
                        >
                          {t('transfer')}
                        </button>
                      </div>

                      {/* Pay Bills */}
                      <div className="p-4 border rounded-lg">
                        <h4 className="font-medium mb-2">{t('pay_bills')}</h4>
                        <p className="text-sm text-gray-600 mb-4">Pay electricity, water, cable TV bills</p>
                        <button
                          onClick={() => setBillPaymentModal(true)}
                          className="w-full px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 transition"
                        >
                          {t('bill_payment')}
                        </button>
                      </div>

                      {/* Airtime/Data */}
                      <div className="p-4 border rounded-lg">
                        <h4 className="font-medium mb-2">{t('airtime_data')}</h4>
                        <p className="text-sm text-gray-600 mb-4">Buy airtime and data bundles</p>
                        <button
                          onClick={() => setAirtimeModal(true)}
                          className="w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition"
                        >
                          {t('buy_now')}
                        </button>
                      </div>
                    </div>
                  </div>

                  {/* Recent Transactions */}
                  <div className="bg-white rounded-lg shadow-md p-6">
                    <h3 className="text-lg font-semibold mb-4">{t('recent_transactions')}</h3>
                    <div className="space-y-3">
                      {user.transactions.map(txn => (
                        <div
                          key={txn.id}
                          className="flex justify-between items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer"
                          onClick={() => setTransactionDetail(txn)}
                        >
                          <div>
                            <p className="font-medium">{txn.description}</p>
                            <p className="text-sm text-gray-500">{txn.date} • {txn.recipient}</p>
                          </div>
                          <div className="text-right">
                            <p className={`font-semibold ${
                              txn.type === 'credit' ? 'text-green-600' : 'text-red-600'
                            }`}>
                              {txn.type === 'credit' ? '+' : '-'}₦{txn.amount.toLocaleString()}
                            </p>
                            <span className={`text-xs px-2 py-1 rounded ${
                              txn.status === 'completed' ? 'bg-green-100 text-green-800' :
                              txn.status === 'failed' ? 'bg-red-100 text-red-800' : 'bg-yellow-100 text-yellow-800'
                            }`}>
                              {t(txn.status)}
                            </span>
                          </div>
                        </div>
                      ))}
                    </div>
                  </div>
                </div>
              )}

              {/* Identity Tab */}
              {activeTab === 'identity' && (
                <div className="space-y-6">
                  <div className="bg-white rounded-lg shadow-md p-6">
                    <h3 className="text-lg font-semibold mb-4">{t('identity_verification')}</h3>
                    
                    {/* Identity Status */}
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                      <div className="p-4 border rounded-lg">
                        <h4 className="font-medium mb-2">{t('identity_status')}</h4>
                        <div className="flex items-center space-x-2 mb-2">
                          <span className={`px-3 py-1 text-sm rounded-full ${
                            user.identityStatus === 'active' ? 'bg-green-100 text-green-800' :
                            user.identityStatus === 'suspended' ? 'bg-yellow-100 text-yellow-800' :
                            'bg-red-100 text-red-800'
                          }`}>
                            {t(`identity_status_${user.identityStatus}`)}
                          </span>
                        </div>
                        <div className="text-sm text-gray-600">
                          <p>Issue Date: {user.identityIssueDate}</p>
                          <p>Last Verified: {user.lastVerified}</p>
                          <p>Next Verification: {user.nextVerification}</p>
                        </div>
                      </div>

                      <div className="p-4 border rounded-lg">
                        <h4 className="font-medium mb-2">{t('biometric_enrollment')}</h4>
                        <div className="space-y-2">
                          {[
                            { key: 'face', label: t('face_id'), icon: '👤' },
                            { key: 'fingerprint', label: t('fingerprint'), icon: '👆' },
                            { key: 'voice', label: t('voice_recognition'), icon: '🎤' }
                          ].map(biometric => (
                            <div key={biometric.key} className="flex items-center justify-between">
                              <div className="flex items-center space-x-2">
                                <span>{biometric.icon}</span>
                                <span className="text-sm">{biometric.label}</span>
                              </div>
                              <div className="flex items-center space-x-2">
                                <span className={`text-xs px-2 py-1 rounded ${
                                  biometricEnrolled[biometric.key] || user.biometricData?.[biometric.key]?.enrolled
                                    ? 'bg-green-100 text-green-800' 
                                    : 'bg-gray-100 text-gray-800'
                                }`}>
                                  {biometricEnrolled[biometric.key] || user.biometricData?.[biometric.key]?.enrolled 
                                    ? t('verified') 
                                    : t('not_enrolled')}
                                </span>
                                {!(biometricEnrolled[biometric.key] || user.biometricData?.[biometric.key]?.enrolled) && (
                                  <button
                                    onClick={() => handleBiometricScan(biometric.key)}
                                    className="text-xs px-2 py-1 bg-blue-600 text-white rounded hover:bg-blue-700"
                                    disabled={biometricScanning === biometric.key}
                                  >
                                    {biometricScanning === biometric.key ? t('verifying') : t('enroll_now')}
                                  </button>
                                )}
                              </div>
                            </div>
                          ))}
                        </div>
                      </div>
                    </div>

                    {/* Bank Connections */}
                    <div className="p-4 border rounded-lg">
                      <h4 className="font-medium mb-4">{t('bank_connections')}</h4>
                      <div className="space-y-3">
                        {user.connectedBanks?.map(bank => (
                          <div key={bank.id} className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                            <div>
                              <p className="font-medium">{bank.name}</p>
                              <p className="text-sm text-gray-600">{bank.accountNumber} • {bank.accountName}</p>
                            </div>
                            <span className={`text-xs px-2 py-1 rounded ${
                              bank.verified ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'
                            }`}>
                              {bank.verified ? t('verified') : t('pending')}
                            </span>
                          </div>
                        ))}
                        <button
                          onClick={() => setAddBankModal(true)}
                          className="w-full p-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-gray-400 hover:text-gray-800 transition"
                        >
                          + {t('add_bank')}
                        </button>
                      </div>
                    </div>

                    {/* USSD/SMS Access */}
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                      <div className="p-4 border rounded-lg">
                        <h4 className="font-medium mb-2">{t('ussd_access')}</h4>
                        <p className="text-sm text-gray-600 mb-4">Access your wallet via USSD codes</p>
                        <div className="space-y-2">
                          <p className="text-sm"><strong>*389#</strong> - Main Menu</p>
                          <p className="text-sm"><strong>*389*1#</strong> - Check Balance</p>
                          <p className="text-sm"><strong>*389*2#</strong> - Transfer Money</p>
                        </div>
                        <button
                          onClick={() => setUssdModalOpen(true)}
                          className="mt-4 w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition"
                        >
                          {t('simulate_ussd')}
                        </button>
                      </div>

                      <div className="p-4 border rounded-lg">
                        <h4 className="font-medium mb-2">{t('sms_access')}</h4>
                        <p className="text-sm text-gray-600 mb-4">Send SMS commands to manage your wallet</p>
                        <div className="space-y-2">
                          <p className="text-sm"><strong>BAL</strong> to 389 - Check Balance</p>
                          <p className="text-sm"><strong>SEND amount phone</strong> - Transfer</p>
                          <p className="text-sm"><strong>BILL type amount</strong> - Pay Bills</p>
                        </div>
                        <button
                          onClick={() => setSmsModalOpen(true)}
                          className="mt-4 w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition"
                        >
                          {t('simulate_sms')}
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              )}

              {/* Consent Tab */}
              {activeTab === 'consent' && (
                <div className="bg-white rounded-lg shadow-md p-6">
                  <h3 className="text-lg font-semibold mb-4">{t('consent_management')}</h3>
                  
                  <div className="space-y-6">
                    {/* Active Consents */}
                    <div>
                      <h4 className="font-medium mb-4">{t('active_consents')}</h4>
                      <div className="space-y-3">
                        {user.activeConsents?.map(consent => (
                          <div key={consent.id} className="flex items-center justify-between p-4 border rounded-lg">
                            <div>
                              <p className="font-medium">{consent.organization}</p>
                              <p className="text-sm text-gray-600">{consent.scope}</p>
                              <p className="text-xs text-gray-500">Granted: {consent.date} • Expires: {consent.expiry}</p>
                            </div>
                            <button
                              onClick={() => {
                                const updatedConsents = user.activeConsents.filter(c => c.id !== consent.id);
                                updateUser({ activeConsents: updatedConsents });
                                alert(`Consent revoked from ${consent.organization}`);
                              }}
                              className="px-3 py-1 bg-red-100 text-red-600 rounded hover:bg-red-200 transition"
                            >
                              {t('revoke')}
                            </button>
                          </div>
                        ))}
                        {(!user.activeConsents || user.activeConsents.length === 0) && (
                          <p className="text-gray-500 text-center py-8">{t('no_active_consents')}</p>
                        )}
                      </div>
                    </div>

                    {/* Consent Requests */}
                    <div>
                      <h4 className="font-medium mb-4">{t('pending_requests')}</h4>
                      <div className="space-y-3">
                        {/* Sample consent request */}
                        <div className="flex items-center justify-between p-4 border rounded-lg bg-blue-50">
                          <div>
                            <p className="font-medium">First Bank Nigeria</p>
                            <p className="text-sm text-gray-600">Requesting access to credit score and transaction history</p>
                            <p className="text-xs text-gray-500">Requested: Today</p>
                          </div>
                          <div className="flex space-x-2">
                            <button
                              onClick={() => {
                                const newConsent = {
                                  id: `consent-${Date.now()}`,
                                  organization: 'First Bank Nigeria',
                                  date: new Date().toISOString().split('T')[0],
                                  expiry: new Date(Date.now() + 365*24*60*60*1000).toISOString().split('T')[0],
                                  scope: 'Credit score and transaction history'
                                };
                                updateUser({ 
                                  activeConsents: [...(user.activeConsents || []), newConsent] 
                                });
                                alert(t('consent_granted', { requester: 'First Bank Nigeria' }));
                              }}
                              className="px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 transition"
                            >
                              {t('grant')}
                            </button>
                            <button
                              className="px-3 py-1 bg-red-100 text-red-600 rounded hover:bg-red-200 transition"
                            >
                              {t('deny')}
                            </button>
                          </div>
                        </div>
                        <p className="text-gray-500 text-center py-4">No other pending requests</p>
                      </div>
                    </div>
                  </div>
                </div>
              )}

              {/* Lifecycle Tab */}
              {activeTab === 'lifecycle' && (
                <div className="bg-white rounded-lg shadow-md p-6">
                  <h3 className="text-lg font-semibold mb-4">{t('lifecycle_tab')}</h3>
                  
                  <div className="space-y-6">
                    {/* Identity Lifecycle */}
                    <div className="p-4 border rounded-lg">
                      <h4 className="font-medium mb-4">Identity Lifecycle Management</h4>
                      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div className="p-3 bg-green-50 rounded-lg">
                          <h5 className="font-medium text-green-800">{t('issue_at_birth')}</h5>
                          <p className="text-sm text-green-600">Automatic identity issuance upon birth registration</p>
                          <p className="text-xs text-green-500 mt-2">Status: Active since {user.identityIssueDate}</p>
                        </div>
                        <div className="p-3 bg-gray-50 rounded-lg">
                          <h5 className="font-medium text-gray-800">{t('revoke_at_death')}</h5>
                          <p className="text-sm text-gray-600">Identity revocation upon death certificate</p>
                          <p className="text-xs text-gray-500 mt-2">Status: Not applicable</p>
                        </div>
                      </div>
                    </div>

                    {/* Certificate Services */}
                    <div className="p-4 border rounded-lg">
                      <h4 className="font-medium mb-4">Certificate Services</h4>
                      <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                        {[
                          { key: 'birth', label: t('birth_certificate'), icon: '👶' },
                          { key: 'marriage', label: t('marriage_certificate'), icon: '💒' },
                          { key: 'divorce', label: t('divorce_certificate'), icon: '📋' },
                          { key: 'death', label: t('death_certificate'), icon: '⚰️' }
                        ].map(cert => (
                          <button
                            key={cert.key}
                            onClick={() => {
                              alert(`${cert.label} request submitted. You will be notified when ready.`);
                            }}
                            className="p-4 border rounded-lg hover:bg-gray-50 transition text-center"
                          >
                            <div className="text-2xl mb-2">{cert.icon}</div>
                            <div className="text-sm font-medium">{cert.label}</div>
                          </button>
                        ))}
                      </div>
                    </div>

                    {/* Linked Services */}
                    <div className="p-4 border rounded-lg">
                      <h4 className="font-medium mb-4">{t('linked_services')}</h4>
                      <div className="space-y-3">
                        {[
                          { name: 'National Health Insurance Scheme', status: 'active', connected: true },
                          { name: 'National Pension Commission', status: 'active', connected: true },
                          { name: 'Federal Inland Revenue Service', status: 'active', connected: false },
                          { name: 'National Social Investment Programme', status: 'pending', connected: false }
                        ].map((service, index) => (
                          <div key={index} className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                            <div>
                              <p className="font-medium">{service.name}</p>
                              <p className="text-sm text-gray-600">Status: {service.status}</p>
                            </div>
                            <span className={`text-xs px-2 py-1 rounded ${
                              service.connected ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'
                            }`}>
                              {service.connected ? 'Connected' : 'Not Connected'}
                            </span>
                          </div>
                        ))}
                      </div>
                    </div>
                  </div>
                </div>
              )}

              {/* Loans Tab */}
              {activeTab === 'loans' && (
                <div className="space-y-6">
                  <div className="bg-white rounded-lg shadow-md p-6">
                    <div className="flex justify-between items-center mb-4">
                      <h3 className="text-lg font-semibold">Loan Services</h3>
                      <button
                        onClick={() => setLoanModal(true)}
                        className="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition"
                      >
                        {t('loan_application')}
                      </button>
                    </div>

                    {/* Active Loans */}
                    <div className="mb-6">
                      <h4 className="font-medium mb-4">Active Loans</h4>
                      <div className="space-y-4">
                        {user.loans?.filter(loan => loan.status === 'active').map(loan => (
                          <div key={loan.id} className="p-4 border rounded-lg">
                            <div className="flex justify-between items-start mb-2">
                              <div>
                                <h5 className="font-medium capitalize">{loan.type} Loan</h5>
                                <p className="text-sm text-gray-600">{loan.purpose}</p>
                              </div>
                              <span className="text-xs px-2 py-1 bg-green-100 text-green-800 rounded">
                                {loan.status}
                              </span>
                            </div>
                            <div className="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                              <div>
                                <p className="text-gray-600">Loan Amount</p>
                                <p className="font-semibold">₦{loan.amount?.toLocaleString()}</p>
                              </div>
                              <div>
                                <p className="text-gray-600">Balance</p>
                                <p className="font-semibold">₦{loan.balance?.toLocaleString()}</p>
                              </div>
                              <div>
                                <p className="text-gray-600">Interest Rate</p>
                                <p className="font-semibold">{loan.interestRate}%</p>
                              </div>
                              <div>
                                <p className="text-gray-600">Due Date</p>
                                <p className="font-semibold">{loan.dueDate}</p>
                              </div>
                            </div>
                            <div className="mt-4 flex space-x-2">
                              <button
                                onClick={() => {
                                  const paymentAmount = Math.min(50000, loan.balance);
                                  if (paymentAmount > user.balance) {
                                    alert(t('insufficient_funds'));
                                    return;
                                  }
                                  
                                  const updatedLoan = {
                                    ...loan,
                                    balance: loan.balance - paymentAmount,
                                    paidAmount: (loan.paidAmount || 0) + paymentAmount
                                  };
                                  
                                  const updatedLoans = user.loans.map(l => 
                                    l.id === loan.id ? updatedLoan : l
                                  );
                                  
                                  updateUser({ loans: updatedLoans });
                                  
                                  addTransaction({
                                    type: "debit",
                                    amount: paymentAmount,
                                    description: `Loan Repayment - ${loan.type}`,
                                    recipient: "Loan Account"
                                  });
                                  
                                  alert(t('payment_made'));
                                }}
                                className="px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 transition"
                              >
                                {t('make_payment')}
                              </button>
                              <button className="px-3 py-1 bg-gray-100 text-gray-600 rounded hover:bg-gray-200 transition">
                                {t('view_details')}
                              </button>
                            </div>
                          </div>
                        ))}
                      </div>
                    </div>

                    {/* Loan Options */}
                    <div>
                      <h4 className="font-medium mb-4">Available Loan Products</h4>
                      <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                        {[
                          { type: 'personal', name: 'Personal Loan', rate: '15%', max: '₦2M', duration: '12-36 months' },
                          { type: 'business', name: 'Business Loan', rate: '12%', max: '₦10M', duration: '12-60 months' },
                          { type: 'emergency', name: 'Emergency Loan', rate: '18%', max: '₦500K', duration: '6-12 months' }
                        ].map(product => (
                          <div key={product.type} className="p-4 border rounded-lg">
                            <h5 className="font-medium mb-2">{product.name}</h5>
                            <div className="space-y-1 text-sm text-gray-600">
                              <p>Interest Rate: {product.rate}</p>
                              <p>Max Amount: {product.max}</p>
                              <p>Duration: {product.duration}</p>
                            </div>
                            <button
                              onClick={() => {
                                setLoanApplication(prev => ({ ...prev, type: product.type }));
                                setLoanModal(true);
                              }}
                              className="mt-3 w-full px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition"
                            >
                              Apply Now
                            </button>
                          </div>
                        ))}
                      </div>
                    </div>
                  </div>
                </div>
              )}

              {/* Remittance Tab */}
              {activeTab === 'remittance' && (
                <div className="space-y-6">
                  <div className="bg-white rounded-lg shadow-md p-6">
                    <div className="flex justify-between items-center mb-4">
                      <h3 className="text-lg font-semibold">{t('remittance_services')}</h3>
                      <button
                        onClick={() => setRemittanceModal(true)}
                        className="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition"
                      >
                        {t('send_money_abroad')}
                      </button>
                    </div>

                    {/* Exchange Rates */}
                    <div className="mb-6">
                      <h4 className="font-medium mb-4">Current Exchange Rates</h4>
                      <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                        {countries.slice(0, 6).map(country => (
                          <div key={country.code} className="p-3 border rounded-lg">
                            <div className="flex justify-between items-center">
                              <span className="font-medium">{country.code}</span>
                              <span className="text-green-600">₦{country.rate}</span>
                            </div>
                            <p className="text-sm text-gray-600">{country.name}</p>
                          </div>
                        ))}
                      </div>
                    </div>

                    {/* Recent Remittances */}
                    <div>
                      <h4 className="font-medium mb-4">Recent Remittances</h4>
                      <div className="space-y-3">
                        {[
                          { id: 1, recipient: 'John Doe', country: 'United States', amount: 500, currency: 'USD', status: 'completed', date: '2023-07-15' },
                          { id: 2, recipient: 'Mary Johnson', country: 'United Kingdom', amount: 200, currency: 'GBP', status: 'pending', date: '2023-07-14' }
                        ].map(remittance => (
                          <div key={remittance.id} className="flex justify-between items-center p-4 border rounded-lg">
                            <div>
                              <p className="font-medium">{remittance.recipient}</p>
                              <p className="text-sm text-gray-600">{remittance.country} • {remittance.date}</p>
                            </div>
                            <div className="text-right">
                              <p className="font-semibold">{remittance.currency} {remittance.amount}</p>
                              <span className={`text-xs px-2 py-1 rounded ${
                                remittance.status === 'completed' ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'
                              }`}>
                                {remittance.status}
                              </span>
                            </div>
                          </div>
                        ))}
                      </div>
                    </div>
                  </div>
                </div>
              )}

              {/* Investments Tab */}
              {activeTab === 'investments' && (
                <div className="space-y-6">
                  <div className="bg-white rounded-lg shadow-md p-6">
                    <div className="flex justify-between items-center mb-4">
                      <h3 className="text-lg font-semibold">{t('investment_options')}</h3>
                      <button
                        onClick={() => setInvestmentModal(true)}
                        className="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition"
                      >
                        {t('invest_now')}
                      </button>
                    </div>

                    {/* Portfolio Overview */}
                    <div className="mb-6">
                      <h4 className="font-medium mb-4">Investment Portfolio</h4>
                      <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div className="p-4 bg-green-50 rounded-lg">
                          <h5 className="font-medium text-green-800">Total Invested</h5>
                          <p className="text-2xl font-bold text-green-600">
                            ₦{user.investments?.reduce((sum, inv) => sum + inv.amount, 0).toLocaleString()}
                          </p>
                        </div>
                        <div className="p-4 bg-blue-50 rounded-lg">
                          <h5 className="font-medium text-blue-800">Current Value</h5>
                          <p className="text-2xl font-bold text-blue-600">
                            ₦{user.investments?.reduce((sum, inv) => sum + inv.currentValue, 0).toLocaleString()}
                          </p>
                        </div>
                        <div className="p-4 bg-purple-50 rounded-lg">
                          <h5 className="font-medium text-purple-800">Total Returns</h5>
                          <p className="text-2xl font-bold text-purple-600">
                            ₦{user.investments?.reduce((sum, inv) => sum + (inv.currentValue - inv.amount), 0).toLocaleString()}
                          </p>
                        </div>
                      </div>
                    </div>

                    {/* Active Investments */}
                    <div className="mb-6">
                      <h4 className="font-medium mb-4">Active Investments</h4>
                      <div className="space-y-4">
                        {user.investments?.map(investment => (
                          <div key={investment.id} className="p-4 border rounded-lg">
                            <div className="flex justify-between items-start mb-2">
                              <div>
                                <h5 className="font-medium capitalize">{investment.type.replace('_', ' ')}</h5>
                                <p className="text-sm text-gray-600">Started: {investment.startDate}</p>
                              </div>
                              <span className="text-xs px-2 py-1 bg-green-100 text-green-800 rounded">
                                {investment.status}
                              </span>
                            </div>
                            <div className="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                              <div>
                                <p className="text-gray-600">Invested</p>
                                <p className="font-semibold">₦{investment.amount.toLocaleString()}</p>
                              </div>
                              <div>
                                <p className="text-gray-600">Current Value</p>
                                <p className="font-semibold">₦{investment.currentValue.toLocaleString()}</p>
                              </div>
                              <div>
                                <p className="text-gray-600">Return Rate</p>
                                <p className="font-semibold">{investment.returnRate}%</p>
                              </div>
                              <div>
                                <p className="text-gray-600">Maturity</p>
                                <p className="font-semibold">{investment.maturityDate || 'Flexible'}</p>
                              </div>
                            </div>
                            <div className="mt-4 flex space-x-2">
                              <button
                                onClick={() => {
                                  const withdrawAmount = investment.currentValue;
                                  const updatedInvestments = user.investments.filter(inv => inv.id !== investment.id);
                                  
                                  updateUser({ 
                                    investments: updatedInvestments,
                                    balance: user.balance + withdrawAmount
                                  });
                                  
                                  addTransaction({
                                    type: "credit",
                                    amount: withdrawAmount,
                                    description: `Investment Withdrawal - ${investment.type}`,
                                    recipient: "Investment Account"
                                  });
                                  
                                  alert(t('withdrawal_successful'));
                                }}
                                className="px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 transition"
                              >
                                {t('withdraw_now')}
                              </button>
                              <button className="px-3 py-1 bg-gray-100 text-gray-600 rounded hover:bg-gray-200 transition">
                                {t('view_details')}
                              </button>
                            </div>
                          </div>
                        ))}
                      </div>
                    </div>

                    {/* Investment Products */}
                    <div>
                      <h4 className="font-medium mb-4">Available Investment Products</h4>
                      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                        {[
                          { type: 'treasury', name: t('treasury_bills'), rate: '13.5%', risk: 'Low', min: '₦10K' },
                          { type: 'mutual_funds', name: t('mutual_funds'), rate: '18.2%', risk: 'Medium', min: '₦5K' },
                          { type: 'fixed_deposit', name: t('fixed_deposit'), rate: '12.0%', risk: 'Low', min: '₦50K' },
                          { type: 'stocks', name: t('stocks'), rate: '25.0%', risk: 'High', min: '₦1K' }
                        ].map(product => (
                          <div key={product.type} className="p-4 border rounded-lg">
                            <h5 className="font-medium mb-2">{product.name}</h5>
                            <div className="space-y-1 text-sm text-gray-600">
                              <p>Expected Return: {product.rate}</p>
                              <p>Risk Level: {product.risk}</p>
                              <p>Minimum: {product.min}</p>
                            </div>
                            <button
                              onClick={() => {
                                setInvestmentDetails(prev => ({ ...prev, type: product.type }));
                                setInvestmentModal(true);
                              }}
                              className="mt-3 w-full px-3 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition"
                            >
                              {t('invest_now')}
                            </button>
                          </div>
                        ))}
                      </div>
                    </div>
                  </div>
                </div>
              )}

              {/* Emotional Data Tab */}
              {activeTab === 'emotional' && (
                <div className="bg-white rounded-lg shadow-md p-6">
                  <h3 className="text-lg font-semibold mb-4">{t('emotional_wellbeing')}</h3>
                  
                  <div className="space-y-6">
                    {/* Current Mood */}
                    <div className="p-4 border rounded-lg">
                      <h4 className="font-medium mb-4">{t('mood_tracker')}</h4>
                      <div className="space-y-4">
                        {[
                          { key: 'mood', label: 'Overall Mood', value: emotionalData.mood, color: 'blue' },
                          { key: 'stress', label: t('stress_level'), value: emotionalData.stress, color: 'red' },
                          { key: 'happiness', label: t('happiness_index'), value: emotionalData.happiness, color: 'green' },
                          { key: 'anxiety', label: t('anxiety_level'), value: emotionalData.anxiety, color: 'yellow' }
                        ].map(metric => (
                          <div key={metric.key}>
                            <div className="flex justify-between items-center mb-2">
                              <label className="text-sm font-medium">{metric.label}</label>
                              <span className="text-sm">{metric.value}%</span>
                            </div>
                            <div className="relative">
                              <input
                                type="range"
                                min="0"
                                max="100"
                                value={metric.value}
                                onChange={(e) => setEmotionalData(prev => ({
                                  ...prev,
                                  [metric.key]: parseInt(e.target.value)
                                }))}
                                className="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
                              />
                            </div>
                          </div>
                        ))}
                      </div>
                      <button
                        onClick={recordEmotionalData}
                        className="mt-4 w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition"
                      >
                        {t('record_mood')}
                      </button>
                    </div>

                    {/* Emotional History */}
                    <div className="p-4 border rounded-lg">
                      <h4 className="font-medium mb-4">Emotional History</h4>
                      <div className="space-y-3">
                        {user.emotionalHistory?.slice(0, 7).map((entry, index) => (
                          <div key={index} className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                            <div>
                              <p className="font-medium">{entry.date}</p>
                              <div className="flex space-x-4 text-sm text-gray-600">
                                <span>Mood: {entry.mood}%</span>
                                <span>Stress: {entry.stress}%</span>
                                <span>Happiness: {entry.happiness}%</span>
                              </div>
                            </div>
                            <div className="emotional-meter w-20 relative">
                              <div 
                                className="emotional-indicator"
                                style={{ left: `${entry.mood}%` }}
                              ></div>
                            </div>
                          </div>
                        ))}
                      </div>
                    </div>

                    {/* Insights */}
                    <div className="p-4 border rounded-lg">
                      <h4 className="font-medium mb-4">Emotional Insights</h4>
                      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div className="p-3 bg-blue-50 rounded-lg">
                          <h5 className="font-medium text-blue-800">Weekly Average</h5>
                          <p className="text-sm text-blue-600">
                            Your mood has been {emotionalData.mood > 70 ? 'excellent' : emotionalData.mood > 50 ? 'good' : 'needs attention'} this week
                          </p>
                        </div>
                        <div className="p-3 bg-green-50 rounded-lg">
                          <h5 className="font-medium text-green-800">Recommendation</h5>
                          <p className="text-sm text-green-600">
                            {emotionalData.stress > 70 ? 'Consider stress management techniques' : 
                             emotionalData.happiness < 50 ? 'Try engaging in activities you enjoy' :
                             'Keep up the positive mindset!'}
                          </p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              )}

              {/* Insurance Tab */}
              {activeTab === 'insurance' && (
                <div className="space-y-6">
                  <div className="bg-white rounded-lg shadow-md p-6">
                    <div className="flex justify-between items-center mb-4">
                      <h3 className="text-lg font-semibold">{t('insurance_policies')}</h3>
                      <button
                        onClick={() => setInsuranceModal(true)}
                        className="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition"
                      >
                        Get Insurance
                      </button>
                    </div>

                    {/* Active Policies */}
                    <div className="mb-6">
                      <h4 className="font-medium mb-4">Active Policies</h4>
                      <div className="space-y-4">
                        {user.insurancePolicies?.map(policy => (
                          <div key={policy.id} className="p-4 border rounded-lg">
                            <div className="flex justify-between items-start mb-2">
                              <div>
                                <h5 className="font-medium capitalize">{policy.type} Insurance</h5>
                                <p className="text-sm text-gray-600">{policy.provider}</p>
                              </div>
                              <span className="text-xs px-2 py-1 bg-green-100 text-green-800 rounded">
                                {policy.status}
                              </span>
                            </div>
                            <div className="grid grid-cols-2 md:grid-cols-3 gap-4 text-sm">
                              <div>
                                <p className="text-gray-600">Premium</p>
                                <p className="font-semibold">₦{policy.premium.toLocaleString()}/year</p>
                              </div>
                              <div>
                                <p className="text-gray-600">Coverage</p>
                                <p className="font-semibold">₦{policy.coverage.toLocaleString()}</p>
                              </div>
                              <div>
                                <p className="text-gray-600">Next Payment</p>
                                <p className="font-semibold">{policy.nextPayment}</p>
                              </div>
                            </div>
                            <div className="mt-4 flex space-x-2">
                              <button
                                onClick={() => {
                                  if (policy.premium > user.balance) {
                                    alert(t('insufficient_funds'));
                                    return;
                                  }
                                  
                                  addTransaction({
                                    type: "debit",
                                    amount: policy.premium,
                                    description: `Insurance Premium - ${policy.type}`,
                                    recipient: policy.provider
                                  });
                                  
                                  alert(t('premium_paid'));
                                }}
                                className="px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 transition"
                              >
                                {t('pay_premium')}
                              </button>
                              <button
                                onClick={() => {
                                  const claimAmount = prompt('Enter claim amount:');
                                  if (claimAmount) {
                                    alert(`Claim for ₦${parseInt(claimAmount).toLocaleString()} submitted successfully`);
                                  }
                                }}
                                className="px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition"
                              >
                                {t('file_claim')}
                              </button>
                            </div>
                          </div>
                        ))}
                      </div>
                    </div>

                    {/* Insurance Products */}
                    <div>
                      <h4 className="font-medium mb-4">Available Insurance Products</h4>
                      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                        {[
                          { type: 'health', name: t('health_insurance'), premium: '₦50K/year', coverage: '₦2M', features: ['Hospital bills', 'Surgery', 'Medication'] },
                          { type: 'life', name: t('life_insurance'), premium: '₦30K/year', coverage: '₦5M', features: ['Death benefit', 'Terminal illness', 'Disability'] },
                          { type: 'auto', name: t('auto_insurance'), premium: '₦80K/year', coverage: '₦3M', features: ['Accident coverage', 'Theft protection', 'Third party'] },
                          { type: 'property', name: t('property_insurance'), premium: '₦100K/year', coverage: '₦10M', features: ['Fire damage', 'Theft', 'Natural disasters'] }
                        ].map(product => (
                          <div key={product.type} className="p-4 border rounded-lg">
                            <h5 className="font-medium mb-2">{product.name}</h5>
                            <div className="space-y-2 text-sm text-gray-600 mb-3">
                              <p>Premium: {product.premium}</p>
                              <p>Coverage: {product.coverage}</p>
                              <div>
                                <p>Features:</p>
                                <ul className="list-disc list-inside ml-2">
                                  {product.features.map((feature, index) => (
                                    <li key={index}>{feature}</li>
                                  ))}
                                </ul>
                              </div>
                            </div>
                            <button
                              onClick={() => {
                                const newPolicy = {
                                  id: `ins_${Date.now()}`,
                                  type: product.type,
                                  provider: 'ONPIN Insurance',
                                  premium: parseInt(product.premium.replace(/[₦K,]/g, '')) * 1000,
                                  coverage: parseInt(product.coverage.replace(/[₦M,]/g, '')) * 1000000,
                                  status: 'active',
                                  nextPayment: new Date(Date.now() + 365*24*60*60*1000).toISOString().split('T')[0]
                                };
                                
                                updateUser({
                                  insurancePolicies: [...(user.insurancePolicies || []), newPolicy]
                                });
                                
                                alert(`${product.name} policy activated successfully!`);
                              }}
                              className="w-full px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition"
                            >
                              Get Policy
                            </button>
                          </div>
                        ))}
                      </div>
                    </div>
                  </div>
                </div>
              )}
            </div>
          </main>

          {/* Modals */}
          
          {/* Transfer Modal */}
          {transferModalOpen && (
            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
              <div className="bg-white rounded-lg shadow-xl p-6 w-full max-w-md">
                <h3 className="text-xl font-bold mb-4">{t('make_transfer')}</h3>
                <div className="space-y-4">
                  <div>
                    <label className="block text-gray-700 mb-1">{t('to')}</label>
                    <input
                      type="text"
                      value={transferDetails.recipient}
                      onChange={(e) => setTransferDetails({...transferDetails, recipient: e.target.value})}
                      className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                      placeholder={t('enter_recipient')}
                    />
                  </div>
                  <div>
                    <label className="block text-gray-700 mb-1">{t('amount')} (₦)</label>
                    <input
                      type="number"
                      value={transferDetails.amount}
                      onChange={(e) => setTransferDetails({...transferDetails, amount: e.target.value})}
                      className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                      placeholder={t('enter_amount')}
                    />
                  </div>
                  <div>
                    <label className="block text-gray-700 mb-1">{t('purpose')} ({t('optional')})</label>
                    <input
                      type="text"
                      value={transferDetails.purpose}
                      onChange={(e) => setTransferDetails({...transferDetails, purpose: e.target.value})}
                      className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                      placeholder={t('purpose')}
                    />
                  </div>
                </div>
                <div className="flex justify-end space-x-3 mt-6">
                  <button
                    onClick={() => setTransferModalOpen(false)}
                    className="px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition duration-300"
                  >
                    {t('cancel')}
                  </button>
                  <button
                    onClick={handleTransfer}
                    className="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition duration-300"
                  >
                    {t('send')}
                  </button>
                </div>
              </div>
            </div>
          )}

          {/* Bill Payment Modal */}
          {billPaymentModal && (
            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
              <div className="bg-white rounded-lg shadow-xl p-6 w-full max-w-md">
                <h3 className="text-xl font-bold mb-4">{t('bill_payment')}</h3>
                <div className="space-y-4">
                  <div>
                    <label className="block text-gray-700 mb-1">{t('select_biller')}</label>
                    <select
                      value={billPayment.biller}
                      onChange={(e) => setBillPayment({...billPayment, biller: e.target.value})}
                      className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                    >
                      <option value="">Select Biller</option>
                      {billers.map(biller => (
                        <option key={biller.name} value={biller.name}>{biller.name}</option>
                      ))}
                    </select>
                  </div>
                  <div>
                    <label className="block text-gray-700 mb-1">{t('customer_id')}</label>
                    <input
                      type="text"
                      value={billPayment.customerId}
                      onChange={(e) => setBillPayment({...billPayment, customerId: e.target.value})}
                      className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                      placeholder="Enter customer ID"
                    />
                  </div>
                  <div>
                    <label className="block text-gray-700 mb-1">{t('amount')} (₦)</label>
                    <input
                      type="number"
                      value={billPayment.amount}
                      onChange={(e) => setBillPayment({...billPayment, amount: e.target.value})}
                      className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                      placeholder="Enter amount"
                    />
                  </div>
                </div>
                <div className="flex justify-end space-x-3 mt-6">
                  <button
                    onClick={() => setBillPaymentModal(false)}
                    className="px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition duration-300"
                  >
                    {t('cancel')}
                  </button>
                  <button
                    onClick={handleBillPayment}
                    className="px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 transition duration-300"
                  >
                    {t('pay_now')}
                  </button>
                </div>
              </div>
            </div>
          )}

          {/* Airtime Modal */}
          {airtimeModal && (
            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
              <div className="bg-white rounded-lg shadow-xl p-6 w-full max-w-md">
                <h3 className="text-xl font-bold mb-4">{t('airtime_topup')}</h3>
                <div className="space-y-4">
                  <div>
                    <label className="block text-gray-700 mb-1">{t('select_network')}</label>
                    <select
                      value={airtimeDetails.network}
                      onChange={(e) => setAirtimeDetails({...airtimeDetails, network: e.target.value})}
                      className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                    >
                      <option value="">Select Network</option>
                      {networks.map(network => (
                        <option key={network} value={network}>{network}</option>
                      ))}
                    </select>
                  </div>
                  <div>
                    <label className="block text-gray-700 mb-1">{t('phone_number')}</label>
                    <input
                      type="tel"
                      value={airtimeDetails.phone}
                      onChange={(e) => setAirtimeDetails({...airtimeDetails, phone: e.target.value})}
                      className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                      placeholder="08012345678"
                    />
                  </div>
                  <div>
                    <label className="block text-gray-700 mb-1">{t('amount')} (₦)</label>
                    <div className="grid grid-cols-3 gap-2 mb-2">
                      {[100, 200, 500, 1000, 2000, 5000].map(amount => (
                        <button
                          key={amount}
                          onClick={() => setAirtimeDetails({...airtimeDetails, amount: amount.toString()})}
                          className="px-3 py-2 border rounded-md hover:bg-gray-50 transition"
                        >
                          ₦{amount}
                        </button>
                      ))}
                    </div>
                    <input
                      type="number"
                      value={airtimeDetails.amount}
                      onChange={(e) => setAirtimeDetails({...airtimeDetails, amount: e.target.value})}
                      className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                      placeholder="Enter custom amount"
                    />
                  </div>
                </div>
                <div className="flex justify-end space-x-3 mt-6">
                  <button
                    onClick={() => setAirtimeModal(false)}
                    className="px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition duration-300"
                  >
                    {t('cancel')}
                  </button>
                  <button
                    onClick={handleAirtimeTopup}
                    className="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition duration-300"
                  >
                    {t('buy_now')}
                  </button>
                </div>
              </div>
            </div>
          )}

          {/* Loan Application Modal */}
          {loanModal && (
            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
              <div className="bg-white rounded-lg shadow-xl p-6 w-full max-w-md">
                <h3 className="text-xl font-bold mb-4">{t('loan_application')}</h3>
                <div className="space-y-4">
                  <div>
                    <label className="block text-gray-700 mb-1">Loan Type</label>
                    <select
                      value={loanApplication.type}
                      onChange={(e) => setLoanApplication({...loanApplication, type: e.target.value})}
                      className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                    >
                      <option value="">Select Loan Type</option>
                      <option value="personal">Personal Loan</option>
                      <option value="business">Business Loan</option>
                      <option value="emergency">Emergency Loan</option>
                    </select>
                  </div>
                  <div>
                    <label className="block text-gray-700 mb-1">{t('loan_amount')} (₦)</label>
                    <input
                      type="number"
                      value={loanApplication.amount}
                      onChange={(e) => setLoanApplication({...loanApplication, amount: e.target.value})}
                      className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                      placeholder="Enter loan amount"
                    />
                  </div>
                  <div>
                    <label className="block text-gray-700 mb-1">{t('loan_purpose')}</label>
                    <input
                      type="text"
                      value={loanApplication.purpose}
                      onChange={(e) => setLoanApplication({...loanApplication, purpose: e.target.value})}
                      className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                      placeholder="Purpose of loan"
                    />
                  </div>
                  <div>
                    <label className="block text-gray-700 mb-1">{t('monthly_income')} (₦)</label>
                    <input
                      type="number"
                      value={loanApplication.income}
                      onChange={(e) => setLoanApplication({...loanApplication, income: e.target.value})}
                      className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                      placeholder="Enter monthly income"
                    />
                  </div>
                </div>
                <div className="flex justify-end space-x-3 mt-6">
                  <button
                    onClick={() => setLoanModal(false)}
                    className="px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition duration-300"
                  >
                    {t('cancel')}
                  </button>
                  <button
                    onClick={handleLoanApplication}
                    className="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition duration-300"
                  >
                    {t('apply_loan')}
                  </button>
                </div>
              </div>
            </div>
          )}

          {/* Investment Modal */}
          {investmentModal && (
            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
              <div className="bg-white rounded-lg shadow-xl p-6 w-full max-w-md">
                <h3 className="text-xl font-bold mb-4">{t('investment_options')}</h3>
                <div className="space-y-4">
                  <div>
                    <label className="block text-gray-700 mb-1">Investment Type</label>
                    <select
                      value={investmentDetails.type}
                      onChange={(e) => setInvestmentDetails({...investmentDetails, type: e.target.value})}
                      className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                    >
                      <option value="">Select Investment Type</option>
                      <option value="treasury">Treasury Bills</option>
                      <option value="mutual_funds">Mutual Funds</option>
                      <option value="fixed_deposit">Fixed Deposit</option>
                      <option value="stocks">Stocks</option>
                    </select>
                  </div>
                  <div>
                    <label className="block text-gray-700 mb-1">{t('invest_amount')} (₦)</label>
                    <input
                      type="number"
                      value={investmentDetails.amount}
                      onChange={(e) => setInvestmentDetails({...investmentDetails, amount: e.target.value})}
                      className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                      placeholder="Enter investment amount"
                    />
                  </div>
                  <div>
                    <label className="block text-gray-700 mb-1">Duration</label>
                    <select
                      value={investmentDetails.duration}
                      onChange={(e) => setInvestmentDetails({...investmentDetails, duration: e.target.value})}
                      className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                    >
                      <option value="">Select Duration</option>
                      <option value="3">3 Months</option>
                      <option value="6">6 Months</option>
                      <option value="12">12 Months</option>
                      <option value="24">24 Months</option>
                    </select>
                  </div>
                </div>
                <div className="flex justify-end space-x-3 mt-6">
                  <button
                    onClick={() => setInvestmentModal(false)}
                    className="px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition duration-300"
                  >
                    {t('cancel')}
                  </button>
                  <button
                    onClick={handleInvestment}
                    className="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition duration-300"
                  >
                    {t('invest_now')}
                  </button>
                </div>
              </div>
            </div>
          )}

          {/* Remittance Modal */}
          {remittanceModal && (
            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
              <div className="bg-white rounded-lg shadow-xl p-6 w-full max-w-md">
                <h3 className="text-xl font-bold mb-4">{t('send_money_abroad')}</h3>
                <div className="space-y-4">
                  <div>
                    <label className="block text-gray-700 mb-1">{t('recipient_country')}</label>
                    <select
                      value={remittanceDetails.country}
                      onChange={(e) => setRemittanceDetails({...remittanceDetails, country: e.target.value})}
                      className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                    >
                      <option value="">Select Country</option>
                      {countries.map(country => (
                        <option key={country.code} value={country.code}>
                          {country.name} ({country.code})
                        </option>
                      ))}
                    </select>
                  </div>
                  <div>
                    <label className="block text-gray-700 mb-1">Recipient Name</label>
                    <input
                      type="text"
                      value={remittanceDetails.recipient}
                      onChange={(e) => setRemittanceDetails({...remittanceDetails, recipient: e.target.value})}
                      className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                      placeholder="Enter recipient name"
                    />
                  </div>
                  <div>
                    <label className="block text-gray-700 mb-1">{t('amount')} (₦)</label>
                    <input
                      type="number"
                      value={remittanceDetails.amount}
                      onChange={(e) => setRemittanceDetails({...remittanceDetails, amount: e.target.value})}
                      className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                      placeholder="Enter amount in Naira"
                    />
                    {remittanceDetails.country && remittanceDetails.amount && (
                      <p className="text-sm text-gray-600 mt-1">
                        Recipient will receive: {remittanceDetails.country} {(parseFloat(remittanceDetails.amount) / (countries.find(c => c.code === remittanceDetails.country)?.rate || 1)).toFixed(2)}
                      </p>
                    )}
                  </div>
                  <div>
                    <label className="block text-gray-700 mb-1">{t('purpose')}</label>
                    <select
                      value={remittanceDetails.purpose}
                      onChange={(e) => setRemittanceDetails({...remittanceDetails, purpose: e.target.value})}
                      className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                    >
                      <option value="">Select Purpose</option>
                      <option value="family_support">Family Support</option>
                      <option value="education">Education</option>
                      <option value="business">Business</option>
                      <option value="medical">Medical</option>
                      <option value="other">Other</option>
                    </select>
                  </div>
                </div>
                <div className="flex justify-end space-x-3 mt-6">
                  <button
                    onClick={() => setRemittanceModal(false)}
                    className="px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition duration-300"
                  >
                    {t('cancel')}
                  </button>
                  <button
                    onClick={() => {
                      if (!remittanceDetails.country || !remittanceDetails.recipient || !remittanceDetails.amount) {
                        alert('Please fill all fields');
                        return;
                      }
                      
                      const amount = parseFloat(remittanceDetails.amount);
                      const fee = amount * 0.02; // 2% fee
                      const total = amount + fee;
                      
                      if (total > user.balance) {
                        alert(t('insufficient_funds'));
                        return;
                      }
                      
                      addTransaction({
                        type: "debit",
                        amount: total,
                        description: `Remittance to ${remittanceDetails.recipient} (${remittanceDetails.country})`,
                        recipient: remittanceDetails.recipient
                      });
                      
                      setRemittanceModal(false);
                      setRemittanceDetails({ country: '', recipient: '', amount: '', purpose: '' });
                      alert(t('remittance_sent'));
                    }}
                    className="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition duration-300"
                  >
                    {t('send_remittance')}
                  </button>
                </div>
              </div>
            </div>
          )}

          {/* Fund Wallet Modal */}
          {fundWalletModal && (
            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
              <div className="bg-white rounded-lg shadow-xl p-6 w-full max-w-md">
                <h3 className="text-xl font-bold mb-4">{t('fund_wallet')}</h3>
                <div className="space-y-4">
                  <div>
                    <label className="block text-gray-700 mb-1">{t('select_bank')}</label>
                    <select className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                      <option value="">Select Bank</option>
                      {banks.map(bank => (
                        <option key={bank.code} value={bank.code}>{bank.name}</option>
                      ))}
                    </select>
                  </div>
                  <div>
                    <label className="block text-gray-700 mb-1">{t('amount')} (₦)</label>
                    <input
                      type="number"
                      className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                      placeholder="Enter amount to fund"
                    />
                  </div>
                </div>
                <div className="flex justify-end space-x-3 mt-6">
                  <button
                    onClick={() => setFundWalletModal(false)}
                    className="px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition duration-300"
                  >
                    {t('cancel')}
                  </button>
                  <button
                    onClick={() => {
                      setFundWalletModal(false);
                      alert(t('funding_success'));
                    }}
                    className="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition duration-300"
                  >
                    {t('fund_now')}
                  </button>
                </div>
              </div>
            </div>
          )}

          {/* Add Bank Modal */}
          {addBankModal && (
            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
              <div className="bg-white rounded-lg shadow-xl p-6 w-full max-w-md">
                <h3 className="text-xl font-bold mb-4">{t('add_bank')}</h3>
                <div className="space-y-4">
                  <div>
                    <label className="block text-gray-700 mb-1">{t('bank_name')}</label>
                    <select className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                      <option value="">Select Bank</option>
                      {banks.map(bank => (
                        <option key={bank.code} value={bank.name}>{bank.name}</option>
                      ))}
                    </select>
                  </div>
                  <div>
                    <label className="block text-gray-700 mb-1">{t('account_number')}</label>
                    <input
                      type="text"
                      className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                      placeholder="Enter account number"
                    />
                  </div>
                  <div>
                    <label className="block text-gray-700 mb-1">{t('account_name')}</label>
                    <input
                      type="text"
                      className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                      placeholder="Account name will be auto-filled"
                      disabled
                    />
                  </div>
                </div>
                <div className="flex justify-end space-x-3 mt-6">
                  <button
                    onClick={() => setAddBankModal(false)}
                    className="px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition duration-300"
                  >
                    {t('cancel')}
                  </button>
                  <button
                    onClick={() => {
                      setAddBankModal(false);
                      alert(t('bank_added'));
                    }}
                    className="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition duration-300"
                  >
                    {t('add_now')}
                  </button>
                </div>
              </div>
            </div>
          )}

          {/* USSD Modal */}
          {ussdModalOpen && (
            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
              <div className="bg-white rounded-lg shadow-xl p-6 w-full max-w-md">
                <div className="flex justify-between items-center mb-4">
                  <h3 className="text-xl font-bold">{t('simulate_ussd')}</h3>
                  {ussdSession.active && (
                    <span className="text-xs bg-green-100 text-green-800 px-2 py-1 rounded">
                      Session Active
                    </span>
                  )}
                </div>
                <div className="space-y-4">
                  <div>
                    <label className="block text-gray-700 mb-1">
                      {ussdSession.active ? 'Enter your choice:' : 'USSD Code'}
                    </label>
                    <input
                      type="text"
                      value={ussdCode}
                      onChange={(e) => setUssdCode(e.target.value)}
                      className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                      placeholder={ussdSession.active ? "Enter option number" : "Enter USSD code (e.g., *389#)"}
                    />
                  </div>
                  {ussdResponse && (
                    <div className="p-3 bg-gray-100 rounded-md">
                      <p className="text-sm font-mono whitespace-pre-line">{ussdResponse}</p>
                    </div>
                  )}
                  {ussdSession.active && (
                    <div className="text-xs text-gray-600">
                      <p>💡 Current menu: {ussdSession.currentMenu}</p>
                      <p>Type your choice and click Send</p>
                    </div>
                  )}
                </div>
                <div className="flex justify-end space-x-3 mt-6">
                  <button
                    onClick={() => {
                      setUssdModalOpen(false);
                      setUssdCode('');
                      setUssdResponse('');
                      setUssdSession({ active: false, currentMenu: 'main', history: [], input: '' });
                    }}
                    className="px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition duration-300"
                  >
                    {ussdSession.active ? 'End Session' : t('close')}
                  </button>
                  <button
                    onClick={handleUSSDCommand}
                    className="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition duration-300"
                  >
                    Send
                  </button>
                </div>
              </div>
            </div>
          )}

          {/* SMS Modal */}
          {smsModalOpen && (
            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
              <div className="bg-white rounded-lg shadow-xl p-6 w-full max-w-md">
                <h3 className="text-xl font-bold mb-4">{t('simulate_sms')}</h3>
                <div className="space-y-4">
                  <div>
                    <label className="block text-gray-700 mb-1">SMS Command</label>
                    <input
                      type="text"
                      value={smsCommand}
                      onChange={(e) => setSmsCommand(e.target.value)}
                      className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                      placeholder="Enter SMS command (e.g., BAL)"
                    />
                  </div>
                  <div>
                    <label className="block text-gray-700 mb-1">Send to</label>
                    <input
                      type="text"
                      value="389"
                      disabled
                      className="w-full px-3 py-2 border rounded-md bg-gray-100"
                    />
                  </div>
                </div>
                <div className="flex justify-end space-x-3 mt-6">
                  <button
                    onClick={() => {
                      setSmsModalOpen(false);
                      setSmsCommand('');
                    }}
                    className="px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition duration-300"
                  >
                    {t('close')}
                  </button>
                  <button
                    onClick={() => {
                      let response = '';
                      if (smsCommand.toUpperCase() === 'BAL') {
                        response = `Your ONPIN wallet balance is ₦${user.balance.toLocaleString()}`;
                      } else {
                        response = 'Invalid SMS command';
                      }
                      alert(response);
                    }}
                    className="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition duration-300"
                  >
                    Send SMS
                  </button>
                </div>
              </div>
            </div>
          )}

          {/* Transaction Detail Modal */}
          {transactionDetail && (
            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
              <div className="bg-white rounded-lg shadow-xl p-6 w-full max-w-md">
                <h3 className="text-xl font-bold mb-4">{t('transaction_details')}</h3>
                <div className="space-y-3">
                  <div className="flex justify-between">
                    <span className="text-gray-600">{t('transaction_id')}:</span>
                    <span className="font-mono text-sm">{transactionDetail.id}</span>
                  </div>
                  <div className="flex justify-between">
                    <span className="text-gray-600">Type:</span>
                    <span className={`capitalize ${
                      transactionDetail.type === 'credit' ? 'text-green-600' : 'text-red-600'
                    }`}>
                      {transactionDetail.type}
                    </span>
                  </div>
                  <div className="flex justify-between">
                    <span className="text-gray-600">{t('amount')}:</span>
                    <span className="font-semibold">₦{transactionDetail.amount.toLocaleString()}</span>
                  </div>
                  <div className="flex justify-between">
                    <span className="text-gray-600">{t('date')}:</span>
                    <span>{transactionDetail.date}</span>
                  </div>
                  <div className="flex justify-between">
                    <span className="text-gray-600">Description:</span>
                    <span>{transactionDetail.description}</span>
                  </div>
                  <div className="flex justify-between">
                    <span className="text-gray-600">{t('recipient')}:</span>
                    <span>{transactionDetail.recipient}</span>
                  </div>
                  <div className="flex justify-between">
                    <span className="text-gray-600">{t('status')}:</span>
                    <span className={`px-2 py-1 text-xs rounded ${
                      transactionDetail.status === 'completed' ? 'bg-green-100 text-green-800' :
                      transactionDetail.status === 'failed' ? 'bg-red-100 text-red-800' : 'bg-yellow-100 text-yellow-800'
                    }`}>
                      {t(transactionDetail.status)}
                    </span>
                  </div>
                </div>
                <div className="flex justify-end mt-6">
                  <button
                    onClick={() => setTransactionDetail(null)}
                    className="px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition duration-300"
                  >
                    {t('close')}
                  </button>
                </div>
              </div>
            </div>
          )}

          {/* Biometric Scanning Modal */}
          {biometricScanning && (
            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
              <div className="bg-white rounded-lg shadow-xl p-6 w-full max-w-md text-center">
                <h3 className="text-xl font-bold mb-4">
                  {biometricScanning === 'face' ? t('biometric_scan_face') :
                   biometricScanning === 'fingerprint' ? t('biometric_scan_finger') :
                   t('biometric_scan_voice')}
                </h3>
                <div className="biometric-scan-container mb-6">
                  <div className="relative">
                    <div className="w-32 h-32 mx-auto border-4 border-green-500 rounded-full flex items-center justify-center">
                      <div className="text-4xl">
                        {biometricScanning === 'face' ? '👤' :
                         biometricScanning === 'fingerprint' ? '👆' : '🎤'}
                      </div>
                    </div>
                    <div className="absolute inset-0 border-4 border-green-500 rounded-full biometric-scan"></div>
                  </div>
                </div>
                <p className="text-gray-600">
                  {biometricScanning === 'face' ? t('scan_face') :
                   biometricScanning === 'fingerprint' ? t('scan_fingerprint') :
                   t('speak_now')}
                </p>
                <div className="mt-4">
                  <div className="w-full bg-gray-200 rounded-full h-2">
                    <div className="bg-green-600 h-2 rounded-full progress-bar" style={{width: '60%'}}></div>
                  </div>
                  <p className="text-sm text-gray-500 mt-2">Scanning...</p>
                </div>
              </div>
            </div>
          )}

          {/* Footer */}
          <footer className="bg-gray-800 text-white p-4 text-center">
            <p>© 2024 ONPIN - National Identity Wallet with AI Credit Scoring & Financial Services</p>
          </footer>
        </div>
      );
    }

    // Render the app
    ReactDOM.render(<DashboardApp />, document.getElementById('root'));
  </script>
</body>
</html>
